getUserTableSettings: EnvironemtType:3
Using local emulator
getUserTableSettings: EnvironemtType:3
getUserTableSettings: EnvironemtType:3
查看下当前的环境：  false
Express start on port 1337...
action: http-error  tenantId: 404  unique_name: POST /sdk [Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Content-Length|441|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1547838509 [Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /evox/about [Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /HNAP1 [Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: POST /sdk [Connection|close|Content-Length|441|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1547860159 [Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /evox/about [Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /HNAP1 [Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /favicon.ico [Host|116.196.119.15:1337|User-Agent|Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36|Accept|image/webp,image/apng,image/*,*/*;q=0.8|Accept-Encoding|gzip, deflate|Accept-Language|zh-CN,zh;q=0.9,en;q=0.8|Proxy-Connection|keep-alive|Referer|http://116.196.119.15:1337/|X-Lantern-Version|5.2.2] details: {}
action: http-error  tenantId: 404  unique_name: POST /signin/signin [Connection|Keep-Alive|Content-Type|application/json|User-Agent|cpprestsdk/2.10.2|Content-Length|2818|Host|116.196.119.15:1337] details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODE5MjEsIm5iZiI6MTU0Nzg4MTkyMSwiZXhwIjoxNTQ3ODg1ODIxLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.KZN8Y89cm2Ax3vrBPyFIkeaTaVf0hDA_oaNIIFZm6e-iN1aaxkb3DA9bSdvrRfYZsECavINQWr2PBaeUWp4exa1SLdZANEWnfLoNcvHiv-lmVOL2wacmLeJE8W3AB7xImjTHx0ybKFltJuQXlD0tJYCXF3MvS9TCNswPOpggFRlSmIcCdEMOpv4EwXkzYTO5bcsBze_XbZbjyENi2hxMH2ULUmypmqsLvVKMRWMC0yBQBQv8vsFFi6P5LotgQ_tZizF18FNfXYD2YW4vA2oeFvtRgcakVaMyeHriIZGCny3J9UOg30iscgJnR2Y5UX7iddBAZL9-ubVnmNCNXIEYTg name=access_token","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODE5MjEsIm5iZiI6MTU0Nzg4MTkyMSwiZXhwIjoxNTQ3ODg1ODIxLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.KZN8Y89cm2Ax3vrBPyFIkeaTaVf0hDA_oaNIIFZm6e-iN1aaxkb3DA9bSdvrRfYZsECavINQWr2PBaeUWp4exa1SLdZANEWnfLoNcvHiv-lmVOL2wacmLeJE8W3AB7xImjTHx0ybKFltJuQXlD0tJYCXF3MvS9TCNswPOpggFRlSmIcCdEMOpv4EwXkzYTO5bcsBze_XbZbjyENi2hxMH2ULUmypmqsLvVKMRWMC0yBQBQv8vsFFi6P5LotgQ_tZizF18FNfXYD2YW4vA2oeFvtRgcakVaMyeHriIZGCny3J9UOg30iscgJnR2Y5UX7iddBAZL9-ubVnmNCNXIEYTg name=access_token","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
The returned id_token is not parseable.
解码后usernull
fromToken----usernull
action: server-signin-error  tenantId: #error  unique_name: token error: user is null details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODIxODAsIm5iZiI6MTU0Nzg4MjE4MCwiZXhwIjoxNTQ3ODg2MDgwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.Sqho-lbVuGCU8uR4eb45MmfmylwxeGUeAsq5ZUfeZrrQV-kxCQEisn0kv5gVV-mewGbHF8Ii5esm_VvB2ouY2gURNHOcxo9Hb333sgj66d_IRMbyQYUaOx0Hr4dx13DP-HNsCBTmU5wjC8N0WhyJ1eTXTVJ0s_-frASOE1C8m1SgaK0eCVqaeIEcD2MsgOOSRpoJnMBtkoUqbLcLtsoz_oRfj2R6VFi0CJfT57HG53PyYAuE00a_7Dtz0yOMP0VetrtNgvTdGjz1DJW-q_j7UqJ1GRl-avj3PZtFOgtWJ29nUWYmACibuiXwAXWOWB-1BOIPcVsZjS7A0MNfTAldAg name=access_token","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODIxODAsIm5iZiI6MTU0Nzg4MjE4MCwiZXhwIjoxNTQ3ODg2MDgwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.Sqho-lbVuGCU8uR4eb45MmfmylwxeGUeAsq5ZUfeZrrQV-kxCQEisn0kv5gVV-mewGbHF8Ii5esm_VvB2ouY2gURNHOcxo9Hb333sgj66d_IRMbyQYUaOx0Hr4dx13DP-HNsCBTmU5wjC8N0WhyJ1eTXTVJ0s_-frASOE1C8m1SgaK0eCVqaeIEcD2MsgOOSRpoJnMBtkoUqbLcLtsoz_oRfj2R6VFi0CJfT57HG53PyYAuE00a_7Dtz0yOMP0VetrtNgvTdGjz1DJW-q_j7UqJ1GRl-avj3PZtFOgtWJ29nUWYmACibuiXwAXWOWB-1BOIPcVsZjS7A0MNfTAldAg name=access_token","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
The returned id_token is not parseable.
解码后usernull
fromToken----usernull
action: server-signin-error  tenantId: #error  unique_name: token error: user is null details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODI4OTUsIm5iZiI6MTU0Nzg4Mjg5NSwiZXhwIjoxNTQ3ODg2Nzk1LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.DCu7fsvLaHGr6dKrMcFVtmy2IG2D0527CXmCu5DwEu8ePnioAUR4GlJuhpmn4lLdBU_YHXPifVMhP_pJtDqSvDwDdfJ4aB_t0zTH3r0bRHcc806JFEpQrnE7C2Yjc3y_sTsxKfdJQSvX5D4SF04A2GxOmnDsTtv1_zAQrOFeEsHMulmrsuoTNHBMxe-XdZ8xinRjnPZ1bysXXMHko0B6sSZ8ZHB6oCLsJS31f9ru8UTze5Z0P4l4rStMrp6fSn6-qOY3FgDzvUm4k0vDtevgRcu9miZs4CYUAKtL8KIdej_i7riMBaA64EgZ1dKdlxaUznXJezorXfpx0iLzRrRQ8g name=access_token","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODI4OTUsIm5iZiI6MTU0Nzg4Mjg5NSwiZXhwIjoxNTQ3ODg2Nzk1LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.DCu7fsvLaHGr6dKrMcFVtmy2IG2D0527CXmCu5DwEu8ePnioAUR4GlJuhpmn4lLdBU_YHXPifVMhP_pJtDqSvDwDdfJ4aB_t0zTH3r0bRHcc806JFEpQrnE7C2Yjc3y_sTsxKfdJQSvX5D4SF04A2GxOmnDsTtv1_zAQrOFeEsHMulmrsuoTNHBMxe-XdZ8xinRjnPZ1bysXXMHko0B6sSZ8ZHB6oCLsJS31f9ru8UTze5Z0P4l4rStMrp6fSn6-qOY3FgDzvUm4k0vDtevgRcu9miZs4CYUAKtL8KIdej_i7riMBaA64EgZ1dKdlxaUznXJezorXfpx0iLzRrRQ8g name=access_token","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
action: server-signin-invalid  tenantId: Invalid post data - no body and client version  unique_name:  details: {"{\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODIxODAsIm5iZiI6MTU0Nzg4MjE4MCwiZXhwIjoxNTQ3ODg2MDgwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.Sqho-lbVuGCU8uR4eb45MmfmylwxeGUeAsq5ZUfeZrrQV-kxCQEisn0kv5gVV-mewGbHF8Ii5esm_VvB2ouY2gURNHOcxo9Hb333sgj66d_IRMbyQYUaOx0Hr4dx13DP-HNsCBTmU5wjC8N0WhyJ1eTXTVJ0s_-frASOE1C8m1SgaK0eCVqaeIEcD2MsgOOSRpoJnMBtkoUqbLcLtsoz_oRfj2R6VFi0CJfT57HG53PyYAuE00a_7Dtz0yOMP0VetrtNgvTdGjz1DJW-q_j7UqJ1GRl-avj3PZtFOgtWJ29nUWYmACibuiXwAXWOWB-1BOIPcVsZjS7A0MNfTAldAg name":"access_token\",\"build\":11000000,\"clientVersion\":342,\"displayVersion\":\"1.10.0\",\"identityToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODIxODAsIm5iZiI6MTU0Nzg4MjE4MCwiZXhwIjoxNTQ3ODg2MDgwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.Sqho-lbVuGCU8uR4eb45MmfmylwxeGUeAsq5ZUfeZrrQV-kxCQEisn0kv5gVV-mewGbHF8Ii5esm_VvB2ouY2gURNHOcxo9Hb333sgj66d_IRMbyQYUaOx0Hr4dx13DP-HNsCBTmU5wjC8N0WhyJ1eTXTVJ0s_-frASOE1C8m1SgaK0eCVqaeIEcD2MsgOOSRpoJnMBtkoUqbLcLtsoz_oRfj2R6VFi0CJfT57HG53PyYAuE00a_7Dtz0yOMP0VetrtNgvTdGjz1DJW-q_j7UqJ1GRl-avj3PZtFOgtWJ29nUWYmACibuiXwAXWOWB-1BOIPcVsZjS7A0MNfTAldAg name=access_token\",\"locale\":\"en\",\"osVersion\":\"10.0.17763\",\"platform\":\"Windows Desktop Build (Win32)(x64)\",\"refreshToken\":\"_\"}"}
eeeewwwwww
连接数据库成功
action: http-error  tenantId: 404  unique_name: POST /sdk [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Content-Length|441|Host|116.196.119.15:1337|Connection|close] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1547883083 [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337|Connection|close] details: {}
action: http-error  tenantId: 404  unique_name: GET /HNAP1 [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337|Connection|close] details: {}
action: http-error  tenantId: 404  unique_name: GET /evox/about [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337|Connection|close] details: {}
action: server-signin-invalid  tenantId: Invalid post data - no body and client version  unique_name:  details: {}
eeeewwwwww
连接数据库成功
action: server-signin-invalid  tenantId: Invalid post data - no body and client version  unique_name:  details: {}
eeeewwwwww
连接数据库成功
action: server-signin-invalid  tenantId: Invalid post data - no body and client version  unique_name:  details: {}
eeeewwwwww
连接数据库成功
action: server-signin-invalid  tenantId: Invalid post data - no body and client version  unique_name:  details: {}
eeeewwwwww
连接数据库成功
action: server-signin-invalid  tenantId: Invalid post data - no body and client version  unique_name:  details: {}
eeeewwwwww
连接数据库成功
action: server-signin-invalid  tenantId: Invalid post data - no body and client version  unique_name:  details: {}
eeeewwwwww
连接数据库成功
The returned id_token is not parseable.
解码后usernull
fromToken----usernull
action: server-signin-error  tenantId: #error  unique_name: token error: user is null details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODQ1MjksIm5iZiI6MTU0Nzg4NDUyOSwiZXhwIjoxNTQ3ODg4NDI5LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.I983BoGbF50uSisjNoxXzAAK1ORB4P0q_xTC879Wa7lwq7La9kht1CaaMPoWiF8rFHjBo-ZlehkxO2euXxfeo5vvetp0wtfRiwtiuFMblMfpJJYepzbzXmDWSloypaDaR8AXSGrGUkzQE8u7qIE252rTNkEqieBDlWo4P71oSZ-0bDfJjK-jxYsA79_dl8bQvwV_XvEYXCah-zUKs9A1Bh86Onx41jvYI_1O9T99nm-QPdyIlS50Zz4b_EugkPzINkplpWyb38GczDhIobwa5gBAW0gRDLUDnkLFt4QXXJlIOzyxoGdYzdUdh6RuEGGlkWbKgnin0PL2BGQqmFcXeg name=access_token","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODQ1MjksIm5iZiI6MTU0Nzg4NDUyOSwiZXhwIjoxNTQ3ODg4NDI5LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.I983BoGbF50uSisjNoxXzAAK1ORB4P0q_xTC879Wa7lwq7La9kht1CaaMPoWiF8rFHjBo-ZlehkxO2euXxfeo5vvetp0wtfRiwtiuFMblMfpJJYepzbzXmDWSloypaDaR8AXSGrGUkzQE8u7qIE252rTNkEqieBDlWo4P71oSZ-0bDfJjK-jxYsA79_dl8bQvwV_XvEYXCah-zUKs9A1Bh86Onx41jvYI_1O9T99nm-QPdyIlS50Zz4b_EugkPzINkplpWyb38GczDhIobwa5gBAW0gRDLUDnkLFt4QXXJlIOzyxoGdYzdUdh6RuEGGlkWbKgnin0PL2BGQqmFcXeg name=access_token","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
The returned id_token is not parseable.
解码后usernull
fromToken----usernull
action: server-signin-error  tenantId: #error  unique_name: token error: user is null details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODQ2NjYsIm5iZiI6MTU0Nzg4NDY2NiwiZXhwIjoxNTQ3ODg4NTY2LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.EUgmNafMx2Pf8mAsfUyJSDVeFcfSTEMIGfUUgaAYcEd8IABlHNhqOQSZF81OvtnY6r7DFBeo6MoH4J9S9u_sEMjQ6h8-uBHXHQC4tIbfH1mjbJ3A4OrLNnN5LTkdnyKTOPVHX7WVvlWldf_1F59W2GkgLN5Ryyk6xUny0gWnL58QaDkgjElyvXs4UxY4xVK5S9k9c19v3_uYE8MGTZeneiAYTUpD8mYihrISRM0A3L0uxkZVV6MkWDTvkdPTvo0ZGADmD0SHec4l3ZHIeZsEoWjrauq2i9NfERdxNveRcZTUzY1BeZk3QEyXngL2n2qcQTv6CEafpuUSFL9jJkFWrw name=access_token","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODQ2NjYsIm5iZiI6MTU0Nzg4NDY2NiwiZXhwIjoxNTQ3ODg4NTY2LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.EUgmNafMx2Pf8mAsfUyJSDVeFcfSTEMIGfUUgaAYcEd8IABlHNhqOQSZF81OvtnY6r7DFBeo6MoH4J9S9u_sEMjQ6h8-uBHXHQC4tIbfH1mjbJ3A4OrLNnN5LTkdnyKTOPVHX7WVvlWldf_1F59W2GkgLN5Ryyk6xUny0gWnL58QaDkgjElyvXs4UxY4xVK5S9k9c19v3_uYE8MGTZeneiAYTUpD8mYihrISRM0A3L0uxkZVV6MkWDTvkdPTvo0ZGADmD0SHec4l3ZHIeZsEoWjrauq2i9NfERdxNveRcZTUzY1BeZk3QEyXngL2n2qcQTv6CEafpuUSFL9jJkFWrw name=access_token","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
base64Decoded========{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}
解码后user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
fromToken----user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
identity-----{"iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"exp":1547424634,"tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","unique_name":"stu15@usmie.com","user_name":"stu15@usmie.com","full_name":"ブラック フラグ","identity_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA"}
action: setSkin  tenantId: 38dd6634-1031-4c50-a9b4-d16cd9d97d57  unique_name: stu15@usmie.com details: {"clientVersion":"150","build":"10027000","identityToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","unique_name":"stu15@usmie.com"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
连接数据库成功
final+null
action: setSkin-error  tenantId: #error  unique_name: set: Unable to update skin, user does not exist. tenantId: '38dd6634-1031-4c50-a9b4-d16cd9d97d57', oid: 'd2bb1fae-fe7e-4473-a161-92aefee52a3d'. details: {"message":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","build":"11000000","clientVersion":"342","displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-18T14:22:49.179Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
userEntity------{"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-18T14:22:49.179Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-18T14:22:49.179Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser111
updateExistingUser1111
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser2222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser3333
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 69,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 3519,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 56562221,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 3609,
           [Symbol(triggerId)]: 3519 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 a1 96 b8 02 e9 00 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45651617,
     responseTo: 233,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 71,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 3527,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 56562224,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 3622,
           [Symbol(triggerId)]: 3527 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 a6 96 b8 02 ec 00 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45651622,
     responseTo: 236,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-29T08:04:34.304Z|52a0f19b6f135f4f8f16124049da52eae691cb5d580496ee1904f6eb68eb95384a18384bb1e6b765fb0cc4aae4ff30c00cb2b62b2c32820477ad2140982a5e83f00cab1ce1c318f2aed652424689ada6342cc71a8094695bd1323d8090f822201ee966798b91a026b9de22a5e6d574d31e101f491e13d25ca70371f4cd3b26d3c9f73dae863170aea60b51f17a351b7e66b5eae59dd1aadfdc9dd6512741f4ba1b50bcd233897a85ab911ea25710e840d522208583fe603c72db1a767ec6795b4c718e33eb64f0541126b11167f6d004cfe78abaaa7302102ca4a2e9eeb8818d8cce2f722b43d68a285aa7e97cb29a1e1834a60954858f719e82f74335f9f57e
user--------111{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}
userid--------111"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-29T08:04:34.304Z|52a0f19b6f135f4f8f16124049da52eae691cb5d580496ee1904f6eb68eb95384a18384bb1e6b765fb0cc4aae4ff30c00cb2b62b2c32820477ad2140982a5e83f00cab1ce1c318f2aed652424689ada6342cc71a8094695bd1323d8090f822201ee966798b91a026b9de22a5e6d574d31e101f491e13d25ca70371f4cd3b26d3c9f73dae863170aea60b51f17a351b7e66b5eae59dd1aadfdc9dd6512741f4ba1b50bcd233897a85ab911ea25710e840d522208583fe603c72db1a767ec6795b4c718e33eb64f0541126b11167f6d004cfe78abaaa7302102ca4a2e9eeb8818d8cce2f722b43d68a285aa7e97cb29a1e1834a60954858f719e82f74335f9f57e","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-29T08:04:34.304Z|52a0f19b6f135f4f8f16124049da52eae691cb5d580496ee1904f6eb68eb95384a18384bb1e6b765fb0cc4aae4ff30c00cb2b62b2c32820477ad2140982a5e83f00cab1ce1c318f2aed652424689ada6342cc71a8094695bd1323d8090f822201ee966798b91a026b9de22a5e6d574d31e101f491e13d25ca70371f4cd3b26d3c9f73dae863170aea60b51f17a351b7e66b5eae59dd1aadfdc9dd6512741f4ba1b50bcd233897a85ab911ea25710e840d522208583fe603c72db1a767ec6795b4c718e33eb64f0541126b11167f6d004cfe78abaaa7302102ca4a2e9eeb8818d8cce2f722b43d68a285aa7e97cb29a1e1834a60954858f719e82f74335f9f57e\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-29T08:04:34.304Z|52a0f19b6f135f4f8f16124049da52eae691cb5d580496ee1904f6eb68eb95384a18384bb1e6b765fb0cc4aae4ff30c00cb2b62b2c32820477ad2140982a5e83f00cab1ce1c318f2aed652424689ada6342cc71a8094695bd1323d8090f822201ee966798b91a026b9de22a5e6d574d31e101f491e13d25ca70371f4cd3b26d3c9f73dae863170aea60b51f17a351b7e66b5eae59dd1aadfdc9dd6512741f4ba1b50bcd233897a85ab911ea25710e840d522208583fe603c72db1a767ec6795b4c718e33eb64f0541126b11167f6d004cfe78abaaa7302102ca4a2e9eeb8818d8cce2f722b43d68a285aa7e97cb29a1e1834a60954858f719e82f74335f9f57e","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547882180,"nbf":1547882180,"exp":1547886080,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547882180,"nbf":1547882180,"exp":1547886080,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547882180,"nbf":1547882180,"exp":1547886080,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODIxODAsIm5iZiI6MTU0Nzg4MjE4MCwiZXhwIjoxNTQ3ODg2MDgwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.Sqho-lbVuGCU8uR4eb45MmfmylwxeGUeAsq5ZUfeZrrQV-kxCQEisn0kv5gVV-mewGbHF8Ii5esm_VvB2ouY2gURNHOcxo9Hb333sgj66d_IRMbyQYUaOx0Hr4dx13DP-HNsCBTmU5wjC8N0WhyJ1eTXTVJ0s_-frASOE1C8m1SgaK0eCVqaeIEcD2MsgOOSRpoJnMBtkoUqbLcLtsoz_oRfj2R6VFi0CJfT57HG53PyYAuE00a_7Dtz0yOMP0VetrtNgvTdGjz1DJW-q_j7UqJ1GRl-avj3PZtFOgtWJ29nUWYmACibuiXwAXWOWB-1BOIPcVsZjS7A0MNfTAldAg","build":"11000000","clientVersion":"342","displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODIxODAsIm5iZiI6MTU0Nzg4MjE4MCwiZXhwIjoxNTQ3ODg2MDgwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.Sqho-lbVuGCU8uR4eb45MmfmylwxeGUeAsq5ZUfeZrrQV-kxCQEisn0kv5gVV-mewGbHF8Ii5esm_VvB2ouY2gURNHOcxo9Hb333sgj66d_IRMbyQYUaOx0Hr4dx13DP-HNsCBTmU5wjC8N0WhyJ1eTXTVJ0s_-frASOE1C8m1SgaK0eCVqaeIEcD2MsgOOSRpoJnMBtkoUqbLcLtsoz_oRfj2R6VFi0CJfT57HG53PyYAuE00a_7Dtz0yOMP0VetrtNgvTdGjz1DJW-q_j7UqJ1GRl-avj3PZtFOgtWJ29nUWYmACibuiXwAXWOWB-1BOIPcVsZjS7A0MNfTAldAg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-18T09:51:33.856Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-18T09:51:33.856Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-18T09:51:33.856Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 89,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 4374,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 56951557,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 4457,
           [Symbol(triggerId)]: 4374 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 12 d4 b8 02 2c 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45667346,
     responseTo: 300,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 91,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 4421,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 56951558,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 4502,
           [Symbol(triggerId)]: 4421 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 14 d4 b8 02 2f 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45667348,
     responseTo: 303,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:11:03.637Z|8e1765579640e7c8c62221145db7ab9a58acef4e73d2c0e3a22dddc4210fee2e9af493d5eef131098222d365421e6047b5ad4ea2584dd3816b718e140f3a373ce2628735b5af979eb36edfd3d737fe276d40199ec1d7a9e7d5667ad493f510eb3bee3e6a09381b6c525ab81f4eca867a2a7688ea9e729eb25a459424622914955a7ec17d18b31c8aba21815f31db7948765a3c2e219cb5d868150ea8e5dc2d4e4534e238d9daa77c03d6d32093c59968a669584dda8808bf5e7dc0120898cd44a672631f5c23a050d5601f6e62d31cb78cc11cf09e30f92db30bcdcf2282415e73e86de10c4063ef907dba23a344331a9597fb08be27abf9b90c3fe22e2fd757
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:11:03.637Z|8e1765579640e7c8c62221145db7ab9a58acef4e73d2c0e3a22dddc4210fee2e9af493d5eef131098222d365421e6047b5ad4ea2584dd3816b718e140f3a373ce2628735b5af979eb36edfd3d737fe276d40199ec1d7a9e7d5667ad493f510eb3bee3e6a09381b6c525ab81f4eca867a2a7688ea9e729eb25a459424622914955a7ec17d18b31c8aba21815f31db7948765a3c2e219cb5d868150ea8e5dc2d4e4534e238d9daa77c03d6d32093c59968a669584dda8808bf5e7dc0120898cd44a672631f5c23a050d5601f6e62d31cb78cc11cf09e30f92db30bcdcf2282415e73e86de10c4063ef907dba23a344331a9597fb08be27abf9b90c3fe22e2fd757","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:11:03.637Z|8e1765579640e7c8c62221145db7ab9a58acef4e73d2c0e3a22dddc4210fee2e9af493d5eef131098222d365421e6047b5ad4ea2584dd3816b718e140f3a373ce2628735b5af979eb36edfd3d737fe276d40199ec1d7a9e7d5667ad493f510eb3bee3e6a09381b6c525ab81f4eca867a2a7688ea9e729eb25a459424622914955a7ec17d18b31c8aba21815f31db7948765a3c2e219cb5d868150ea8e5dc2d4e4534e238d9daa77c03d6d32093c59968a669584dda8808bf5e7dc0120898cd44a672631f5c23a050d5601f6e62d31cb78cc11cf09e30f92db30bcdcf2282415e73e86de10c4063ef907dba23a344331a9597fb08be27abf9b90c3fe22e2fd757\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:11:03.637Z|8e1765579640e7c8c62221145db7ab9a58acef4e73d2c0e3a22dddc4210fee2e9af493d5eef131098222d365421e6047b5ad4ea2584dd3816b718e140f3a373ce2628735b5af979eb36edfd3d737fe276d40199ec1d7a9e7d5667ad493f510eb3bee3e6a09381b6c525ab81f4eca867a2a7688ea9e729eb25a459424622914955a7ec17d18b31c8aba21815f31db7948765a3c2e219cb5d868150ea8e5dc2d4e4534e238d9daa77c03d6d32093c59968a669584dda8808bf5e7dc0120898cd44a672631f5c23a050d5601f6e62d31cb78cc11cf09e30f92db30bcdcf2282415e73e86de10c4063ef907dba23a344331a9597fb08be27abf9b90c3fe22e2fd757","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
The returned id_token is not parseable.
解码后usernull
fromToken----usernull
action: server-signin-error  tenantId: #error  unique_name: token error: user is null details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODIxODAsIm5iZiI6MTU0Nzg4MjE4MCwiZXhwIjoxNTQ3ODg2MDgwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.Sqho-lbVuGCU8uR4eb45MmfmylwxeGUeAsq5ZUfeZrrQV-kxCQEisn0kv5gVV-mewGbHF8Ii5esm_VvB2ouY2gURNHOcxo9Hb333sgj66d_IRMbyQYUaOx0Hr4dx13DP-HNsCBTmU5wjC8N0WhyJ1eTXTVJ0s_-frASOE1C8m1SgaK0eCVqaeIEcD2MsgOOSRpoJnMBtkoUqbLcLtsoz_oRfj2R6VFi0CJfT57HG53PyYAuE00a_7Dtz0yOMP0VetrtNgvTdGjz1DJW-q_j7UqJ1GRl-avj3PZtFOgtWJ29nUWYmACibuiXwAXWOWB-1BOIPcVsZjS7A0MNfTAldAg name=access_token","build":"11000000","clientVersion":"342","displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODIxODAsIm5iZiI6MTU0Nzg4MjE4MCwiZXhwIjoxNTQ3ODg2MDgwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.Sqho-lbVuGCU8uR4eb45MmfmylwxeGUeAsq5ZUfeZrrQV-kxCQEisn0kv5gVV-mewGbHF8Ii5esm_VvB2ouY2gURNHOcxo9Hb333sgj66d_IRMbyQYUaOx0Hr4dx13DP-HNsCBTmU5wjC8N0WhyJ1eTXTVJ0s_-frASOE1C8m1SgaK0eCVqaeIEcD2MsgOOSRpoJnMBtkoUqbLcLtsoz_oRfj2R6VFi0CJfT57HG53PyYAuE00a_7Dtz0yOMP0VetrtNgvTdGjz1DJW-q_j7UqJ1GRl-avj3PZtFOgtWJ29nUWYmACibuiXwAXWOWB-1BOIPcVsZjS7A0MNfTAldAg name=access_token","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547882180,"nbf":1547882180,"exp":1547886080,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547882180,"nbf":1547882180,"exp":1547886080,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547882180,"nbf":1547882180,"exp":1547886080,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODIxODAsIm5iZiI6MTU0Nzg4MjE4MCwiZXhwIjoxNTQ3ODg2MDgwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.Sqho-lbVuGCU8uR4eb45MmfmylwxeGUeAsq5ZUfeZrrQV-kxCQEisn0kv5gVV-mewGbHF8Ii5esm_VvB2ouY2gURNHOcxo9Hb333sgj66d_IRMbyQYUaOx0Hr4dx13DP-HNsCBTmU5wjC8N0WhyJ1eTXTVJ0s_-frASOE1C8m1SgaK0eCVqaeIEcD2MsgOOSRpoJnMBtkoUqbLcLtsoz_oRfj2R6VFi0CJfT57HG53PyYAuE00a_7Dtz0yOMP0VetrtNgvTdGjz1DJW-q_j7UqJ1GRl-avj3PZtFOgtWJ29nUWYmACibuiXwAXWOWB-1BOIPcVsZjS7A0MNfTAldAg","build":"11000000","clientVersion":"342","displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODIxODAsIm5iZiI6MTU0Nzg4MjE4MCwiZXhwIjoxNTQ3ODg2MDgwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.Sqho-lbVuGCU8uR4eb45MmfmylwxeGUeAsq5ZUfeZrrQV-kxCQEisn0kv5gVV-mewGbHF8Ii5esm_VvB2ouY2gURNHOcxo9Hb333sgj66d_IRMbyQYUaOx0Hr4dx13DP-HNsCBTmU5wjC8N0WhyJ1eTXTVJ0s_-frASOE1C8m1SgaK0eCVqaeIEcD2MsgOOSRpoJnMBtkoUqbLcLtsoz_oRfj2R6VFi0CJfT57HG53PyYAuE00a_7Dtz0yOMP0VetrtNgvTdGjz1DJW-q_j7UqJ1GRl-avj3PZtFOgtWJ29nUWYmACibuiXwAXWOWB-1BOIPcVsZjS7A0MNfTAldAg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-19T08:24:02.892Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-19T08:24:02.892Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-19T08:24:02.892Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-19T08:24:02.892Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 119,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 5610,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 57730837,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 5659,
           [Symbol(triggerId)]: 5610 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 88 4f b9 02 82 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45698952,
     responseTo: 386,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-19T08:24:02.892Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 117,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 5575,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 57730843,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 5751,
           [Symbol(triggerId)]: 5575 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 91 4f b9 02 8c 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45698961,
     responseTo: 396,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-19T08:24:02.892Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:24:02.922Z|435e2835cbb1db360934de068169ac9547743de181f0748f43d42054891e635337c2601e238a4a4ba87835ec65a11805fa125696d8768a23d9b1fa93675b1dcf2306df579d4ed3c5f974a6e2631218e6812e7eb68f75360ed69415b3e740f74a35396a98dc35cf8eb33626ce7af382e7237f69ed947970de7abd04567e4b33d7aa8267810dccc841ff67f440c9519168b64fee9b60e77ceb98839432ffe64821b50487e04a3bd6246b48267c432dfa2edfca84257bd13e2792d05be1158893754f2f6278eb50a0b11e2ccc2a067aa7d53b9198d83255545601641fc3321ba8ca3816d78ff22eb84bb3362fcd0f85a1a539dfe2279b69190a70b0f1fb04d43ef9
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-19T08:24:02.892Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:24:02.922Z|435e2835cbb1db360934de068169ac9547743de181f0748f43d42054891e635337c2601e238a4a4ba87835ec65a11805fa125696d8768a23d9b1fa93675b1dcf2306df579d4ed3c5f974a6e2631218e6812e7eb68f75360ed69415b3e740f74a35396a98dc35cf8eb33626ce7af382e7237f69ed947970de7abd04567e4b33d7aa8267810dccc841ff67f440c9519168b64fee9b60e77ceb98839432ffe64821b50487e04a3bd6246b48267c432dfa2edfca84257bd13e2792d05be1158893754f2f6278eb50a0b11e2ccc2a067aa7d53b9198d83255545601641fc3321ba8ca3816d78ff22eb84bb3362fcd0f85a1a539dfe2279b69190a70b0f1fb04d43ef9","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:24:02.922Z|435e2835cbb1db360934de068169ac9547743de181f0748f43d42054891e635337c2601e238a4a4ba87835ec65a11805fa125696d8768a23d9b1fa93675b1dcf2306df579d4ed3c5f974a6e2631218e6812e7eb68f75360ed69415b3e740f74a35396a98dc35cf8eb33626ce7af382e7237f69ed947970de7abd04567e4b33d7aa8267810dccc841ff67f440c9519168b64fee9b60e77ceb98839432ffe64821b50487e04a3bd6246b48267c432dfa2edfca84257bd13e2792d05be1158893754f2f6278eb50a0b11e2ccc2a067aa7d53b9198d83255545601641fc3321ba8ca3816d78ff22eb84bb3362fcd0f85a1a539dfe2279b69190a70b0f1fb04d43ef9\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:24:02.922Z|435e2835cbb1db360934de068169ac9547743de181f0748f43d42054891e635337c2601e238a4a4ba87835ec65a11805fa125696d8768a23d9b1fa93675b1dcf2306df579d4ed3c5f974a6e2631218e6812e7eb68f75360ed69415b3e740f74a35396a98dc35cf8eb33626ce7af382e7237f69ed947970de7abd04567e4b33d7aa8267810dccc841ff67f440c9519168b64fee9b60e77ceb98839432ffe64821b50487e04a3bd6246b48267c432dfa2edfca84257bd13e2792d05be1158893754f2f6278eb50a0b11e2ccc2a067aa7d53b9198d83255545601641fc3321ba8ca3816d78ff22eb84bb3362fcd0f85a1a539dfe2279b69190a70b0f1fb04d43ef9","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
action: server-signin-invalid  tenantId: Invalid post data - no body and client version  unique_name:  details: {}
eeeewwwwww
连接数据库成功
action: server-signin-invalid  tenantId: Invalid post data - no body and client version  unique_name:  details: {}
eeeewwwwww
连接数据库成功
The returned id_token is not parseable.
解码后usernull
fromToken----usernull
action: server-signin-error  tenantId: #error  unique_name: token error: user is null details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODY3MjQsIm5iZiI6MTU0Nzg4NjcyNCwiZXhwIjoxNTQ3ODkwNjI0LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.b63DSf0yTNLuHnLsJBor0uEiwRJtT0E3_M_hoX3xK04sS0XfjMycM9Rf7o120tBX9BlW9GQu7VPcIippzSynRnVggZ5IfNnZsq6jE8PFtM4K6K8-SiZlOMFodlvY9vNki68D2rGjlyunlLT81C4ffhAUoTeOtIYYRBXDAUhPmkzag4oaO9lr0s9_1o7e3j_rca4LHFj0s1O_JD92kvLC-kv5cozAKVmBOFxen74undiGcPvVBhRmMPQIdM4_3mh2BAF_0RrKthFqlXEFMZ_DzeT_gJ877YZovHBaKUpk0tafYB6dv9y6DvgmHkigjmAORlWyBY8bU3V9YKy3Fy4LMQ name=access_token","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODY3MjQsIm5iZiI6MTU0Nzg4NjcyNCwiZXhwIjoxNTQ3ODkwNjI0LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.b63DSf0yTNLuHnLsJBor0uEiwRJtT0E3_M_hoX3xK04sS0XfjMycM9Rf7o120tBX9BlW9GQu7VPcIippzSynRnVggZ5IfNnZsq6jE8PFtM4K6K8-SiZlOMFodlvY9vNki68D2rGjlyunlLT81C4ffhAUoTeOtIYYRBXDAUhPmkzag4oaO9lr0s9_1o7e3j_rca4LHFj0s1O_JD92kvLC-kv5cozAKVmBOFxen74undiGcPvVBhRmMPQIdM4_3mh2BAF_0RrKthFqlXEFMZ_DzeT_gJ877YZovHBaKUpk0tafYB6dv9y6DvgmHkigjmAORlWyBY8bU3V9YKy3Fy4LMQ name=access_token","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547887036,"nbf":1547887036,"exp":1547890936,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547887036,"nbf":1547887036,"exp":1547890936,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547887036,"nbf":1547887036,"exp":1547890936,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODcwMzYsIm5iZiI6MTU0Nzg4NzAzNiwiZXhwIjoxNTQ3ODkwOTM2LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.MuRbxhNm8vEWvcorTwUdKJolZ2hLgf1SMmqty2Ri2YYwXo2EH9Ct6iilEgN88SEMxXFc9MDSrTh8JuDPYdXjRzyFuKN6AeNaRj-49YuzU3QyNq3vaO4hWCQz77ewNi5JHTX9YsRmmtrBH9nLvj61AcqOCGbtamZdxb6-gV-UhzQfSfrxyfnXHjrX6rQim6itAYywTdSRW3Cj9vU18Rq4CT1TpuNUZJAaws2csk8YGoacv66U6zd0fPnHZto_EZeI8Fco79NOob8UumvIV70jsnoThgZiZrwz9lBW9q613RzMGjDrXvNY1VO9YmJb7uVLQAl3loBSSY-D5fE0uJQjXw","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODcwMzYsIm5iZiI6MTU0Nzg4NzAzNiwiZXhwIjoxNTQ3ODkwOTM2LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.MuRbxhNm8vEWvcorTwUdKJolZ2hLgf1SMmqty2Ri2YYwXo2EH9Ct6iilEgN88SEMxXFc9MDSrTh8JuDPYdXjRzyFuKN6AeNaRj-49YuzU3QyNq3vaO4hWCQz77ewNi5JHTX9YsRmmtrBH9nLvj61AcqOCGbtamZdxb6-gV-UhzQfSfrxyfnXHjrX6rQim6itAYywTdSRW3Cj9vU18Rq4CT1TpuNUZJAaws2csk8YGoacv66U6zd0fPnHZto_EZeI8Fco79NOob8UumvIV70jsnoThgZiZrwz9lBW9q613RzMGjDrXvNY1VO9YmJb7uVLQAl3loBSSY-D5fE0uJQjXw","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-19T08:24:02.892Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-19T08:24:02.892Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-19T08:24:02.892Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 151,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 7038,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 58523112,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 7132,
           [Symbol(triggerId)]: 7038 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 3b ce b9 02 f5 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45731387,
     responseTo: 501,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 149,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 7030,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 58523113,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 7138,
           [Symbol(triggerId)]: 7030 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 3c ce b9 02 f6 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45731388,
     responseTo: 502,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:37:15.192Z|3f8a079284e0ecc85036a4b49148a8400ce917cf4c22dc68736f60e715a8b272df69bdbbe5acfa35fd915e7aee840bf68a3beb5bd8996fcf015621c2a99d6c06f0903932769e6115eaf93d8a2916e9113c690d98f34a2e226f631f4b05a5995af900e8dc4c80657f4699add6f85a0bb7a22fa5b68a462c29509ecf96aee45ae95cbc2b431b9ca50cd9262adaac7a21420783a993c903e7b423f452fa2c42691a8f50a876a4a7734e051c4d94443369d4c7037db46f4e9782e51df045fa2ce14ae75c452ec77498050c58b4a1237daaf4fee6ff2190642902e9a33d1f59279f7edd39ae0daa10e5ac834c7ed88a899067b91e603f48ae1a552f05c51e472b501c
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:37:15.192Z|3f8a079284e0ecc85036a4b49148a8400ce917cf4c22dc68736f60e715a8b272df69bdbbe5acfa35fd915e7aee840bf68a3beb5bd8996fcf015621c2a99d6c06f0903932769e6115eaf93d8a2916e9113c690d98f34a2e226f631f4b05a5995af900e8dc4c80657f4699add6f85a0bb7a22fa5b68a462c29509ecf96aee45ae95cbc2b431b9ca50cd9262adaac7a21420783a993c903e7b423f452fa2c42691a8f50a876a4a7734e051c4d94443369d4c7037db46f4e9782e51df045fa2ce14ae75c452ec77498050c58b4a1237daaf4fee6ff2190642902e9a33d1f59279f7edd39ae0daa10e5ac834c7ed88a899067b91e603f48ae1a552f05c51e472b501c","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:37:15.192Z|3f8a079284e0ecc85036a4b49148a8400ce917cf4c22dc68736f60e715a8b272df69bdbbe5acfa35fd915e7aee840bf68a3beb5bd8996fcf015621c2a99d6c06f0903932769e6115eaf93d8a2916e9113c690d98f34a2e226f631f4b05a5995af900e8dc4c80657f4699add6f85a0bb7a22fa5b68a462c29509ecf96aee45ae95cbc2b431b9ca50cd9262adaac7a21420783a993c903e7b423f452fa2c42691a8f50a876a4a7734e051c4d94443369d4c7037db46f4e9782e51df045fa2ce14ae75c452ec77498050c58b4a1237daaf4fee6ff2190642902e9a33d1f59279f7edd39ae0daa10e5ac834c7ed88a899067b91e603f48ae1a552f05c51e472b501c\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:37:15.192Z|3f8a079284e0ecc85036a4b49148a8400ce917cf4c22dc68736f60e715a8b272df69bdbbe5acfa35fd915e7aee840bf68a3beb5bd8996fcf015621c2a99d6c06f0903932769e6115eaf93d8a2916e9113c690d98f34a2e226f631f4b05a5995af900e8dc4c80657f4699add6f85a0bb7a22fa5b68a462c29509ecf96aee45ae95cbc2b431b9ca50cd9262adaac7a21420783a993c903e7b423f452fa2c42691a8f50a876a4a7734e051c4d94443369d4c7037db46f4e9782e51df045fa2ce14ae75c452ec77498050c58b4a1237daaf4fee6ff2190642902e9a33d1f59279f7edd39ae0daa10e5ac834c7ed88a899067b91e603f48ae1a552f05c51e472b501c","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547888150,"nbf":1547888150,"exp":1547892050,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547888150,"nbf":1547888150,"exp":1547892050,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547888150,"nbf":1547888150,"exp":1547892050,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODgxNTAsIm5iZiI6MTU0Nzg4ODE1MCwiZXhwIjoxNTQ3ODkyMDUwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.I1ic8DLDdpKUn1o_9g2-dXm69YEcBawa0KUdij3OD2FPQ65W0NPNtDFycMIU5VLHAmGFZC3ZYp9fSQBM6MyZVO8YOvr17P58_Rx_3y_j6LsOr586ZJhs2v9JZgBIRfp0l9zhj8-5MVjpgLxoTMkBzLAoIhvruMeNSGlkNUlqUyHLd-dlA5laeMGU2zLWRVL2E6PRhN4yRDBF0NvHdOrGUwmknIUHfl-WaeAmvDqqd9APXbxOpplQEd6fzVAz2IBjlsmY9_gXcw4L5dk4jhlqOxw3jPS7PfO-c7uDOb24vK7YH38zs0PRHrNO-s7dKGFVOmqFzklEzNKxzX67xn4spw","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODgxNTAsIm5iZiI6MTU0Nzg4ODE1MCwiZXhwIjoxNTQ3ODkyMDUwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.I1ic8DLDdpKUn1o_9g2-dXm69YEcBawa0KUdij3OD2FPQ65W0NPNtDFycMIU5VLHAmGFZC3ZYp9fSQBM6MyZVO8YOvr17P58_Rx_3y_j6LsOr586ZJhs2v9JZgBIRfp0l9zhj8-5MVjpgLxoTMkBzLAoIhvruMeNSGlkNUlqUyHLd-dlA5laeMGU2zLWRVL2E6PRhN4yRDBF0NvHdOrGUwmknIUHfl-WaeAmvDqqd9APXbxOpplQEd6fzVAz2IBjlsmY9_gXcw4L5dk4jhlqOxw3jPS7PfO-c7uDOb24vK7YH38zs0PRHrNO-s7dKGFVOmqFzklEzNKxzX67xn4spw","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-19T08:55:48.737Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-19T08:55:48.737Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-19T08:55:48.737Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-19T08:55:48.737Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 175,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 8052,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 59636674,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 8146,
           [Symbol(triggerId)]: 8052 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 cc 7e ba 02 44 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45776588,
     responseTo: 580,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-19T08:55:48.737Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 173,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 8044,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 59636675,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 8152,
           [Symbol(triggerId)]: 8044 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 cd 7e ba 02 46 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45776589,
     responseTo: 582,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-19T08:55:48.737Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:55:48.755Z|6929094e498377d56f9901ae54c8caff2e3ff7b71a54b70184a501682c609b8f3828ff1c787ff3aef3e44c3cb87f0b72187fbabe23d0fe19dc17bf3e9f540abd1f2ddeb9ccfb6898251dccd2fa6b28a39eff2a7f49d2095690e9029b3f4cbeea390a394c5d397294bc42c3babcad8bf7c7ef54d8f77b95bfd3fd69123f84b7485b884637bf7f6154cd1db81dc0ea5901f09508415c5001c17d56db65770456016978caca2bcb6012a401455af10af3c4200400d462cca57d6855ec26406d460828fe9f156590a6d6d03c5e7c1413725c6dbcad378eb62c929fbe441dbac0c754643a78fffdde809c87ae813099eee0f67d6e306f0afc2c29a092e2a100114c31
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-19T08:55:48.737Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:55:48.755Z|6929094e498377d56f9901ae54c8caff2e3ff7b71a54b70184a501682c609b8f3828ff1c787ff3aef3e44c3cb87f0b72187fbabe23d0fe19dc17bf3e9f540abd1f2ddeb9ccfb6898251dccd2fa6b28a39eff2a7f49d2095690e9029b3f4cbeea390a394c5d397294bc42c3babcad8bf7c7ef54d8f77b95bfd3fd69123f84b7485b884637bf7f6154cd1db81dc0ea5901f09508415c5001c17d56db65770456016978caca2bcb6012a401455af10af3c4200400d462cca57d6855ec26406d460828fe9f156590a6d6d03c5e7c1413725c6dbcad378eb62c929fbe441dbac0c754643a78fffdde809c87ae813099eee0f67d6e306f0afc2c29a092e2a100114c31","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:55:48.755Z|6929094e498377d56f9901ae54c8caff2e3ff7b71a54b70184a501682c609b8f3828ff1c787ff3aef3e44c3cb87f0b72187fbabe23d0fe19dc17bf3e9f540abd1f2ddeb9ccfb6898251dccd2fa6b28a39eff2a7f49d2095690e9029b3f4cbeea390a394c5d397294bc42c3babcad8bf7c7ef54d8f77b95bfd3fd69123f84b7485b884637bf7f6154cd1db81dc0ea5901f09508415c5001c17d56db65770456016978caca2bcb6012a401455af10af3c4200400d462cca57d6855ec26406d460828fe9f156590a6d6d03c5e7c1413725c6dbcad378eb62c929fbe441dbac0c754643a78fffdde809c87ae813099eee0f67d6e306f0afc2c29a092e2a100114c31\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T08:55:48.755Z|6929094e498377d56f9901ae54c8caff2e3ff7b71a54b70184a501682c609b8f3828ff1c787ff3aef3e44c3cb87f0b72187fbabe23d0fe19dc17bf3e9f540abd1f2ddeb9ccfb6898251dccd2fa6b28a39eff2a7f49d2095690e9029b3f4cbeea390a394c5d397294bc42c3babcad8bf7c7ef54d8f77b95bfd3fd69123f84b7485b884637bf7f6154cd1db81dc0ea5901f09508415c5001c17d56db65770456016978caca2bcb6012a401455af10af3c4200400d462cca57d6855ec26406d460828fe9f156590a6d6d03c5e7c1413725c6dbcad378eb62c929fbe441dbac0c754643a78fffdde809c87ae813099eee0f67d6e306f0afc2c29a092e2a100114c31","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547888777,"nbf":1547888777,"exp":1547892677,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547888777,"nbf":1547888777,"exp":1547892677,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547888777,"nbf":1547888777,"exp":1547892677,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODg3NzcsIm5iZiI6MTU0Nzg4ODc3NywiZXhwIjoxNTQ3ODkyNjc3LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.kHjro1jtQj8wdyymkRrS6yjkVwXhLlagmcKTFhs2tbEPgn3dn-cj9ydZXd2L-nzfyyF-k2bHT0Q7Sz3Xin6OiJlCyOlHmbMmWhkUTzEDaFU-bEvoilPVSv4gZECMNR-uDj2Y3CZq-mu9CsY0PkuUpMfQhwhSa_JyNe2BauP9tE1lVKVbnqFTLHgbj82HYCKitLLZrhiOv7lAlWNb192lEQThTTKYnJ6htcULLj1q0rRAJATOr4ykyr6-wpntWQw8ngjKstBczRWjT6geDOG1oih83ciukPzkvhI5a9wKQkAJrKN46UQ-vxH0Gssop6c4xrgE3BG9vLU_CrrTinVy9Q","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4ODg3NzcsIm5iZiI6MTU0Nzg4ODc3NywiZXhwIjoxNTQ3ODkyNjc3LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.kHjro1jtQj8wdyymkRrS6yjkVwXhLlagmcKTFhs2tbEPgn3dn-cj9ydZXd2L-nzfyyF-k2bHT0Q7Sz3Xin6OiJlCyOlHmbMmWhkUTzEDaFU-bEvoilPVSv4gZECMNR-uDj2Y3CZq-mu9CsY0PkuUpMfQhwhSa_JyNe2BauP9tE1lVKVbnqFTLHgbj82HYCKitLLZrhiOv7lAlWNb192lEQThTTKYnJ6htcULLj1q0rRAJATOr4ykyr6-wpntWQw8ngjKstBczRWjT6geDOG1oih83ciukPzkvhI5a9wKQkAJrKN46UQ-vxH0Gssop6c4xrgE3BG9vLU_CrrTinVy9Q","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-19T08:55:48.737Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-19T08:55:48.737Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-19T08:55:48.737Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 195,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 8909,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 60263617,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 9003,
           [Symbol(triggerId)]: 8909 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 15 e5 ba 02 89 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45802773,
     responseTo: 649,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 193,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 8901,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 60263618,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 9009,
           [Symbol(triggerId)]: 8901 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 16 e5 ba 02 88 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45802774,
     responseTo: 648,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T09:06:15.696Z|7e9d14536f37e7d2d10d7fda3979158e2700d69fbad775cbf6b03fbdfa080ad8faf074f0db5cadd726bfc06d0469d18799f359cddb753e8b4f0d775586f170d17d12def9e7e45d4b892f877916c3c5ccf39fc98e042dd8ffadb679871ef200a5633342071ec29f1d98e80254c1e7e9d66a2fdc4a265c1911eb54ed6261785a3c4848bcdf687b0b272702c2d94660bb65de99ec0ee1604e0834e9028d6ced1c0a486399720e49c6ad35cc61f77baf57c395697a12a7b1dd013a525c7aa0fae5c2e6b4c1d054feb8091543f2142a6b9e6da3b1ecf63d46584f9d130c8bde764aaf3d3e26b23bf3f527adbd5e965a3ee6f1220d64b95d195a6e305ec2f9ec63c267
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T09:06:15.696Z|7e9d14536f37e7d2d10d7fda3979158e2700d69fbad775cbf6b03fbdfa080ad8faf074f0db5cadd726bfc06d0469d18799f359cddb753e8b4f0d775586f170d17d12def9e7e45d4b892f877916c3c5ccf39fc98e042dd8ffadb679871ef200a5633342071ec29f1d98e80254c1e7e9d66a2fdc4a265c1911eb54ed6261785a3c4848bcdf687b0b272702c2d94660bb65de99ec0ee1604e0834e9028d6ced1c0a486399720e49c6ad35cc61f77baf57c395697a12a7b1dd013a525c7aa0fae5c2e6b4c1d054feb8091543f2142a6b9e6da3b1ecf63d46584f9d130c8bde764aaf3d3e26b23bf3f527adbd5e965a3ee6f1220d64b95d195a6e305ec2f9ec63c267","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T09:06:15.696Z|7e9d14536f37e7d2d10d7fda3979158e2700d69fbad775cbf6b03fbdfa080ad8faf074f0db5cadd726bfc06d0469d18799f359cddb753e8b4f0d775586f170d17d12def9e7e45d4b892f877916c3c5ccf39fc98e042dd8ffadb679871ef200a5633342071ec29f1d98e80254c1e7e9d66a2fdc4a265c1911eb54ed6261785a3c4848bcdf687b0b272702c2d94660bb65de99ec0ee1604e0834e9028d6ced1c0a486399720e49c6ad35cc61f77baf57c395697a12a7b1dd013a525c7aa0fae5c2e6b4c1d054feb8091543f2142a6b9e6da3b1ecf63d46584f9d130c8bde764aaf3d3e26b23bf3f527adbd5e965a3ee6f1220d64b95d195a6e305ec2f9ec63c267\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T09:06:15.696Z|7e9d14536f37e7d2d10d7fda3979158e2700d69fbad775cbf6b03fbdfa080ad8faf074f0db5cadd726bfc06d0469d18799f359cddb753e8b4f0d775586f170d17d12def9e7e45d4b892f877916c3c5ccf39fc98e042dd8ffadb679871ef200a5633342071ec29f1d98e80254c1e7e9d66a2fdc4a265c1911eb54ed6261785a3c4848bcdf687b0b272702c2d94660bb65de99ec0ee1604e0834e9028d6ced1c0a486399720e49c6ad35cc61f77baf57c395697a12a7b1dd013a525c7aa0fae5c2e6b4c1d054feb8091543f2142a6b9e6da3b1ecf63d46584f9d130c8bde764aaf3d3e26b23bf3f527adbd5e965a3ee6f1220d64b95d195a6e305ec2f9ec63c267","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547890268,"nbf":1547890268,"exp":1547894168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547890268,"nbf":1547890268,"exp":1547894168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547890268,"nbf":1547890268,"exp":1547894168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"73.225.99.122","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4OTAyNjgsIm5iZiI6MTU0Nzg5MDI2OCwiZXhwIjoxNTQ3ODk0MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.HB6lmo17uPhVDfspznllb9md3eGyXNptICcdKrs9tHC6f89aph9ThPur5ohUdo7NpiN0_Io0E75kCnbTdrp8ji7XRPk7ZZARsF893JdVGamtbQNH_STm86OHeZ_m_dRW5LH0DDcuMFAj9UZNzM54HuVFzuHnvm31Xbv1dX_ujnuAXmczzpmkNK005rEd-nS9HVQQ0srGkJ2ewWtcJZbsbyS9vwYiADu7CYNgV8FZsYqU8ZG7Wht0L3F6wt0RF0oLy1YrkaI8Y3xOVGd1rb4UNutprePzm5IHdQnmEUspxiI_cwB55FrGY_Nmc44ksxEkDo26BspMX8dUQKqGjf1yig","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc4OTAyNjgsIm5iZiI6MTU0Nzg5MDI2OCwiZXhwIjoxNTQ3ODk0MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.HB6lmo17uPhVDfspznllb9md3eGyXNptICcdKrs9tHC6f89aph9ThPur5ohUdo7NpiN0_Io0E75kCnbTdrp8ji7XRPk7ZZARsF893JdVGamtbQNH_STm86OHeZ_m_dRW5LH0DDcuMFAj9UZNzM54HuVFzuHnvm31Xbv1dX_ujnuAXmczzpmkNK005rEd-nS9HVQQ0srGkJ2ewWtcJZbsbyS9vwYiADu7CYNgV8FZsYqU8ZG7Wht0L3F6wt0RF0oLy1YrkaI8Y3xOVGd1rb4UNutprePzm5IHdQnmEUspxiI_cwB55FrGY_Nmc44ksxEkDo26BspMX8dUQKqGjf1yig","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-19T09:31:07.225Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-19T09:31:07.225Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-19T09:31:07.225Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-19T09:31:07.225Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 217,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 9921,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 61755166,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 10012,
           [Symbol(triggerId)]: 9921 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 9e d2 bb 02 d7 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45863582,
     responseTo: 727,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-19T09:31:07.225Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 219,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 9936,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 61755167,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 10031,
           [Symbol(triggerId)]: 9936 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 a0 d2 bb 02 d9 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 45863584,
     responseTo: 729,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-19T09:31:07.225Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T09:31:07.246Z|938d3362de3e2023a04cc10739a96cab772f525971b83898015a821229913a30b8d95737c8214013c20430795d64e6b72c63973144c7cde5d8a4b88af920b456da47e8bbefb12eef528a3095182271447e9e75b54d696ade6b2b7ed7bca20be1fb36e448f6409e8952861010a22dc02f755aa120575012bcdd292807a8d06b2bcaa99f546b3e4232c4fb50bd8b7ff97f33d75e2861e05ec1ae683685b48bde6903510393de2e741dd873df5150747ff14cf007b7bd8945339aa728c45d09d6ccd591490ccbc6b0a28dc634aad2c6ca113d263b878fc1a821fe67c5631c31fd7399c6dd686406195a995503953ad5d77c192332769a1dd3c692178830d4c7898f
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-19T09:31:07.225Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T09:31:07.246Z|938d3362de3e2023a04cc10739a96cab772f525971b83898015a821229913a30b8d95737c8214013c20430795d64e6b72c63973144c7cde5d8a4b88af920b456da47e8bbefb12eef528a3095182271447e9e75b54d696ade6b2b7ed7bca20be1fb36e448f6409e8952861010a22dc02f755aa120575012bcdd292807a8d06b2bcaa99f546b3e4232c4fb50bd8b7ff97f33d75e2861e05ec1ae683685b48bde6903510393de2e741dd873df5150747ff14cf007b7bd8945339aa728c45d09d6ccd591490ccbc6b0a28dc634aad2c6ca113d263b878fc1a821fe67c5631c31fd7399c6dd686406195a995503953ad5d77c192332769a1dd3c692178830d4c7898f","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T09:31:07.246Z|938d3362de3e2023a04cc10739a96cab772f525971b83898015a821229913a30b8d95737c8214013c20430795d64e6b72c63973144c7cde5d8a4b88af920b456da47e8bbefb12eef528a3095182271447e9e75b54d696ade6b2b7ed7bca20be1fb36e448f6409e8952861010a22dc02f755aa120575012bcdd292807a8d06b2bcaa99f546b3e4232c4fb50bd8b7ff97f33d75e2861e05ec1ae683685b48bde6903510393de2e741dd873df5150747ff14cf007b7bd8945339aa728c45d09d6ccd591490ccbc6b0a28dc634aad2c6ca113d263b878fc1a821fe67c5631c31fd7399c6dd686406195a995503953ad5d77c192332769a1dd3c692178830d4c7898f\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-29T09:31:07.246Z|938d3362de3e2023a04cc10739a96cab772f525971b83898015a821229913a30b8d95737c8214013c20430795d64e6b72c63973144c7cde5d8a4b88af920b456da47e8bbefb12eef528a3095182271447e9e75b54d696ade6b2b7ed7bca20be1fb36e448f6409e8952861010a22dc02f755aa120575012bcdd292807a8d06b2bcaa99f546b3e4232c4fb50bd8b7ff97f33d75e2861e05ec1ae683685b48bde6903510393de2e741dd873df5150747ff14cf007b7bd8945339aa728c45d09d6ccd591490ccbc6b0a28dc634aad2c6ca113d263b878fc1a821fe67c5631c31fd7399c6dd686406195a995503953ad5d77c192332769a1dd3c692178830d4c7898f","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
action: http-error  tenantId: 404  unique_name: POST /sdk [Host|116.196.119.15:1337|Content-Length|441|Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1547905064 [Host|116.196.119.15:1337|Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1547905065 [Host|116.196.119.15:1337|Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /evox/about [Host|116.196.119.15:1337|Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /HNAP1 [Host|116.196.119.15:1337|Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: POST /sdk [Host|116.196.119.15:1337|Connection|close|Content-Length|441|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1547927280 [Host|116.196.119.15:1337|Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /HNAP1 [Host|116.196.119.15:1337|Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /evox/about [Host|116.196.119.15:1337|Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: POST /sdk [Content-Length|441|Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1547949843 [Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /evox/about [Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /HNAP1 [Connection|close|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: POST /sdk [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337|Content-Length|441|Connection|close] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1547993259 [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337|Connection|close] details: {}
action: http-error  tenantId: 404  unique_name: GET /evox/about [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337|Connection|close] details: {}
action: http-error  tenantId: 404  unique_name: GET /HNAP1 [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Host|116.196.119.15:1337|Connection|close] details: {}
进入eula方法
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----user{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":""}
action: eula  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"291","build":"10506000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}
eeeewwwwww
updateEula-------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":""}
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  unique_name: 'test190117',
  acceptedEula: true }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 235,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 11298,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 206828025,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 11348,
           [Symbol(triggerId)]: 11298 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 50 b1 01 03 0e 03 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 50442576,
     responseTo: 782,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","build":"10506000","clientVersion":"291","displayVersion":"1.5.6","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
userEntity------{"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
-----getUserRoleRisky----2222222
rolestudent
isExistingUser111
updateExistingUser1111
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-21T01:49:04.247Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-21T01:49:04.247Z,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser2222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-21T01:49:04.247Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-21T01:49:04.247Z,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 253,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 12058,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 206832185,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 12149,
           [Symbol(triggerId)]: 12058 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 9f b1 01 03 4d 03 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 50442655,
     responseTo: 845,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-21T01:49:04.247Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 255,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 12078,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 206832186,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 12180,
           [Symbol(triggerId)]: 12078 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 a0 b1 01 03 51 03 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 50442656,
     responseTo: 849,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-21T01:49:04.247Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-31T01:49:04.265Z|4ce2a66def9d1b89e1831cf3ecc5c357a7bea90ae30ff5c1b43b3ecc6234c0cadbc17dd05a13ee91e38503b970dacc773f5f23d41cc37a29152a1dd0e8f340195f890f41e97951bb30316328b77230c03d45fdc0daf8241be069fc046dd7d43ec64bdc31d0026d65b933437e36b304c327f08f8690c76a1d9ba7678ca3da8b5045272ae2fbdcf4cf3fe82f3c698f94a870b86e39e2125639ba67e19acdf02858c1089f31dbab723dd4da0df6ae728fbccfb648423443b22608766d3f8ceb5cddaddeeb40d4ad27a2da7c639550a043389ffdf4da5ac1ee518a7f282f478b362e7f64cfe3e5fbb72d8ef3b0d69e6ee99145d29f8545e09391c876f5bc206a7bf7
user--------111{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-21T01:49:04.247Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}
userid--------111"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-31T01:49:04.265Z|4ce2a66def9d1b89e1831cf3ecc5c357a7bea90ae30ff5c1b43b3ecc6234c0cadbc17dd05a13ee91e38503b970dacc773f5f23d41cc37a29152a1dd0e8f340195f890f41e97951bb30316328b77230c03d45fdc0daf8241be069fc046dd7d43ec64bdc31d0026d65b933437e36b304c327f08f8690c76a1d9ba7678ca3da8b5045272ae2fbdcf4cf3fe82f3c698f94a870b86e39e2125639ba67e19acdf02858c1089f31dbab723dd4da0df6ae728fbccfb648423443b22608766d3f8ceb5cddaddeeb40d4ad27a2da7c639550a043389ffdf4da5ac1ee518a7f282f478b362e7f64cfe3e5fbb72d8ef3b0d69e6ee99145d29f8545e09391c876f5bc206a7bf7","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-31T01:49:04.265Z|4ce2a66def9d1b89e1831cf3ecc5c357a7bea90ae30ff5c1b43b3ecc6234c0cadbc17dd05a13ee91e38503b970dacc773f5f23d41cc37a29152a1dd0e8f340195f890f41e97951bb30316328b77230c03d45fdc0daf8241be069fc046dd7d43ec64bdc31d0026d65b933437e36b304c327f08f8690c76a1d9ba7678ca3da8b5045272ae2fbdcf4cf3fe82f3c698f94a870b86e39e2125639ba67e19acdf02858c1089f31dbab723dd4da0df6ae728fbccfb648423443b22608766d3f8ceb5cddaddeeb40d4ad27a2da7c639550a043389ffdf4da5ac1ee518a7f282f478b362e7f64cfe3e5fbb72d8ef3b0d69e6ee99145d29f8545e09391c876f5bc206a7bf7\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-31T01:49:04.265Z|4ce2a66def9d1b89e1831cf3ecc5c357a7bea90ae30ff5c1b43b3ecc6234c0cadbc17dd05a13ee91e38503b970dacc773f5f23d41cc37a29152a1dd0e8f340195f890f41e97951bb30316328b77230c03d45fdc0daf8241be069fc046dd7d43ec64bdc31d0026d65b933437e36b304c327f08f8690c76a1d9ba7678ca3da8b5045272ae2fbdcf4cf3fe82f3c698f94a870b86e39e2125639ba67e19acdf02858c1089f31dbab723dd4da0df6ae728fbccfb648423443b22608766d3f8ceb5cddaddeeb40d4ad27a2da7c639550a043389ffdf4da5ac1ee518a7f282f478b362e7f64cfe3e5fbb72d8ef3b0d69e6ee99145d29f8545e09391c876f5bc206a7bf7","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
base64Decoded========{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547653456,"exp":1547653460,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888","user_name":"lancer88888","full_name":"lancer88888","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"red"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-19T09:31:07.225Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  skin: 'red' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 271,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 12848,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 206838646,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 12898,
           [Symbol(triggerId)]: 12848 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 fd b1 01 03 86 03 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 50442749,
     responseTo: 902,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg","build":"10506000","clientVersion":"291","displayVersion":"1.5.6","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-19T09:31:07.225Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-19T09:31:07.225Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-19T09:31:07.225Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 287,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 13423,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 206842421,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 13517,
           [Symbol(triggerId)]: 13423 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 50 b2 01 03 bc 03 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 50442832,
     responseTo: 956,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 285,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 13415,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 206842422,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 13523,
           [Symbol(triggerId)]: 13415 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 51 b2 01 03 bb 03 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 50442833,
     responseTo: 955,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-31T01:49:14.501Z|500df9f6366d7dee07b6048324c1bfd42062d499380cb9278834de4c280a79ebf541d37a2e2e0b2e2de1bdd6a6e968fd81e90923bec0fc8f816dc6a7983558cefb0e143f5348bab224ea2c59eb8c6383f7e906989b63127dc45a5da96da9d841aac81a4daf986a4707683ef4669a4c26a35eb4cbc411aed6b444748bc16c6f7193683af6e9961eafe2cd21663436f0996f814942fb70d109931454727f8036317bc12d70b04893465c21e2f457094c86cd0872451ddfe412b91d616854edcf0b39f09e9c63a8f8088703230abae02d61f4fd4eae0f57b67dfe2b0a24252b07d90e944c8b0eafd06e45883af07493045a5a9c63a3ee70c4c0ec32303c02ff61fa
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-31T01:49:14.501Z|500df9f6366d7dee07b6048324c1bfd42062d499380cb9278834de4c280a79ebf541d37a2e2e0b2e2de1bdd6a6e968fd81e90923bec0fc8f816dc6a7983558cefb0e143f5348bab224ea2c59eb8c6383f7e906989b63127dc45a5da96da9d841aac81a4daf986a4707683ef4669a4c26a35eb4cbc411aed6b444748bc16c6f7193683af6e9961eafe2cd21663436f0996f814942fb70d109931454727f8036317bc12d70b04893465c21e2f457094c86cd0872451ddfe412b91d616854edcf0b39f09e9c63a8f8088703230abae02d61f4fd4eae0f57b67dfe2b0a24252b07d90e944c8b0eafd06e45883af07493045a5a9c63a3ee70c4c0ec32303c02ff61fa","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-31T01:49:14.501Z|500df9f6366d7dee07b6048324c1bfd42062d499380cb9278834de4c280a79ebf541d37a2e2e0b2e2de1bdd6a6e968fd81e90923bec0fc8f816dc6a7983558cefb0e143f5348bab224ea2c59eb8c6383f7e906989b63127dc45a5da96da9d841aac81a4daf986a4707683ef4669a4c26a35eb4cbc411aed6b444748bc16c6f7193683af6e9961eafe2cd21663436f0996f814942fb70d109931454727f8036317bc12d70b04893465c21e2f457094c86cd0872451ddfe412b91d616854edcf0b39f09e9c63a8f8088703230abae02d61f4fd4eae0f57b67dfe2b0a24252b07d90e944c8b0eafd06e45883af07493045a5a9c63a3ee70c4c0ec32303c02ff61fa\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-01-31T01:49:14.501Z|500df9f6366d7dee07b6048324c1bfd42062d499380cb9278834de4c280a79ebf541d37a2e2e0b2e2de1bdd6a6e968fd81e90923bec0fc8f816dc6a7983558cefb0e143f5348bab224ea2c59eb8c6383f7e906989b63127dc45a5da96da9d841aac81a4daf986a4707683ef4669a4c26a35eb4cbc411aed6b444748bc16c6f7193683af6e9961eafe2cd21663436f0996f814942fb70d109931454727f8036317bc12d70b04893465c21e2f457094c86cd0872451ddfe412b91d616854edcf0b39f09e9c63a8f8088703230abae02d61f4fd4eae0f57b67dfe2b0a24252b07d90e944c8b0eafd06e45883af07493045a5a9c63a3ee70c4c0ec32303c02ff61fa","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
进入getuserguid方法
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"asdasdasdassd"}
eeeewwwwww
registerUserGuid----"asdasdasdassd"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"asdasdasdassd"}
eeeewwwwww
连接数据库成功
queryUserRole连接成功
queryUserRole连接成功"student"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
连接数据库成功
action: getUserInfo  tenantId:   unique_name:  details: {"message":"lancer88888"}
eeeewwwwww
连接数据库成功
看一下这个data：{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
action: deleteUser  tenantId:   unique_name:  details: {"message":"lancer88888"}
eeeewwwwww
连接数据库成功
看一下这个data：{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}

action: setTrialCounts  tenantId:   unique_name:  details: {"id":"lancer88888","trialsAllowed":"22","trialsUsed":"3"}
eeeewwwwww
连接数据库成功
看一下这个data：{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
进入user
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  trialsAllowed: 22,
  trialsUsed: 3 }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 347,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 15954,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 206868377,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 16003,
           [Symbol(triggerId)]: 15954 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 b9 b3 01 03 7c 04 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 50443193,
     responseTo: 1148,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
进入getuserguid方法
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"asdasdasdassd"}
eeeewwwwww
registerUserGuid----"asdasdasdassd"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"asdasdasdassd"}
eeeewwwwww
连接数据库成功
queryUserRole连接成功
连接数据库成功
queryUserRole连接成功"student"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
action: http-error  tenantId: 404  unique_name: POST /sdk [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Connection|close|Host|116.196.119.15:1337|Content-Length|441] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1548035719 [Connection|close|Host|116.196.119.15:1337|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /HNAP1 [Connection|close|Host|116.196.119.15:1337|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /evox/about [Connection|close|Host|116.196.119.15:1337|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: POST /sdk [Content-Length|441|Connection|close|Host|116.196.119.15:1337|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1548057406 [Connection|close|Host|116.196.119.15:1337|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /HNAP1 [Connection|close|Host|116.196.119.15:1337|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /evox/about [Connection|close|Host|116.196.119.15:1337|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)] details: {}
action: http-error  tenantId: 404  unique_name: GET /skin [Accept|text/html, application/xhtml+xml, */*|Accept-Encoding|gzip, deflate|Accept-Language|zh-CN|Host|116.196.119.15:1337|Connection|Keep-Alive|User-Agent|Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0) Core/1.63.6788.400 QQBrowser/10.3.2767.400] details: {}
action: http-error  tenantId: 404  unique_name: GET /favicon.ico [Host|116.196.119.15:1337|Connection|keep-alive|User-Agent|Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36|Accept|image/webp,image/apng,image/*,*/*;q=0.8|Referer|http://116.196.119.15:1337/|Accept-Encoding|gzip, deflate|Accept-Language|zh-CN,zh;q=0.9] details: {}
base64Decoded========{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}
解码后user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
fromToken----user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
identity-----{"iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"exp":1547424634,"tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","unique_name":"stu15@usmie.com","user_name":"stu15@usmie.com","full_name":"ブラック フラグ","identity_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA"}
action: skin  tenantId: Expired identity token  unique_name:  details: {"clientVersion":"150","build":"10027000","identityToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
连接数据库成功
action: http-error  tenantId: 404  unique_name: GET /skin [User-Agent|Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36|Accept|*/*|Referer|blank|Accept-Language|zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.4|Host|116.196.119.15:1337|Connection|keep-alive] details: {}
base64Decoded========{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}
解码后user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
fromToken----user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
identity-----{"iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"exp":1547424634,"tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","unique_name":"stu15@usmie.com","user_name":"stu15@usmie.com","full_name":"ブラック フラグ","identity_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA"}
action: skin  tenantId: Expired identity token  unique_name:  details: {"clientVersion":"150","build":"10027000","identityToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
连接数据库成功
进入eula方法
base64Decoded========{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}
解码后user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
fromToken----user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
action: /eula  tenantId: #error  unique_name: Expired identity token. Issued: 2019-01-13T23:05:34.000Z Expires: 2019-01-21T00:10:34.000Z details: {"clientVersion":"150","build":"10027000","identityToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA"}
eeeewwwwww
连接数据库成功
进入getuserguid方法
base64Decoded========{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}
解码后user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
fromToken----user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
action: /getuserguid  tenantId: #error  unique_name: Expired identity token. Issued: 2019-01-13T23:05:34.000Z Expires: 2019-01-21T00:10:34.000Z details: {"clientVersion":"150","build":"10027000","identityToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA","accessToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA","ipAddress":"asdasdasdassd"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","build":"11000000","clientVersion":"342","displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-21T01:49:04.247Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
userEntity------{"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-21T01:49:04.247Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-21T01:49:04.247Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser111
updateExistingUser1111
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser2222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 401,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 177670,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 230167004,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 177786,
           [Symbol(triggerId)]: 177670 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 c0 d1 04 03 ea 4d 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 50647488,
     responseTo: 19946,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 403,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 177695,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 230167005,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 177792,
           [Symbol(triggerId)]: 177695 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 c2 d1 04 03 ed 4d 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 50647490,
     responseTo: 19949,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-31T08:17:59.086Z|953c6860e83741fc513d6d17e264918bbab8c0a2336f7ae0a40103a08bd39c7857b40cc6a14e6f91029aa39072a618749c1d658453e804f9daf766b748dd78f96daac8be40a5395f1d4a0f63356b5750693f3b42f34b567ddf09daafc47d88560fb0d2fed4bcd29d7bee9c3abe3da75b846842326d9f396e8c663997c11bcce032f6fe404c10e93dc9dbd03678cddb561b3e56dcd9c692e3a8f5f9bd5d66338df66adc323a009194e598c7ae50afb98705b154ffc6ffa3c7ff571c75d648ae488292bc8036f9d96d78721b4267a84684434b7e389544b3e8fa3507ca2af5b56d518c2268978d643a40f63879047cfa7e34d6fc8086573ee855b8ff8535ddd45c
user--------111{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}
userid--------111"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-31T08:17:59.086Z|953c6860e83741fc513d6d17e264918bbab8c0a2336f7ae0a40103a08bd39c7857b40cc6a14e6f91029aa39072a618749c1d658453e804f9daf766b748dd78f96daac8be40a5395f1d4a0f63356b5750693f3b42f34b567ddf09daafc47d88560fb0d2fed4bcd29d7bee9c3abe3da75b846842326d9f396e8c663997c11bcce032f6fe404c10e93dc9dbd03678cddb561b3e56dcd9c692e3a8f5f9bd5d66338df66adc323a009194e598c7ae50afb98705b154ffc6ffa3c7ff571c75d648ae488292bc8036f9d96d78721b4267a84684434b7e389544b3e8fa3507ca2af5b56d518c2268978d643a40f63879047cfa7e34d6fc8086573ee855b8ff8535ddd45c","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-31T08:17:59.086Z|953c6860e83741fc513d6d17e264918bbab8c0a2336f7ae0a40103a08bd39c7857b40cc6a14e6f91029aa39072a618749c1d658453e804f9daf766b748dd78f96daac8be40a5395f1d4a0f63356b5750693f3b42f34b567ddf09daafc47d88560fb0d2fed4bcd29d7bee9c3abe3da75b846842326d9f396e8c663997c11bcce032f6fe404c10e93dc9dbd03678cddb561b3e56dcd9c692e3a8f5f9bd5d66338df66adc323a009194e598c7ae50afb98705b154ffc6ffa3c7ff571c75d648ae488292bc8036f9d96d78721b4267a84684434b7e389544b3e8fa3507ca2af5b56d518c2268978d643a40f63879047cfa7e34d6fc8086573ee855b8ff8535ddd45c\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-01-31T08:17:59.086Z|953c6860e83741fc513d6d17e264918bbab8c0a2336f7ae0a40103a08bd39c7857b40cc6a14e6f91029aa39072a618749c1d658453e804f9daf766b748dd78f96daac8be40a5395f1d4a0f63356b5750693f3b42f34b567ddf09daafc47d88560fb0d2fed4bcd29d7bee9c3abe3da75b846842326d9f396e8c663997c11bcce032f6fe404c10e93dc9dbd03678cddb561b3e56dcd9c692e3a8f5f9bd5d66338df66adc323a009194e598c7ae50afb98705b154ffc6ffa3c7ff571c75d648ae488292bc8036f9d96d78721b4267a84684434b7e389544b3e8fa3507ca2af5b56d518c2268978d643a40f63879047cfa7e34d6fc8086573ee855b8ff8535ddd45c","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
action: setTrialCounts  tenantId:   unique_name:  details: {"id":"stu13@usmie.com","trialsAllowed":"24","trialsUsed":"3"}
eeeewwwwww
连接数据库成功
看一下这个data：undefined
base64Decoded========{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}
解码后user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
fromToken----user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
identity-----{"iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"exp":1547424634,"tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","unique_name":"stu15@usmie.com","user_name":"stu15@usmie.com","full_name":"ブラック フラグ","identity_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA"}
action: skin  tenantId: Expired identity token  unique_name:  details: {"clientVersion":"150","build":"10027000","identityToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
连接数据库成功
进入eula方法
base64Decoded========{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}
解码后user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
fromToken----user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
action: /eula  tenantId: #error  unique_name: Expired identity token. Issued: 2019-01-13T23:05:34.000Z Expires: 2019-01-21T00:10:34.000Z details: {"clientVersion":"150","build":"10027000","identityToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA"}
eeeewwwwww
连接数据库成功
action: http-error  tenantId: 404  unique_name: POST /sdk [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Content-Length|441|Connection|close|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1548078982 [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Connection|close|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /HNAP1 [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Connection|close|Host|116.196.119.15:1337] details: {}
action: http-error  tenantId: 404  unique_name: GET /evox/about [User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Connection|close|Host|116.196.119.15:1337] details: {}
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","build":"10506000","clientVersion":"291","displayVersion":"1.5.6","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
userEntity------{"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
-----getUserRoleRisky----2222222
rolestudent
isExistingUser111
updateExistingUser1111
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T01:22:22.396Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T01:22:22.396Z,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser2222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T01:22:22.396Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T01:22:22.396Z,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser3333
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 441,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 702930,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 291630331,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 703004,
           [Symbol(triggerId)]: 702930 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 aa 1c 0d 03 02 3e 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51190954,
     responseTo: 81410,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T01:22:22.396Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 443,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 702955,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 291630332,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 703058,
           [Symbol(triggerId)]: 702955 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 af 1c 0d 03 07 3e 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51190959,
     responseTo: 81415,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T01:22:22.396Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T01:22:22.411Z|7e916fb33b024139b58e9e86ad8c53ba8b3fd017a5b4c48d5991da37f59b5a1844fe8a6ac78bd9c72fe674439f0bd0ef0688a2a2b3f2b5f5885f887ed1190ceb8be1d4113bd644a4178ec780578c800146fd874219a337ceb3d066ef8db6b0b7b388a0e1862cb4c695d3a64f5f4d7682a6ff08c9e6958826d4a06f3414d47dfae0aae7b7f1321f449d520fdd85f13fbfd465610a9d67b50c54694ff1d446bb2c066028444e19f39e2cc4c0d36293d315b11a571828ce94b538b1aac407307e41ada1e79452236a31ba73272fa9510d75f83761f0b637f667242d86b51ec35f8d4b7dead1c5369bed8d8bdc097f22344954bacb6e9ed790e50e65bef2385d4513
user--------111{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T01:22:22.396Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}
userid--------111"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T01:22:22.411Z|7e916fb33b024139b58e9e86ad8c53ba8b3fd017a5b4c48d5991da37f59b5a1844fe8a6ac78bd9c72fe674439f0bd0ef0688a2a2b3f2b5f5885f887ed1190ceb8be1d4113bd644a4178ec780578c800146fd874219a337ceb3d066ef8db6b0b7b388a0e1862cb4c695d3a64f5f4d7682a6ff08c9e6958826d4a06f3414d47dfae0aae7b7f1321f449d520fdd85f13fbfd465610a9d67b50c54694ff1d446bb2c066028444e19f39e2cc4c0d36293d315b11a571828ce94b538b1aac407307e41ada1e79452236a31ba73272fa9510d75f83761f0b637f667242d86b51ec35f8d4b7dead1c5369bed8d8bdc097f22344954bacb6e9ed790e50e65bef2385d4513","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T01:22:22.411Z|7e916fb33b024139b58e9e86ad8c53ba8b3fd017a5b4c48d5991da37f59b5a1844fe8a6ac78bd9c72fe674439f0bd0ef0688a2a2b3f2b5f5885f887ed1190ceb8be1d4113bd644a4178ec780578c800146fd874219a337ceb3d066ef8db6b0b7b388a0e1862cb4c695d3a64f5f4d7682a6ff08c9e6958826d4a06f3414d47dfae0aae7b7f1321f449d520fdd85f13fbfd465610a9d67b50c54694ff1d446bb2c066028444e19f39e2cc4c0d36293d315b11a571828ce94b538b1aac407307e41ada1e79452236a31ba73272fa9510d75f83761f0b637f667242d86b51ec35f8d4b7dead1c5369bed8d8bdc097f22344954bacb6e9ed790e50e65bef2385d4513\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T01:22:22.411Z|7e916fb33b024139b58e9e86ad8c53ba8b3fd017a5b4c48d5991da37f59b5a1844fe8a6ac78bd9c72fe674439f0bd0ef0688a2a2b3f2b5f5885f887ed1190ceb8be1d4113bd644a4178ec780578c800146fd874219a337ceb3d066ef8db6b0b7b388a0e1862cb4c695d3a64f5f4d7682a6ff08c9e6958826d4a06f3414d47dfae0aae7b7f1321f449d520fdd85f13fbfd465610a9d67b50c54694ff1d446bb2c066028444e19f39e2cc4c0d36293d315b11a571828ce94b538b1aac407307e41ada1e79452236a31ba73272fa9510d75f83761f0b637f667242d86b51ec35f8d4b7dead1c5369bed8d8bdc097f22344954bacb6e9ed790e50e65bef2385d4513","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","build":"10506000","clientVersion":"291","displayVersion":"1.5.6","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T01:22:22.396Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
userEntity------{"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T01:22:22.396Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T01:22:22.396Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser111
updateExistingUser1111
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser2222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 461,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 716686,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 293140892,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 716793,
           [Symbol(triggerId)]: 716686 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 02 53 0d 03 30 44 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51204866,
     responseTo: 82992,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 463,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 716694,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 293140893,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 716763,
           [Symbol(triggerId)]: 716694 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 06 53 0d 03 2f 44 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51204870,
     responseTo: 82991,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T01:47:32.972Z|7d3866e54be75a9a285fb195c75ff12c159db7a33070f4685e97c7462803c982fd35fca99e435d0e1eef147df23dbe7c136ac143c2b5aa250cb4fc0a1c5d6dc7770db1db31eacfa72be5e6bed010d09ad9ce24bc322564cda81131db50e9fb34d09bca4740325f91b1b5f7653d765aca70dc94947c1f6e23e31bc62528d3e00feaa89325214ebc13150844d660249720c54783c3dc2a569820f75c7e467b490156582a9d630b14245be311e3673c54a164bbec70dc6c304ae9f7687d28e7d3efb476d496c21beba66c488f87c921979f72209c55a34161aca78d89c924c74fa8c8aafdcbb8fbcdc8e9a11bced22c299f73de349236385521805eb58e1a175b0d
user--------111{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}
userid--------111"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T01:47:32.972Z|7d3866e54be75a9a285fb195c75ff12c159db7a33070f4685e97c7462803c982fd35fca99e435d0e1eef147df23dbe7c136ac143c2b5aa250cb4fc0a1c5d6dc7770db1db31eacfa72be5e6bed010d09ad9ce24bc322564cda81131db50e9fb34d09bca4740325f91b1b5f7653d765aca70dc94947c1f6e23e31bc62528d3e00feaa89325214ebc13150844d660249720c54783c3dc2a569820f75c7e467b490156582a9d630b14245be311e3673c54a164bbec70dc6c304ae9f7687d28e7d3efb476d496c21beba66c488f87c921979f72209c55a34161aca78d89c924c74fa8c8aafdcbb8fbcdc8e9a11bced22c299f73de349236385521805eb58e1a175b0d","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T01:47:32.972Z|7d3866e54be75a9a285fb195c75ff12c159db7a33070f4685e97c7462803c982fd35fca99e435d0e1eef147df23dbe7c136ac143c2b5aa250cb4fc0a1c5d6dc7770db1db31eacfa72be5e6bed010d09ad9ce24bc322564cda81131db50e9fb34d09bca4740325f91b1b5f7653d765aca70dc94947c1f6e23e31bc62528d3e00feaa89325214ebc13150844d660249720c54783c3dc2a569820f75c7e467b490156582a9d630b14245be311e3673c54a164bbec70dc6c304ae9f7687d28e7d3efb476d496c21beba66c488f87c921979f72209c55a34161aca78d89c924c74fa8c8aafdcbb8fbcdc8e9a11bced22c299f73de349236385521805eb58e1a175b0d\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T01:47:32.972Z|7d3866e54be75a9a285fb195c75ff12c159db7a33070f4685e97c7462803c982fd35fca99e435d0e1eef147df23dbe7c136ac143c2b5aa250cb4fc0a1c5d6dc7770db1db31eacfa72be5e6bed010d09ad9ce24bc322564cda81131db50e9fb34d09bca4740325f91b1b5f7653d765aca70dc94947c1f6e23e31bc62528d3e00feaa89325214ebc13150844d660249720c54783c3dc2a569820f75c7e467b490156582a9d630b14245be311e3673c54a164bbec70dc6c304ae9f7687d28e7d3efb476d496c21beba66c488f87c921979f72209c55a34161aca78d89c924c74fa8c8aafdcbb8fbcdc8e9a11bced22c299f73de349236385521805eb58e1a175b0d","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
action: server-signin-invalid  tenantId: Invalid post data - no body and client version  unique_name:  details: {"unique_name":"test190117","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548121933,"nbf":1548121933,"exp":1548125833,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548121933,"nbf":1548121933,"exp":1548125833,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548121933,"nbf":1548121933,"exp":1548125833,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjE5MzMsIm5iZiI6MTU0ODEyMTkzMywiZXhwIjoxNTQ4MTI1ODMzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMy4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.mPJo0ZqWffCFiHGIblrz4ZvP34vylXTM-Momuqk96iheNJbSK5lt6PCEYAY8RAN7WUZtrsnsxT6Fz4EYwYFXaUlwl3uYNcTqG0V4HGja1i7CDeNFYYGLf_iMc05svlVrsu5A5Sl8lyVeKSqknSJPIZrvDhTpU6sGwNa7bUzeo5CWocCbjsHRLpCBIfvoMulTHdMgT8UrtQnhtZbW6bsLooImhVAPKVD3Ssw--7KpMjHJ4JBEv06yFLcOfGHvXOrxeU2WthbcXD0McwOAho5cTmzlBAgd3sRhxwAD8mTrij_UP6iC8ziVC8uVlwtQyydQ5bQyy0cje-fLvrsiQc6NWg","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjE5MzMsIm5iZiI6MTU0ODEyMTkzMywiZXhwIjoxNTQ4MTI1ODMzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMy4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.mPJo0ZqWffCFiHGIblrz4ZvP34vylXTM-Momuqk96iheNJbSK5lt6PCEYAY8RAN7WUZtrsnsxT6Fz4EYwYFXaUlwl3uYNcTqG0V4HGja1i7CDeNFYYGLf_iMc05svlVrsu5A5Sl8lyVeKSqknSJPIZrvDhTpU6sGwNa7bUzeo5CWocCbjsHRLpCBIfvoMulTHdMgT8UrtQnhtZbW6bsLooImhVAPKVD3Ssw--7KpMjHJ4JBEv06yFLcOfGHvXOrxeU2WthbcXD0McwOAho5cTmzlBAgd3sRhxwAD8mTrij_UP6iC8ziVC8uVlwtQyydQ5bQyy0cje-fLvrsiQc6NWg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T01:52:11.158Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T01:52:11.158Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T01:52:11.158Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T01:52:11.158Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 489,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 720262,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 293419107,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 720363,
           [Symbol(triggerId)]: 720262 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 6c 5d 0d 03 a4 45 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51207532,
     responseTo: 83364,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T01:52:11.158Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 491,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 720270,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 293419107,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 720369,
           [Symbol(triggerId)]: 720270 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 6d 5d 0d 03 a5 45 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51207533,
     responseTo: 83365,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T01:52:11.158Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T01:52:11.185Z|5fe17326a883ff0c4a967e3806e05b3f4808b08e64bdadd3c307d654cb37f942ab14ebeeafb34d2a82cea7f05d65fdb2675d865cc3abb8f77ebfe88484e78436866df67b839170b274b127cbbddf9164fe2f954ce6cf9b7baa7f9840ed1e5838d411398ec53850585ac42c3b53938b62dd1b6d73d96984817c6d0b82ba6e8c93261d24b5b475480facbaa8281ad393406c55f4bc5360bae39b485bd19feeb823f0a715b728ab0746aadff1cd0d1238f4337a47533444afaed5fc7c430ba83bfe6bb3b671c6e8b7c3c0e7b92848027810dc2c3a076c0f1d091fc379667feba9d6df8b9f042abce170d1d6e5e29fed35120ee097fc0b90c757ff8cc4ccbeba4662
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T01:52:11.158Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T01:52:11.185Z|5fe17326a883ff0c4a967e3806e05b3f4808b08e64bdadd3c307d654cb37f942ab14ebeeafb34d2a82cea7f05d65fdb2675d865cc3abb8f77ebfe88484e78436866df67b839170b274b127cbbddf9164fe2f954ce6cf9b7baa7f9840ed1e5838d411398ec53850585ac42c3b53938b62dd1b6d73d96984817c6d0b82ba6e8c93261d24b5b475480facbaa8281ad393406c55f4bc5360bae39b485bd19feeb823f0a715b728ab0746aadff1cd0d1238f4337a47533444afaed5fc7c430ba83bfe6bb3b671c6e8b7c3c0e7b92848027810dc2c3a076c0f1d091fc379667feba9d6df8b9f042abce170d1d6e5e29fed35120ee097fc0b90c757ff8cc4ccbeba4662","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T01:52:11.185Z|5fe17326a883ff0c4a967e3806e05b3f4808b08e64bdadd3c307d654cb37f942ab14ebeeafb34d2a82cea7f05d65fdb2675d865cc3abb8f77ebfe88484e78436866df67b839170b274b127cbbddf9164fe2f954ce6cf9b7baa7f9840ed1e5838d411398ec53850585ac42c3b53938b62dd1b6d73d96984817c6d0b82ba6e8c93261d24b5b475480facbaa8281ad393406c55f4bc5360bae39b485bd19feeb823f0a715b728ab0746aadff1cd0d1238f4337a47533444afaed5fc7c430ba83bfe6bb3b671c6e8b7c3c0e7b92848027810dc2c3a076c0f1d091fc379667feba9d6df8b9f042abce170d1d6e5e29fed35120ee097fc0b90c757ff8cc4ccbeba4662\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T01:52:11.185Z|5fe17326a883ff0c4a967e3806e05b3f4808b08e64bdadd3c307d654cb37f942ab14ebeeafb34d2a82cea7f05d65fdb2675d865cc3abb8f77ebfe88484e78436866df67b839170b274b127cbbddf9164fe2f954ce6cf9b7baa7f9840ed1e5838d411398ec53850585ac42c3b53938b62dd1b6d73d96984817c6d0b82ba6e8c93261d24b5b475480facbaa8281ad393406c55f4bc5360bae39b485bd19feeb823f0a715b728ab0746aadff1cd0d1238f4337a47533444afaed5fc7c430ba83bfe6bb3b671c6e8b7c3c0e7b92848027810dc2c3a076c0f1d091fc379667feba9d6df8b9f042abce170d1d6e5e29fed35120ee097fc0b90c757ff8cc4ccbeba4662","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
action: server-signin-invalid  tenantId: Invalid post data - no body and client version  unique_name:  details: {"unique_name":"test190117","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548122025,"nbf":1548122025,"exp":1548125925,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548122025,"nbf":1548122025,"exp":1548125925,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548122025,"nbf":1548122025,"exp":1548125925,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjIwMjUsIm5iZiI6MTU0ODEyMjAyNSwiZXhwIjoxNTQ4MTI1OTI1LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.F_STlOPuHm1oHIhZzQZPkxTkkw2i4WeW6T906tacCpY0HJk3m2ktMI1tWUygNuQ_3XEkJ-gl5ol9br1lgwAz8ZJgSfel4CbtXk3w_g6utQsZqpggXfFqyQsTy0gaQqVyTQAH4jTNxXalWOdibLT79yWKDIS16f-vOnKB_y_dMfNozvm_ipqrJGCoqby55PN-s4nydY1IeAiyntWW6Po3xnT46pgJRhfFV3Ih-W9200e5otcs-lXLu1TJVeKQJ8m8PEDFcgqrxScd4AZM28uDz0Y_1BrUWGSuXYPeIA2FZlDl9VRTKBSvO-BR1zfr2iN9S6bOSF9PjUXM3oxrWQrVKQ","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjIwMjUsIm5iZiI6MTU0ODEyMjAyNSwiZXhwIjoxNTQ4MTI1OTI1LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.F_STlOPuHm1oHIhZzQZPkxTkkw2i4WeW6T906tacCpY0HJk3m2ktMI1tWUygNuQ_3XEkJ-gl5ol9br1lgwAz8ZJgSfel4CbtXk3w_g6utQsZqpggXfFqyQsTy0gaQqVyTQAH4jTNxXalWOdibLT79yWKDIS16f-vOnKB_y_dMfNozvm_ipqrJGCoqby55PN-s4nydY1IeAiyntWW6Po3xnT46pgJRhfFV3Ih-W9200e5otcs-lXLu1TJVeKQJ8m8PEDFcgqrxScd4AZM28uDz0Y_1BrUWGSuXYPeIA2FZlDl9VRTKBSvO-BR1zfr2iN9S6bOSF9PjUXM3oxrWQrVKQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T01:52:11.158Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T01:52:11.158Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T01:52:11.158Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 513,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 722063,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 293509551,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 722170,
           [Symbol(triggerId)]: 722063 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 dc 61 0d 03 4e 46 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51208668,
     responseTo: 83534,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 515,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 722071,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 293509551,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 722164,
           [Symbol(triggerId)]: 722071 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 de 61 0d 03 4f 46 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51208670,
     responseTo: 83535,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T01:53:41.629Z|94a6ab044368cd168e1883de18eea44df424b44fcf4dbdadbbca75cdf4b8da0897d81fc44f9956bb97f3105ee07ab033620c5add04d15340823b0cef5a9343b6966daa322a63488b138003d1ececc19cab7ad9f5bbb72a900b0f3938d5a6dabb3960e392b41902f7820a2c1a83c2cb75870771189136d8b05a084e54312c8109b591d36350b58cd69971d1ebda521441d98eee5ca70520ff7c8793302ebcd3d3ab2625d4f705413cfeb165b9a32031ccb3a6c92996bf4a7c523246094502bc26e1fcaa5860f16bb4ee74d20e203eea4befdfdabc138f2fde95f9f09072835b381109b1322cefb31b4d41c03007967a78af49b3414ec36e63bf623c23eaa57e4a
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T01:53:41.629Z|94a6ab044368cd168e1883de18eea44df424b44fcf4dbdadbbca75cdf4b8da0897d81fc44f9956bb97f3105ee07ab033620c5add04d15340823b0cef5a9343b6966daa322a63488b138003d1ececc19cab7ad9f5bbb72a900b0f3938d5a6dabb3960e392b41902f7820a2c1a83c2cb75870771189136d8b05a084e54312c8109b591d36350b58cd69971d1ebda521441d98eee5ca70520ff7c8793302ebcd3d3ab2625d4f705413cfeb165b9a32031ccb3a6c92996bf4a7c523246094502bc26e1fcaa5860f16bb4ee74d20e203eea4befdfdabc138f2fde95f9f09072835b381109b1322cefb31b4d41c03007967a78af49b3414ec36e63bf623c23eaa57e4a","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T01:53:41.629Z|94a6ab044368cd168e1883de18eea44df424b44fcf4dbdadbbca75cdf4b8da0897d81fc44f9956bb97f3105ee07ab033620c5add04d15340823b0cef5a9343b6966daa322a63488b138003d1ececc19cab7ad9f5bbb72a900b0f3938d5a6dabb3960e392b41902f7820a2c1a83c2cb75870771189136d8b05a084e54312c8109b591d36350b58cd69971d1ebda521441d98eee5ca70520ff7c8793302ebcd3d3ab2625d4f705413cfeb165b9a32031ccb3a6c92996bf4a7c523246094502bc26e1fcaa5860f16bb4ee74d20e203eea4befdfdabc138f2fde95f9f09072835b381109b1322cefb31b4d41c03007967a78af49b3414ec36e63bf623c23eaa57e4a\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T01:53:41.629Z|94a6ab044368cd168e1883de18eea44df424b44fcf4dbdadbbca75cdf4b8da0897d81fc44f9956bb97f3105ee07ab033620c5add04d15340823b0cef5a9343b6966daa322a63488b138003d1ececc19cab7ad9f5bbb72a900b0f3938d5a6dabb3960e392b41902f7820a2c1a83c2cb75870771189136d8b05a084e54312c8109b591d36350b58cd69971d1ebda521441d98eee5ca70520ff7c8793302ebcd3d3ab2625d4f705413cfeb165b9a32031ccb3a6c92996bf4a7c523246094502bc26e1fcaa5860f16bb4ee74d20e203eea4befdfdabc138f2fde95f9f09072835b381109b1322cefb31b4d41c03007967a78af49b3414ec36e63bf623c23eaa57e4a","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548122579,"nbf":1548122579,"exp":1548126479,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548122579,"nbf":1548122579,"exp":1548126479,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548122579,"nbf":1548122579,"exp":1548126479,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjI1NzksIm5iZiI6MTU0ODEyMjU3OSwiZXhwIjoxNTQ4MTI2NDc5LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMy4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.Kvc5mnTygWtOw-i6rbFWBh3P0QJCHxC3_r79Zm4uUEEw7XtxllOjMoPd8ZOXpgwyvCLL1VgIckvvdvGonjUZOWQ8RFgE93GpcLwn6-_lxGH37iABwWyi8RbAc2LGb2tb7nCankFnA2kisB_ZTR6c877hVGzkuTaAtIFVEzvuohkA-_XkD-ES258txWWklMVNuDsDEDFHoTxhqatirqtCVSw3PfdXBuQ1uL9iKhb00iQEyfEU9AR4Kcnw7-THOfNSFjBgaqq4WhzBbbhzNvJ34WebirmGSohDsDi7nXLmEelKjcXtpqhpghgqov54A4xrifEUhkLq88d1Xkz3YArkGw","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjI1NzksIm5iZiI6MTU0ODEyMjU3OSwiZXhwIjoxNTQ4MTI2NDc5LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMy4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.Kvc5mnTygWtOw-i6rbFWBh3P0QJCHxC3_r79Zm4uUEEw7XtxllOjMoPd8ZOXpgwyvCLL1VgIckvvdvGonjUZOWQ8RFgE93GpcLwn6-_lxGH37iABwWyi8RbAc2LGb2tb7nCankFnA2kisB_ZTR6c877hVGzkuTaAtIFVEzvuohkA-_XkD-ES258txWWklMVNuDsDEDFHoTxhqatirqtCVSw3PfdXBuQ1uL9iKhb00iQEyfEU9AR4Kcnw7-THOfNSFjBgaqq4WhzBbbhzNvJ34WebirmGSohDsDi7nXLmEelKjcXtpqhpghgqov54A4xrifEUhkLq88d1Xkz3YArkGw","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T02:02:55.993Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T02:02:55.993Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T02:02:55.993Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T02:02:55.993Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 537,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 727854,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 294063930,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 727955,
           [Symbol(triggerId)]: 727854 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 97 76 0d 03 ce 48 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51213975,
     responseTo: 84174,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:02:55.993Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 539,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 727862,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 294063931,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 727961,
           [Symbol(triggerId)]: 727862 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 98 76 0d 03 cf 48 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51213976,
     responseTo: 84175,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:02:55.993Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:02:56.009Z|1d1062df2732c01bf90c7386d693e43032c40c214ed4d5fa462ac13bf1d7ffd483e56a5d1759e3a8faa0b7dbf9bb2d04b4aa7f7a71bfc301c474f06671b6069c7ac90ecaa594aa2fe59dcd5c48de6b17018055177e1768714acabb2ac3d31ae9df75de702d124e665256c12a0bb5354d300390be336bf31735a89bc1559d27570c42ae5e302117420a34042196a57c750b5c551891bb73f90410264a430a8d80268ed2c05342a9bb1f2d87af55fc953a8591e361c36bf9fba57ba4adedaf3163d697867077d42ceaed39ef9209d1942b8199b12c7260a33b4d8d42bcca3432fafe7ae8123af535d175109c6f4af7202921fb1a9ea4914099cc48b48d53646bbf
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:02:55.993Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:02:56.009Z|1d1062df2732c01bf90c7386d693e43032c40c214ed4d5fa462ac13bf1d7ffd483e56a5d1759e3a8faa0b7dbf9bb2d04b4aa7f7a71bfc301c474f06671b6069c7ac90ecaa594aa2fe59dcd5c48de6b17018055177e1768714acabb2ac3d31ae9df75de702d124e665256c12a0bb5354d300390be336bf31735a89bc1559d27570c42ae5e302117420a34042196a57c750b5c551891bb73f90410264a430a8d80268ed2c05342a9bb1f2d87af55fc953a8591e361c36bf9fba57ba4adedaf3163d697867077d42ceaed39ef9209d1942b8199b12c7260a33b4d8d42bcca3432fafe7ae8123af535d175109c6f4af7202921fb1a9ea4914099cc48b48d53646bbf","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:02:56.009Z|1d1062df2732c01bf90c7386d693e43032c40c214ed4d5fa462ac13bf1d7ffd483e56a5d1759e3a8faa0b7dbf9bb2d04b4aa7f7a71bfc301c474f06671b6069c7ac90ecaa594aa2fe59dcd5c48de6b17018055177e1768714acabb2ac3d31ae9df75de702d124e665256c12a0bb5354d300390be336bf31735a89bc1559d27570c42ae5e302117420a34042196a57c750b5c551891bb73f90410264a430a8d80268ed2c05342a9bb1f2d87af55fc953a8591e361c36bf9fba57ba4adedaf3163d697867077d42ceaed39ef9209d1942b8199b12c7260a33b4d8d42bcca3432fafe7ae8123af535d175109c6f4af7202921fb1a9ea4914099cc48b48d53646bbf\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:02:56.009Z|1d1062df2732c01bf90c7386d693e43032c40c214ed4d5fa462ac13bf1d7ffd483e56a5d1759e3a8faa0b7dbf9bb2d04b4aa7f7a71bfc301c474f06671b6069c7ac90ecaa594aa2fe59dcd5c48de6b17018055177e1768714acabb2ac3d31ae9df75de702d124e665256c12a0bb5354d300390be336bf31735a89bc1559d27570c42ae5e302117420a34042196a57c750b5c551891bb73f90410264a430a8d80268ed2c05342a9bb1f2d87af55fc953a8591e361c36bf9fba57ba4adedaf3163d697867077d42ceaed39ef9209d1942b8199b12c7260a33b4d8d42bcca3432fafe7ae8123af535d175109c6f4af7202921fb1a9ea4914099cc48b48d53646bbf","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","build":"10506000","clientVersion":"291","displayVersion":"1.5.6","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
userEntity------{"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
-----getUserRoleRisky----2222222
rolestudent
isExistingUser111
updateExistingUser1111
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T02:15:50.941Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T02:15:50.941Z,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser2222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T02:15:50.941Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T02:15:50.941Z,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 561,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 735440,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 294838878,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 735541,
           [Symbol(triggerId)]: 735440 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 1c 93 0d 03 20 4c 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51221276,
     responseTo: 85024,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T02:15:50.941Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 563,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 735448,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 294838878,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 735547,
           [Symbol(triggerId)]: 735448 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 1e 93 0d 03 21 4c 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51221278,
     responseTo: 85025,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T02:15:50.941Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T02:15:50.957Z|1632b834af22cb768bce6a5d4ebb9a288599b5339db81cae0cb8b8cd97e238e443a9d2f45b89b3f709445c2ce430c28a25a9ca5739757e283ac2cb74ef4f562a757a1c3ff128526cdefe092de0afc25d46073b3c3659d737649c8ca79cdbf15c1267067fbfd42a33874df0b2633ee5b135d3dcb9afa2b4f2219bd22ce05060398c17308f42fbe872b65b0dcabdfd047e396b5909e82aa84bfa8e0315a4fff64d03c2b3dd69172617035c6f270ed66b7be0fa00c0b32a71f6510e88b63556149de723ff72d14837e3b7dbcb1b807b91db7e8548a6c2f4f4a34aa5226b54d866b19dec09fca9f9bd1ab7849e6422fe4a0a68078b9563dfe08f1c63e8ddc26aea65
user--------111{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T02:15:50.941Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}
userid--------111"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T02:15:50.957Z|1632b834af22cb768bce6a5d4ebb9a288599b5339db81cae0cb8b8cd97e238e443a9d2f45b89b3f709445c2ce430c28a25a9ca5739757e283ac2cb74ef4f562a757a1c3ff128526cdefe092de0afc25d46073b3c3659d737649c8ca79cdbf15c1267067fbfd42a33874df0b2633ee5b135d3dcb9afa2b4f2219bd22ce05060398c17308f42fbe872b65b0dcabdfd047e396b5909e82aa84bfa8e0315a4fff64d03c2b3dd69172617035c6f270ed66b7be0fa00c0b32a71f6510e88b63556149de723ff72d14837e3b7dbcb1b807b91db7e8548a6c2f4f4a34aa5226b54d866b19dec09fca9f9bd1ab7849e6422fe4a0a68078b9563dfe08f1c63e8ddc26aea65","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T02:15:50.957Z|1632b834af22cb768bce6a5d4ebb9a288599b5339db81cae0cb8b8cd97e238e443a9d2f45b89b3f709445c2ce430c28a25a9ca5739757e283ac2cb74ef4f562a757a1c3ff128526cdefe092de0afc25d46073b3c3659d737649c8ca79cdbf15c1267067fbfd42a33874df0b2633ee5b135d3dcb9afa2b4f2219bd22ce05060398c17308f42fbe872b65b0dcabdfd047e396b5909e82aa84bfa8e0315a4fff64d03c2b3dd69172617035c6f270ed66b7be0fa00c0b32a71f6510e88b63556149de723ff72d14837e3b7dbcb1b807b91db7e8548a6c2f4f4a34aa5226b54d866b19dec09fca9f9bd1ab7849e6422fe4a0a68078b9563dfe08f1c63e8ddc26aea65\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T02:15:50.957Z|1632b834af22cb768bce6a5d4ebb9a288599b5339db81cae0cb8b8cd97e238e443a9d2f45b89b3f709445c2ce430c28a25a9ca5739757e283ac2cb74ef4f562a757a1c3ff128526cdefe092de0afc25d46073b3c3659d737649c8ca79cdbf15c1267067fbfd42a33874df0b2633ee5b135d3dcb9afa2b4f2219bd22ce05060398c17308f42fbe872b65b0dcabdfd047e396b5909e82aa84bfa8e0315a4fff64d03c2b3dd69172617035c6f270ed66b7be0fa00c0b32a71f6510e88b63556149de723ff72d14837e3b7dbcb1b807b91db7e8548a6c2f4f4a34aa5226b54d866b19dec09fca9f9bd1ab7849e6422fe4a0a68078b9563dfe08f1c63e8ddc26aea65","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548123396,"nbf":1548123396,"exp":1548127296,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548123396,"nbf":1548123396,"exp":1548127296,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548123396,"nbf":1548123396,"exp":1548127296,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjMzOTYsIm5iZiI6MTU0ODEyMzM5NiwiZXhwIjoxNTQ4MTI3Mjk2LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.KFQPJSRbU3eCXFW_fYpRj-UHfltHRVviEGjwCRmL6oewfZeQah7AHv8W6mdPu1qEezNr5RiP-dmBhnj6Z4cRh8pB1e50KNgUy8ECpDjV6_26YIfprH1g7i6ttJw4W6RXomXVug2rRzyomU-TTlqmZbW69KokICKqlLKo3kc8Czefjjbo2WZM7pHOhAkc1lKQhofqlpgITvgvgzL8RaclFYNjOeTW8Ow56exWL_f9gwgdlsYsbA-Cnk3GxSQst5mINSjat2ynfYYNA9p9dSCB4rNCVF04yuWCCuS4lXznXEaS01uEtvihpI3XSns_4n0bDUwjJp8-yOBF9G1Evts5Dg","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjMzOTYsIm5iZiI6MTU0ODEyMzM5NiwiZXhwIjoxNTQ4MTI3Mjk2LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.KFQPJSRbU3eCXFW_fYpRj-UHfltHRVviEGjwCRmL6oewfZeQah7AHv8W6mdPu1qEezNr5RiP-dmBhnj6Z4cRh8pB1e50KNgUy8ECpDjV6_26YIfprH1g7i6ttJw4W6RXomXVug2rRzyomU-TTlqmZbW69KokICKqlLKo3kc8Czefjjbo2WZM7pHOhAkc1lKQhofqlpgITvgvgzL8RaclFYNjOeTW8Ow56exWL_f9gwgdlsYsbA-Cnk3GxSQst5mINSjat2ynfYYNA9p9dSCB4rNCVF04yuWCCuS4lXznXEaS01uEtvihpI3XSns_4n0bDUwjJp8-yOBF9G1Evts5Dg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:02:55.993Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:02:55.993Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:02:55.993Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 583,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 736821,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 294899698,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 736914,
           [Symbol(triggerId)]: 736821 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 c6 95 0d 03 9f 4c 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51221958,
     responseTo: 85151,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 581,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 736813,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 294899698,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 736920,
           [Symbol(triggerId)]: 736813 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 c7 95 0d 03 a0 4c 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51221959,
     responseTo: 85152,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:16:51.777Z|018fec6467eb3c6d821722d511ea6a3b2b7846c9db3eab11deab55c46964444ccedde94b3424e0bc3133502debdf4144ee5d6684f65db9ea05dcbad35af7d77b6dd8bfcffa5aff1719523779fcdf98c7f86385c76984a4a33563a47618a137be60aea757d590b0bb08705e95b4883b6bb61b67068179e1399625a5c3d8da9cd76cbfeceb6eecd9f0cb4fe223f04469ddfc4bd3163b674fe14328589068c25c4fdcfc160d19bbf5a5f39ec270e7cd0ae77ecae40e9f5c19ae7000e8129188f96243d989f55662545e5145c33fb9765164d891ad55baca24b7ca1a377a30d41d4d5e44c248c3ad411ba9d7cb59a46abd4a245184ff63c711ec5ef91ed9dda83c47
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:16:51.777Z|018fec6467eb3c6d821722d511ea6a3b2b7846c9db3eab11deab55c46964444ccedde94b3424e0bc3133502debdf4144ee5d6684f65db9ea05dcbad35af7d77b6dd8bfcffa5aff1719523779fcdf98c7f86385c76984a4a33563a47618a137be60aea757d590b0bb08705e95b4883b6bb61b67068179e1399625a5c3d8da9cd76cbfeceb6eecd9f0cb4fe223f04469ddfc4bd3163b674fe14328589068c25c4fdcfc160d19bbf5a5f39ec270e7cd0ae77ecae40e9f5c19ae7000e8129188f96243d989f55662545e5145c33fb9765164d891ad55baca24b7ca1a377a30d41d4d5e44c248c3ad411ba9d7cb59a46abd4a245184ff63c711ec5ef91ed9dda83c47","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:16:51.777Z|018fec6467eb3c6d821722d511ea6a3b2b7846c9db3eab11deab55c46964444ccedde94b3424e0bc3133502debdf4144ee5d6684f65db9ea05dcbad35af7d77b6dd8bfcffa5aff1719523779fcdf98c7f86385c76984a4a33563a47618a137be60aea757d590b0bb08705e95b4883b6bb61b67068179e1399625a5c3d8da9cd76cbfeceb6eecd9f0cb4fe223f04469ddfc4bd3163b674fe14328589068c25c4fdcfc160d19bbf5a5f39ec270e7cd0ae77ecae40e9f5c19ae7000e8129188f96243d989f55662545e5145c33fb9765164d891ad55baca24b7ca1a377a30d41d4d5e44c248c3ad411ba9d7cb59a46abd4a245184ff63c711ec5ef91ed9dda83c47\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:16:51.777Z|018fec6467eb3c6d821722d511ea6a3b2b7846c9db3eab11deab55c46964444ccedde94b3424e0bc3133502debdf4144ee5d6684f65db9ea05dcbad35af7d77b6dd8bfcffa5aff1719523779fcdf98c7f86385c76984a4a33563a47618a137be60aea757d590b0bb08705e95b4883b6bb61b67068179e1399625a5c3d8da9cd76cbfeceb6eecd9f0cb4fe223f04469ddfc4bd3163b674fe14328589068c25c4fdcfc160d19bbf5a5f39ec270e7cd0ae77ecae40e9f5c19ae7000e8129188f96243d989f55662545e5145c33fb9765164d891ad55baca24b7ca1a377a30d41d4d5e44c248c3ad411ba9d7cb59a46abd4a245184ff63c711ec5ef91ed9dda83c47","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548123896,"nbf":1548123896,"exp":1548127796,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548123896,"nbf":1548123896,"exp":1548127796,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548123896,"nbf":1548123896,"exp":1548127796,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjM4OTYsIm5iZiI6MTU0ODEyMzg5NiwiZXhwIjoxNTQ4MTI3Nzk2LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.hXCQ9KaennNfkIseODiqdFAejNKcYA1EK4GocUM9xvxL_5jc0frsBYbRcxd3sSfzzANKuYVP06H1hclVmbrymHc60yhXqNhy-E_YUhMsltEMsymY1ee4uuKwZ1K_o51csB4o8f9N4CRy4gnfUQrsKxXNPCnU_mcuW7rttrQGlc9UORR26Q1S-3ZAx64qa_b04PV3VajiQEizYa3V2BGSADdq74t1cYxyaImUX5rsOyVZRz1Uf23KVBVqQkLvipVJOQArd5f2e3SgLyhQEqgFMzUIXo3XiD4B80AFtPCfUnbMRqjI9AueSfW02UuBBlEzUkYMJJ6hkpxaWUd__Wl6LQ","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjM4OTYsIm5iZiI6MTU0ODEyMzg5NiwiZXhwIjoxNTQ4MTI3Nzk2LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.hXCQ9KaennNfkIseODiqdFAejNKcYA1EK4GocUM9xvxL_5jc0frsBYbRcxd3sSfzzANKuYVP06H1hclVmbrymHc60yhXqNhy-E_YUhMsltEMsymY1ee4uuKwZ1K_o51csB4o8f9N4CRy4gnfUQrsKxXNPCnU_mcuW7rttrQGlc9UORR26Q1S-3ZAx64qa_b04PV3VajiQEizYa3V2BGSADdq74t1cYxyaImUX5rsOyVZRz1Uf23KVBVqQkLvipVJOQArd5f2e3SgLyhQEqgFMzUIXo3XiD4B80AFtPCfUnbMRqjI9AueSfW02UuBBlEzUkYMJJ6hkpxaWUd__Wl6LQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T02:24:52.386Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T02:24:52.386Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T02:24:52.386Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T02:24:52.386Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 605,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 741919,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 295380324,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 741993,
           [Symbol(triggerId)]: 741919 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 d3 a7 0d 03 c6 4e 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51226579,
     responseTo: 85702,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:24:52.386Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 607,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 741934,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 295380335,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 742085,
           [Symbol(triggerId)]: 741934 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 de a7 0d 03 d0 4e 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51226590,
     responseTo: 85712,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:24:52.386Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:24:52.414Z|4575bf7b9f62a3265844d62103321dd52bb7e76f03790a82dbb382175c5830d62feff49f223b1518c57ca344c056fbea3626c5bb831b4e4977073bcefba26e5ce25499880f426d4ac87121114919318667aac56a33a99ea74008af98c63ed8bde89c66c04dcb59e9d4aabf556a7ceabe81a904bd999e8830daacba0f0f073b71d33f19f566cb87eb1a26aeff665d9c043a5a9925257bf610aaae9f1d313f4c8247fbe2cd9cab384c44637b2d341d66254c95e906f4b05137b6685d5ee7c9c49a4ce8757b1a0b0e14da1bf854eed59bf4ff423a03bfe6408f4ff9e9a42bbee33776b672673f2f9d697788c49d8bdc7be271e1bf73147440db4a94c6a1380ee0b0
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:24:52.386Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:24:52.414Z|4575bf7b9f62a3265844d62103321dd52bb7e76f03790a82dbb382175c5830d62feff49f223b1518c57ca344c056fbea3626c5bb831b4e4977073bcefba26e5ce25499880f426d4ac87121114919318667aac56a33a99ea74008af98c63ed8bde89c66c04dcb59e9d4aabf556a7ceabe81a904bd999e8830daacba0f0f073b71d33f19f566cb87eb1a26aeff665d9c043a5a9925257bf610aaae9f1d313f4c8247fbe2cd9cab384c44637b2d341d66254c95e906f4b05137b6685d5ee7c9c49a4ce8757b1a0b0e14da1bf854eed59bf4ff423a03bfe6408f4ff9e9a42bbee33776b672673f2f9d697788c49d8bdc7be271e1bf73147440db4a94c6a1380ee0b0","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:24:52.414Z|4575bf7b9f62a3265844d62103321dd52bb7e76f03790a82dbb382175c5830d62feff49f223b1518c57ca344c056fbea3626c5bb831b4e4977073bcefba26e5ce25499880f426d4ac87121114919318667aac56a33a99ea74008af98c63ed8bde89c66c04dcb59e9d4aabf556a7ceabe81a904bd999e8830daacba0f0f073b71d33f19f566cb87eb1a26aeff665d9c043a5a9925257bf610aaae9f1d313f4c8247fbe2cd9cab384c44637b2d341d66254c95e906f4b05137b6685d5ee7c9c49a4ce8757b1a0b0e14da1bf854eed59bf4ff423a03bfe6408f4ff9e9a42bbee33776b672673f2f9d697788c49d8bdc7be271e1bf73147440db4a94c6a1380ee0b0\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:24:52.414Z|4575bf7b9f62a3265844d62103321dd52bb7e76f03790a82dbb382175c5830d62feff49f223b1518c57ca344c056fbea3626c5bb831b4e4977073bcefba26e5ce25499880f426d4ac87121114919318667aac56a33a99ea74008af98c63ed8bde89c66c04dcb59e9d4aabf556a7ceabe81a904bd999e8830daacba0f0f073b71d33f19f566cb87eb1a26aeff665d9c043a5a9925257bf610aaae9f1d313f4c8247fbe2cd9cab384c44637b2d341d66254c95e906f4b05137b6685d5ee7c9c49a4ce8757b1a0b0e14da1bf854eed59bf4ff423a03bfe6408f4ff9e9a42bbee33776b672673f2f9d697788c49d8bdc7be271e1bf73147440db4a94c6a1380ee0b0","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","build":"10506000","clientVersion":"291","displayVersion":"1.5.6","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T02:15:50.941Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
userEntity------{"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T02:15:50.941Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T02:15:50.941Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser111
updateExistingUser1111
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser2222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser3333
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 625,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 744554,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 295590061,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 744664,
           [Symbol(triggerId)]: 744554 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 2b b0 0d 03 e3 4f 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51228715,
     responseTo: 85987,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 627,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 744578,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 295590074,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 744670,
           [Symbol(triggerId)]: 744578 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 30 b0 0d 03 e5 4f 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51228720,
     responseTo: 85989,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T02:28:22.152Z|3f29bbad57f4947856219daf5a812ba23463484a3fd0fa8508aa6428ba0415151514c479d3452ac4b482fed7ee49147f519106ec30c6451d4fd413f246f9baa0a8a69501745cfcb7efccefcd09d1e51b2f9dabd4867708957e72c76e2f18c98ddb04a2702e9da62cc58c6f351cf8b33e5c8b95a29d82dee10b09eadd0a170ad037193ca9e7be5fd7dfaabe2d70e75377d62d4ab8058459d6c0360288466ce7eccae09336b21225b1c8ff756947c63aec9e45f3eb47373595c513216b8b7e92ec4c4770719d6fe635a580edd5b73b86823100a7d209b75e9b30ea82522eab92d4019b3c1e873e415c76962136fd6519092840d897bccc2d6a7e39eedb39c27f5d
user--------111{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}
userid--------111"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T02:28:22.152Z|3f29bbad57f4947856219daf5a812ba23463484a3fd0fa8508aa6428ba0415151514c479d3452ac4b482fed7ee49147f519106ec30c6451d4fd413f246f9baa0a8a69501745cfcb7efccefcd09d1e51b2f9dabd4867708957e72c76e2f18c98ddb04a2702e9da62cc58c6f351cf8b33e5c8b95a29d82dee10b09eadd0a170ad037193ca9e7be5fd7dfaabe2d70e75377d62d4ab8058459d6c0360288466ce7eccae09336b21225b1c8ff756947c63aec9e45f3eb47373595c513216b8b7e92ec4c4770719d6fe635a580edd5b73b86823100a7d209b75e9b30ea82522eab92d4019b3c1e873e415c76962136fd6519092840d897bccc2d6a7e39eedb39c27f5d","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T02:28:22.152Z|3f29bbad57f4947856219daf5a812ba23463484a3fd0fa8508aa6428ba0415151514c479d3452ac4b482fed7ee49147f519106ec30c6451d4fd413f246f9baa0a8a69501745cfcb7efccefcd09d1e51b2f9dabd4867708957e72c76e2f18c98ddb04a2702e9da62cc58c6f351cf8b33e5c8b95a29d82dee10b09eadd0a170ad037193ca9e7be5fd7dfaabe2d70e75377d62d4ab8058459d6c0360288466ce7eccae09336b21225b1c8ff756947c63aec9e45f3eb47373595c513216b8b7e92ec4c4770719d6fe635a580edd5b73b86823100a7d209b75e9b30ea82522eab92d4019b3c1e873e415c76962136fd6519092840d897bccc2d6a7e39eedb39c27f5d\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T02:28:22.152Z|3f29bbad57f4947856219daf5a812ba23463484a3fd0fa8508aa6428ba0415151514c479d3452ac4b482fed7ee49147f519106ec30c6451d4fd413f246f9baa0a8a69501745cfcb7efccefcd09d1e51b2f9dabd4867708957e72c76e2f18c98ddb04a2702e9da62cc58c6f351cf8b33e5c8b95a29d82dee10b09eadd0a170ad037193ca9e7be5fd7dfaabe2d70e75377d62d4ab8058459d6c0360288466ce7eccae09336b21225b1c8ff756947c63aec9e45f3eb47373595c513216b8b7e92ec4c4770719d6fe635a580edd5b73b86823100a7d209b75e9b30ea82522eab92d4019b3c1e873e415c76962136fd6519092840d897bccc2d6a7e39eedb39c27f5d","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124131,"nbf":1548124131,"exp":1548128031,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124131,"nbf":1548124131,"exp":1548128031,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124131,"nbf":1548124131,"exp":1548128031,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjQxMzEsIm5iZiI6MTU0ODEyNDEzMSwiZXhwIjoxNTQ4MTI4MDMxLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMy4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.RLQj7GpggJcwYfF8Jwl9pOjaxTH3H51ABc1cbugUmEddwcEzuu8SRir79etRxGR1stiDCA10tsDFAx4EcmyoRdDUY2Vp7t-f8rLbsat6TvJ7DzWriLgoUqqsH4CtqCFfyLOPFddpmVUvf7Ux_MRqox5lREc-xW37BwLM3ABHYJ7C2KlhJrJ8JjsWCVp5JIV6dvnBPYu8UyQ2pxJ6K8WrTXoUGP3wM9DfLqubG-kHMqaMhJR68dH2Fvq-mfyFqNzizxuD2vg6lz_z3yo5MztC_dl3YTkmgixr2ThdYQ4d69b1tRWQSiEbDJQXJsyRWpZvUxmOtel6VBynaM1QM_fWJA","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjQxMzEsIm5iZiI6MTU0ODEyNDEzMSwiZXhwIjoxNTQ4MTI4MDMxLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMy4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.RLQj7GpggJcwYfF8Jwl9pOjaxTH3H51ABc1cbugUmEddwcEzuu8SRir79etRxGR1stiDCA10tsDFAx4EcmyoRdDUY2Vp7t-f8rLbsat6TvJ7DzWriLgoUqqsH4CtqCFfyLOPFddpmVUvf7Ux_MRqox5lREc-xW37BwLM3ABHYJ7C2KlhJrJ8JjsWCVp5JIV6dvnBPYu8UyQ2pxJ6K8WrTXoUGP3wM9DfLqubG-kHMqaMhJR68dH2Fvq-mfyFqNzizxuD2vg6lz_z3yo5MztC_dl3YTkmgixr2ThdYQ4d69b1tRWQSiEbDJQXJsyRWpZvUxmOtel6VBynaM1QM_fWJA","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:24:52.386Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:24:52.386Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:24:52.386Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 645,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 745676,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 295616282,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 745750,
           [Symbol(triggerId)]: 745676 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 83 b1 0d 03 41 50 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51229059,
     responseTo: 86081,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 647,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 745701,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 295616283,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 745812,
           [Symbol(triggerId)]: 745701 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 88 b1 0d 03 46 50 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51229064,
     responseTo: 86086,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:28:48.361Z|3c564d02e2f0875b92cfe8261fd314320f4fbc944e00a6e14da1a6188b26a7f35b7945ca2a5d40a3cbe8404582942eb76e4e56c4ad31f60a5b967e1777dcc6ac4a3dcf5cdcd0a6d25394b8dc9ba8369cf57e2f301c79b76f627934723021a4bbb591c713ace522430595f9281df922396c0c625b44423d4fb9d49cd8fafdb3b116995d80dac785a7b597707a12964db4e318799a774e175ef05f320ff6a3f62eca8c6c9a71ff5d78ae48b3977de8af70680a9166a987976904906455b8710aabc1823f8a4cde6d795086e128e78011e1d8396709365216873766a10a6917b397ddd83513b42b06bd52fd618b7fac4f8cadd86e128206457318117b723b84c507
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:28:48.361Z|3c564d02e2f0875b92cfe8261fd314320f4fbc944e00a6e14da1a6188b26a7f35b7945ca2a5d40a3cbe8404582942eb76e4e56c4ad31f60a5b967e1777dcc6ac4a3dcf5cdcd0a6d25394b8dc9ba8369cf57e2f301c79b76f627934723021a4bbb591c713ace522430595f9281df922396c0c625b44423d4fb9d49cd8fafdb3b116995d80dac785a7b597707a12964db4e318799a774e175ef05f320ff6a3f62eca8c6c9a71ff5d78ae48b3977de8af70680a9166a987976904906455b8710aabc1823f8a4cde6d795086e128e78011e1d8396709365216873766a10a6917b397ddd83513b42b06bd52fd618b7fac4f8cadd86e128206457318117b723b84c507","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:28:48.361Z|3c564d02e2f0875b92cfe8261fd314320f4fbc944e00a6e14da1a6188b26a7f35b7945ca2a5d40a3cbe8404582942eb76e4e56c4ad31f60a5b967e1777dcc6ac4a3dcf5cdcd0a6d25394b8dc9ba8369cf57e2f301c79b76f627934723021a4bbb591c713ace522430595f9281df922396c0c625b44423d4fb9d49cd8fafdb3b116995d80dac785a7b597707a12964db4e318799a774e175ef05f320ff6a3f62eca8c6c9a71ff5d78ae48b3977de8af70680a9166a987976904906455b8710aabc1823f8a4cde6d795086e128e78011e1d8396709365216873766a10a6917b397ddd83513b42b06bd52fd618b7fac4f8cadd86e128206457318117b723b84c507\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:28:48.361Z|3c564d02e2f0875b92cfe8261fd314320f4fbc944e00a6e14da1a6188b26a7f35b7945ca2a5d40a3cbe8404582942eb76e4e56c4ad31f60a5b967e1777dcc6ac4a3dcf5cdcd0a6d25394b8dc9ba8369cf57e2f301c79b76f627934723021a4bbb591c713ace522430595f9281df922396c0c625b44423d4fb9d49cd8fafdb3b116995d80dac785a7b597707a12964db4e318799a774e175ef05f320ff6a3f62eca8c6c9a71ff5d78ae48b3977de8af70680a9166a987976904906455b8710aabc1823f8a4cde6d795086e128e78011e1d8396709365216873766a10a6917b397ddd83513b42b06bd52fd618b7fac4f8cadd86e128206457318117b723b84c507","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547653456,"exp":1547653460,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888","user_name":"lancer88888","full_name":"lancer88888","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"red"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  skin: 'red' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 663,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 748168,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 295814549,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 748217,
           [Symbol(triggerId)]: 748168 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 e9 b8 0d 03 43 51 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51230953,
     responseTo: 86339,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124692,"nbf":1548124692,"exp":1548128592,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124692,"nbf":1548124692,"exp":1548128592,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124692,"nbf":1548124692,"exp":1548128592,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjQ2OTIsIm5iZiI6MTU0ODEyNDY5MiwiZXhwIjoxNTQ4MTI4NTkyLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.Vr2y1Jn6m0KCBU1i_QrwuR6fGrdEkd9BwKCxbapUtX6iUc9Zn5d7-uS3ub9lNve_YtQ-tb7dWvjOACdl4RIQVOHPGJ76PyBRrHA83hayFbLOeo15OFmboOt_UMvmJQYPikmML6xF4xNzMnoDl7pVG1ztD6nnWhglcXuFstSDe9vOUVziXlStG1BLGSD3e6RUsjdJcMIGtOu5S3CpdQhC2I_LJBld0lnpnTnQPAty2gYON7kUvF21aWTnxC0d1fuRH362Z9XuuCs80cVF8flQA9BRVNgo9lpAtyubXAbT7iB4OYEiWWf7StK_07wFdcV-3xlKjVI1JsP0d5LhcAqeGQ","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjQ2OTIsIm5iZiI6MTU0ODEyNDY5MiwiZXhwIjoxNTQ4MTI4NTkyLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.Vr2y1Jn6m0KCBU1i_QrwuR6fGrdEkd9BwKCxbapUtX6iUc9Zn5d7-uS3ub9lNve_YtQ-tb7dWvjOACdl4RIQVOHPGJ76PyBRrHA83hayFbLOeo15OFmboOt_UMvmJQYPikmML6xF4xNzMnoDl7pVG1ztD6nnWhglcXuFstSDe9vOUVziXlStG1BLGSD3e6RUsjdJcMIGtOu5S3CpdQhC2I_LJBld0lnpnTnQPAty2gYON7kUvF21aWTnxC0d1fuRH362Z9XuuCs80cVF8flQA9BRVNgo9lpAtyubXAbT7iB4OYEiWWf7StK_07wFdcV-3xlKjVI1JsP0d5LhcAqeGQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T02:38:08.746Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T02:38:08.746Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T02:38:08.746Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T02:38:08.746Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 681,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 751969,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 296176684,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 752070,
           [Symbol(triggerId)]: 751969 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 4a c6 0d 03 eb 52 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51234378,
     responseTo: 86763,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:38:08.746Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 683,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 751977,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 296176693,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 752076,
           [Symbol(triggerId)]: 751977 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 51 c6 0d 03 ee 52 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51234385,
     responseTo: 86766,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:38:08.746Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:38:08.772Z|2b368d31514d6babe2880ab10dd5134b3cfb1c00cb9e13ad2273cbe3faa99dd505ba1c4df4ebc6fb570b7ae11ea2547178d1086c27716df6a93c49dc88ba691bc173c627216da3a24b98001c1a0077b42d86a88e0e387219c2daa812eb78627a22972214006ee1cff9fbf1648118f33a5f8cb189d6617765e40ee47e75bcfde5527234d6c67004fa0d30d7b51839882d392498c03d5fbb1b2cb086148381c6ce4a0ee517cf40ce99496054f30e344fc1725a59b11e782d8a0bc2c395f8b0e863fd960a01d2bd8a8a6ee0e431fedfaa9e84fc8986a91a21cc33cb951858611871a06f3d5d2cd1f7c20fd1153d16ccc5499e29f680ad158dc73b15226ee2ebc176
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:38:08.746Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:38:08.772Z|2b368d31514d6babe2880ab10dd5134b3cfb1c00cb9e13ad2273cbe3faa99dd505ba1c4df4ebc6fb570b7ae11ea2547178d1086c27716df6a93c49dc88ba691bc173c627216da3a24b98001c1a0077b42d86a88e0e387219c2daa812eb78627a22972214006ee1cff9fbf1648118f33a5f8cb189d6617765e40ee47e75bcfde5527234d6c67004fa0d30d7b51839882d392498c03d5fbb1b2cb086148381c6ce4a0ee517cf40ce99496054f30e344fc1725a59b11e782d8a0bc2c395f8b0e863fd960a01d2bd8a8a6ee0e431fedfaa9e84fc8986a91a21cc33cb951858611871a06f3d5d2cd1f7c20fd1153d16ccc5499e29f680ad158dc73b15226ee2ebc176","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:38:08.772Z|2b368d31514d6babe2880ab10dd5134b3cfb1c00cb9e13ad2273cbe3faa99dd505ba1c4df4ebc6fb570b7ae11ea2547178d1086c27716df6a93c49dc88ba691bc173c627216da3a24b98001c1a0077b42d86a88e0e387219c2daa812eb78627a22972214006ee1cff9fbf1648118f33a5f8cb189d6617765e40ee47e75bcfde5527234d6c67004fa0d30d7b51839882d392498c03d5fbb1b2cb086148381c6ce4a0ee517cf40ce99496054f30e344fc1725a59b11e782d8a0bc2c395f8b0e863fd960a01d2bd8a8a6ee0e431fedfaa9e84fc8986a91a21cc33cb951858611871a06f3d5d2cd1f7c20fd1153d16ccc5499e29f680ad158dc73b15226ee2ebc176\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:38:08.772Z|2b368d31514d6babe2880ab10dd5134b3cfb1c00cb9e13ad2273cbe3faa99dd505ba1c4df4ebc6fb570b7ae11ea2547178d1086c27716df6a93c49dc88ba691bc173c627216da3a24b98001c1a0077b42d86a88e0e387219c2daa812eb78627a22972214006ee1cff9fbf1648118f33a5f8cb189d6617765e40ee47e75bcfde5527234d6c67004fa0d30d7b51839882d392498c03d5fbb1b2cb086148381c6ce4a0ee517cf40ce99496054f30e344fc1725a59b11e782d8a0bc2c395f8b0e863fd960a01d2bd8a8a6ee0e431fedfaa9e84fc8986a91a21cc33cb951858611871a06f3d5d2cd1f7c20fd1153d16ccc5499e29f680ad158dc73b15226ee2ebc176","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
进入getuserguid方法
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdasdasdassd"}
eeeewwwwww
registerUserGuid----"asdasdasdassd"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdasdasdassd"}
eeeewwwwww
queryUserRole连接成功
连接数据库成功
连接数据库成功
queryUserRole连接成功"student"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124864,"nbf":1548124864,"exp":1548128764,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124864,"nbf":1548124864,"exp":1548128764,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124864,"nbf":1548124864,"exp":1548128764,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjQ4NjQsIm5iZiI6MTU0ODEyNDg2NCwiZXhwIjoxNTQ4MTI4NzY0LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.j9CS7zAss5K75EwIzkYziYeo0AjIV3JepvFWn8Sixb48G0m3TFDXPosi9kNbZO_dWNyMlJG8TyajRmmVeKhQG7hCRIleC94xUaQolkk3ZwTKNP2kI-P6dZFZDw1Lc-nnwMnIIZi13YHMWV8qaHXxbSdp-uEBc2-F9-E9ZDffgxmM3cXFttZkOCo62pb_W7OYYif6PgNGlS-EHBi1B8oh1kQGTSeY308Se_deWjpnpw8xOjw960RKTzLYTkJS8UxPG8ZuKczSvPoEoaKNGXPkLZEMXfm7INucAgcXLSSBgPVkeJ6qw3AybiZ_isni-KBSzsp3lRh-09f6HtcU6UEfeg","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjQ4NjQsIm5iZiI6MTU0ODEyNDg2NCwiZXhwIjoxNTQ4MTI4NzY0LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.j9CS7zAss5K75EwIzkYziYeo0AjIV3JepvFWn8Sixb48G0m3TFDXPosi9kNbZO_dWNyMlJG8TyajRmmVeKhQG7hCRIleC94xUaQolkk3ZwTKNP2kI-P6dZFZDw1Lc-nnwMnIIZi13YHMWV8qaHXxbSdp-uEBc2-F9-E9ZDffgxmM3cXFttZkOCo62pb_W7OYYif6PgNGlS-EHBi1B8oh1kQGTSeY308Se_deWjpnpw8xOjw960RKTzLYTkJS8UxPG8ZuKczSvPoEoaKNGXPkLZEMXfm7INucAgcXLSSBgPVkeJ6qw3AybiZ_isni-KBSzsp3lRh-09f6HtcU6UEfeg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:38:08.746Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:38:08.746Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:38:08.746Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 723,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 755042,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 296348266,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 755135,
           [Symbol(triggerId)]: 755042 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 a6 cd 0d 03 11 54 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51236262,
     responseTo: 87057,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 721,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 755034,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 296348266,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 755141,
           [Symbol(triggerId)]: 755034 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 a7 cd 0d 03 13 54 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51236263,
     responseTo: 87059,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:41:00.345Z|22425fb2a861a6e16f956ef86f262da9f05e13f1fad9a5f4a6ecd6696af5517f39e8ffc15e9071bf90bc462df7c0227f2657698d985f710815f8d734435bf70ff9c29f5ced061e2b38556c5f320d0037da113e16f9f27d51854f68e8acaf8ca11477b3524af1c701be936a16750c06f350d0b1295d7dcf03c865d4314441cabdb3012c80bf5801c01a725967142d8647e5e3c3a1a712a7fee875ac977ecea2025441fb5fdadd4cae6c60e720572a5d8ebe9b190305e059290f7ed8b06b54d3e02b9f617a411c28375bbb76024979177cc883bf535ac7733203076175a646c3696769f66f45dd18df9b7e422e2862699e4a1a799344f74bfb4f79b02551f92f7d
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:41:00.345Z|22425fb2a861a6e16f956ef86f262da9f05e13f1fad9a5f4a6ecd6696af5517f39e8ffc15e9071bf90bc462df7c0227f2657698d985f710815f8d734435bf70ff9c29f5ced061e2b38556c5f320d0037da113e16f9f27d51854f68e8acaf8ca11477b3524af1c701be936a16750c06f350d0b1295d7dcf03c865d4314441cabdb3012c80bf5801c01a725967142d8647e5e3c3a1a712a7fee875ac977ecea2025441fb5fdadd4cae6c60e720572a5d8ebe9b190305e059290f7ed8b06b54d3e02b9f617a411c28375bbb76024979177cc883bf535ac7733203076175a646c3696769f66f45dd18df9b7e422e2862699e4a1a799344f74bfb4f79b02551f92f7d","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:41:00.345Z|22425fb2a861a6e16f956ef86f262da9f05e13f1fad9a5f4a6ecd6696af5517f39e8ffc15e9071bf90bc462df7c0227f2657698d985f710815f8d734435bf70ff9c29f5ced061e2b38556c5f320d0037da113e16f9f27d51854f68e8acaf8ca11477b3524af1c701be936a16750c06f350d0b1295d7dcf03c865d4314441cabdb3012c80bf5801c01a725967142d8647e5e3c3a1a712a7fee875ac977ecea2025441fb5fdadd4cae6c60e720572a5d8ebe9b190305e059290f7ed8b06b54d3e02b9f617a411c28375bbb76024979177cc883bf535ac7733203076175a646c3696769f66f45dd18df9b7e422e2862699e4a1a799344f74bfb4f79b02551f92f7d\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:41:00.345Z|22425fb2a861a6e16f956ef86f262da9f05e13f1fad9a5f4a6ecd6696af5517f39e8ffc15e9071bf90bc462df7c0227f2657698d985f710815f8d734435bf70ff9c29f5ced061e2b38556c5f320d0037da113e16f9f27d51854f68e8acaf8ca11477b3524af1c701be936a16750c06f350d0b1295d7dcf03c865d4314441cabdb3012c80bf5801c01a725967142d8647e5e3c3a1a712a7fee875ac977ecea2025441fb5fdadd4cae6c60e720572a5d8ebe9b190305e059290f7ed8b06b54d3e02b9f617a411c28375bbb76024979177cc883bf535ac7733203076175a646c3696769f66f45dd18df9b7e422e2862699e4a1a799344f74bfb4f79b02551f92f7d","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}
解码后user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
fromToken----user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
identity-----{"iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"exp":1547424634,"tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","unique_name":"stu15@usmie.com","user_name":"stu15@usmie.com","full_name":"ブラック フラグ","identity_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA"}
action: skin  tenantId: Expired identity token  unique_name:  details: {"clientVersion":"150","build":"10027000","identityToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
连接数据库成功
进入eula方法
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----user{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":""}
action: eula  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
eeeewwwwww
updateEula-------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":""}
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  unique_name: 'test190117',
  acceptedEula: true }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 743,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 756597,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 296418355,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 756646,
           [Symbol(triggerId)]: 756597 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 8b d2 0d 03 9b 54 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51237515,
     responseTo: 87195,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547710498,"exp":1547714398,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117","user_name":"test190117","full_name":"test190117","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  unique_name: 'test190117',
  skin: '1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 755,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 757357,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 296448690,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 757406,
           [Symbol(triggerId)]: 757357 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 6a d4 0d 03 e1 54 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51237994,
     responseTo: 87265,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547710498,"exp":1547714398,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117","user_name":"test190117","full_name":"test190117","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"abc"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  unique_name: 'test190117',
  skin: 'abc' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 767,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 758200,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 296493298,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 758249,
           [Symbol(triggerId)]: 758200 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 55 d7 0d 03 31 55 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51238741,
     responseTo: 87345,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124864,"nbf":1548124864,"exp":1548128764,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124864,"nbf":1548124864,"exp":1548128764,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548124864,"nbf":1548124864,"exp":1548128764,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.232.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1548124864,"exp":1548128764,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888","user_name":"lancer88888","full_name":"lancer88888","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjQ4NjQsIm5iZiI6MTU0ODEyNDg2NCwiZXhwIjoxNTQ4MTI4NzY0LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.j9CS7zAss5K75EwIzkYziYeo0AjIV3JepvFWn8Sixb48G0m3TFDXPosi9kNbZO_dWNyMlJG8TyajRmmVeKhQG7hCRIleC94xUaQolkk3ZwTKNP2kI-P6dZFZDw1Lc-nnwMnIIZi13YHMWV8qaHXxbSdp-uEBc2-F9-E9ZDffgxmM3cXFttZkOCo62pb_W7OYYif6PgNGlS-EHBi1B8oh1kQGTSeY308Se_deWjpnpw8xOjw960RKTzLYTkJS8UxPG8ZuKczSvPoEoaKNGXPkLZEMXfm7INucAgcXLSSBgPVkeJ6qw3AybiZ_isni-KBSzsp3lRh-09f6HtcU6UEfeg"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjQ4NjQsIm5iZiI6MTU0ODEyNDg2NCwiZXhwIjoxNTQ4MTI4NzY0LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.j9CS7zAss5K75EwIzkYziYeo0AjIV3JepvFWn8Sixb48G0m3TFDXPosi9kNbZO_dWNyMlJG8TyajRmmVeKhQG7hCRIleC94xUaQolkk3ZwTKNP2kI-P6dZFZDw1Lc-nnwMnIIZi13YHMWV8qaHXxbSdp-uEBc2-F9-E9ZDffgxmM3cXFttZkOCo62pb_W7OYYif6PgNGlS-EHBi1B8oh1kQGTSeY308Se_deWjpnpw8xOjw960RKTzLYTkJS8UxPG8ZuKczSvPoEoaKNGXPkLZEMXfm7INucAgcXLSSBgPVkeJ6qw3AybiZ_isni-KBSzsp3lRh-09f6HtcU6UEfeg","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjQ4NjQsIm5iZiI6MTU0ODEyNDg2NCwiZXhwIjoxNTQ4MTI4NzY0LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMi4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.j9CS7zAss5K75EwIzkYziYeo0AjIV3JepvFWn8Sixb48G0m3TFDXPosi9kNbZO_dWNyMlJG8TyajRmmVeKhQG7hCRIleC94xUaQolkk3ZwTKNP2kI-P6dZFZDw1Lc-nnwMnIIZi13YHMWV8qaHXxbSdp-uEBc2-F9-E9ZDffgxmM3cXFttZkOCo62pb_W7OYYif6PgNGlS-EHBi1B8oh1kQGTSeY308Se_deWjpnpw8xOjw960RKTzLYTkJS8UxPG8ZuKczSvPoEoaKNGXPkLZEMXfm7INucAgcXLSSBgPVkeJ6qw3AybiZ_isni-KBSzsp3lRh-09f6HtcU6UEfeg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 779,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 758882,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 296513914,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 758931,
           [Symbol(triggerId)]: 758882 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 60 d8 0d 03 6d 55 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51239008,
     responseTo: 87405,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548125081,"nbf":1548125081,"exp":1548128981,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548125081,"nbf":1548125081,"exp":1548128981,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548125081,"nbf":1548125081,"exp":1548128981,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"167.220.233.213","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjUwODEsIm5iZiI6MTU0ODEyNTA4MSwiZXhwIjoxNTQ4MTI4OTgxLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMy4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.fGfbn4K5CIgqmWVP69hnS_PvYNIJzgzN6MU2FbGrWHZ1_HCf1y5Faiao1bn3DjTajG37SrMydtB89E8RiUMrtEUSpAqWTCcJ6eDOBH8iaoAyfPVvJTbp4sOdl6P8HQXBa88omBGFQpATxd_q51sXZ5_xEUtcE5armDTZVinYBNY40od6RPK_R4haOAGp9Bjv-145WRxG52okVRLrQowc1NAIP-bet310UvA7PmLY3r23i_qNv0SCTZ0vUi4QOUyruac1AcHhFLSp8lj6bVJNeoLwO4blUqlOYAcAO87mjLg8QLA820x8MX0tXasR5v1E-MxJoWgt6yFKiy6kJWh9HA","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjUwODEsIm5iZiI6MTU0ODEyNTA4MSwiZXhwIjoxNTQ4MTI4OTgxLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxNjcuMjIwLjIzMy4yMTMiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.fGfbn4K5CIgqmWVP69hnS_PvYNIJzgzN6MU2FbGrWHZ1_HCf1y5Faiao1bn3DjTajG37SrMydtB89E8RiUMrtEUSpAqWTCcJ6eDOBH8iaoAyfPVvJTbp4sOdl6P8HQXBa88omBGFQpATxd_q51sXZ5_xEUtcE5armDTZVinYBNY40od6RPK_R4haOAGp9Bjv-145WRxG52okVRLrQowc1NAIP-bet310UvA7PmLY3r23i_qNv0SCTZ0vUi4QOUyruac1AcHhFLSp8lj6bVJNeoLwO4blUqlOYAcAO87mjLg8QLA820x8MX0tXasR5v1E-MxJoWgt6yFKiy6kJWh9HA","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T02:44:37.309Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T02:44:37.309Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T02:44:37.309Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T02:44:37.309Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 797,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 760166,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 296565247,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 760267,
           [Symbol(triggerId)]: 760166 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 a2 db 0d 03 eb 55 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51239842,
     responseTo: 87531,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:44:37.309Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 799,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 760174,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 296565247,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 760273,
           [Symbol(triggerId)]: 760174 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 a4 db 0d 03 ec 55 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51239844,
     responseTo: 87532,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:44:37.309Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:44:37.326Z|0f253040e06a5dd44de5778e00f0548c5293d91c4601fd4819fc4fd367194cbca331d1347ecbc72245d782231a0d3144f0d7b89071c6a7663289c8f71e59beedc704af7034c776f9eb74fabb776fa7879bfb1e0293877670d5cffec7a5aedc0ca4a8dd6874375bf423baa6a2a711d22317ef40c4d5a1d74da4a9628674dc88e2c94e51226c8f84975f7a856b76952bd4d615366f953645291b2672597e90d130a65ed19f4a727c88b325ae364b3d0ca4ad6c91aa71c2359533e9f829597b2e6b7a0db38ef766eb24a268d70a9fe7226351400e5c1a745a0d4210d4f8e4441df2d9d46faf276c60bb634fe4160f525b7b50c3aa9e8c0ed61f9848dd43015e1044
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T02:44:37.309Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:44:37.326Z|0f253040e06a5dd44de5778e00f0548c5293d91c4601fd4819fc4fd367194cbca331d1347ecbc72245d782231a0d3144f0d7b89071c6a7663289c8f71e59beedc704af7034c776f9eb74fabb776fa7879bfb1e0293877670d5cffec7a5aedc0ca4a8dd6874375bf423baa6a2a711d22317ef40c4d5a1d74da4a9628674dc88e2c94e51226c8f84975f7a856b76952bd4d615366f953645291b2672597e90d130a65ed19f4a727c88b325ae364b3d0ca4ad6c91aa71c2359533e9f829597b2e6b7a0db38ef766eb24a268d70a9fe7226351400e5c1a745a0d4210d4f8e4441df2d9d46faf276c60bb634fe4160f525b7b50c3aa9e8c0ed61f9848dd43015e1044","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:44:37.326Z|0f253040e06a5dd44de5778e00f0548c5293d91c4601fd4819fc4fd367194cbca331d1347ecbc72245d782231a0d3144f0d7b89071c6a7663289c8f71e59beedc704af7034c776f9eb74fabb776fa7879bfb1e0293877670d5cffec7a5aedc0ca4a8dd6874375bf423baa6a2a711d22317ef40c4d5a1d74da4a9628674dc88e2c94e51226c8f84975f7a856b76952bd4d615366f953645291b2672597e90d130a65ed19f4a727c88b325ae364b3d0ca4ad6c91aa71c2359533e9f829597b2e6b7a0db38ef766eb24a268d70a9fe7226351400e5c1a745a0d4210d4f8e4441df2d9d46faf276c60bb634fe4160f525b7b50c3aa9e8c0ed61f9848dd43015e1044\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T02:44:37.326Z|0f253040e06a5dd44de5778e00f0548c5293d91c4601fd4819fc4fd367194cbca331d1347ecbc72245d782231a0d3144f0d7b89071c6a7663289c8f71e59beedc704af7034c776f9eb74fabb776fa7879bfb1e0293877670d5cffec7a5aedc0ca4a8dd6874375bf423baa6a2a711d22317ef40c4d5a1d74da4a9628674dc88e2c94e51226c8f84975f7a856b76952bd4d615366f953645291b2672597e90d130a65ed19f4a727c88b325ae364b3d0ca4ad6c91aa71c2359533e9f829597b2e6b7a0db38ef766eb24a268d70a9fe7226351400e5c1a745a0d4210d4f8e4441df2d9d46faf276c60bb634fe4160f525b7b50c3aa9e8c0ed61f9848dd43015e1044","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}
解码后user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
fromToken----user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
identity-----{"iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"exp":1547424634,"tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","unique_name":"stu15@usmie.com","user_name":"stu15@usmie.com","full_name":"ブラック フラグ","identity_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA"}
action: skin  tenantId: Expired identity token  unique_name:  details: {"clientVersion":"150","build":"10027000","identityToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
连接数据库成功
base64Decoded========{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}
解码后user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
fromToken----user{"userName":"stu15@usmie.com","profile":{"aud":"https://meeservices.minecraft.net","iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"nbf":1547420734,"exp":1547424634,"acr":"1","aio":"42JgYIgT/qsYOIn5dOWl7xsfBcotVOMq9eYwfnE322HtyXXFMksA","amr":["pwd"],"appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","appidacr":"0","deviceid":"d8387cc9-f676-4c22-b24b-74a7790fbc71","family_name":"フラグ","given_name":"ブラック","ipaddr":"73.225.99.122","name":"ブラック フラグ","oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"t6qAg90jCLrex51aabS4Zqyf8_aSpHxTuB9B9jpvpL8","tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_name":"stu15@usmie.com","upn":"stu15@usmie.com","uti":"6Os2Y15vO0KMsSppdIFTAA","ver":"1.0"}}
identity-----{"iss":"https://sts.windows.net/38dd6634-1031-4c50-a9b4-d16cd9d97d57/","iat":1547420734,"exp":1547424634,"tid":"38dd6634-1031-4c50-a9b4-d16cd9d97d57","unique_oid":"d2bb1fae-fe7e-4473-a161-92aefee52a3d","unique_name":"stu15@usmie.com","user_name":"stu15@usmie.com","full_name":"ブラック フラグ","identity_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA"}
action: skin  tenantId: Expired identity token  unique_name:  details: {"clientVersion":"150","build":"10027000","identityToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSIsImtpZCI6Im5iQ3dXMTF3M1hrQi14VWFYd0tSU0xqTUhHUSJ9.eyJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTcvIiwiaWF0IjoxNTQ3NDIwNzM0LCJuYmYiOjE1NDc0MjA3MzQsImV4cCI6MTU0NzQyNDYzNCwiYWNyIjoiMSIsImFpbyI6IjQySmdZSWdUL3FzWU9JbjVkT1dsN3hzZkJjb3RWT01xOWVZd2ZuRTMyMkh0eVhYRk1rc0EiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjM2YjE0MzItMWExYy00YzgyLTliNzYtMjRkZTFjYWI0MmYyIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJkODM4N2NjOS1mNjc2LTRjMjItYjI0Yi03NGE3NzkwZmJjNzEiLCJmYW1pbHlfbmFtZSI6IuODleODqeOCsCIsImdpdmVuX25hbWUiOiLjg5bjg6njg4Pjgq8iLCJpcGFkZHIiOiI3My4yMjUuOTkuMTIyIiwibmFtZSI6IuODluODqeODg-OCryDjg5Xjg6njgrAiLCJvaWQiOiJkMmJiMWZhZS1mZTdlLTQ0NzMtYTE2MS05MmFlZmVlNTJhM2QiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InQ2cUFnOTBqQ0xyZXg1MWFhYlM0WnF5ZjhfYVNwSHhUdUI5QjlqcHZwTDgiLCJ0aWQiOiIzOGRkNjYzNC0xMDMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6InN0dTE1QHVzbWllLmNvbSIsInVwbiI6InN0dTE1QHVzbWllLmNvbSIsInV0aSI6IjZPczJZMTV2TzBLTXNTcHBkSUZUQUEiLCJ2ZXIiOiIxLjAifQ.thEeWYdxxfhCwCF_KTXoFV_Urv-ZKlo10tU-Bl9hOiVGY-3a4xqWl_D3CqhONeUr_WxxEtCqNWpPoj69X4eiXPkKBQXyGewWkOjTA3FYtSbbWC6FY0PiPJyq5SHBwnKJ7N0NCuEp8NZR2_Q1f2gWgCBaWzuN1g0nHBZRhW5FPlvP_3TsUB3XSNSynlaNi5oo_NhMbwwqeHuW8R1FdmEAdIqB4sFduVqRPWWB5TIDTHqmG8gGIoNHupR98l7gUySJ2A9Z2iGOzu0G6M0zfnXH0uSrXybQuRq2fpEK0--ETs4JG6VlJ0uVqBFOnVzcc0Kt1sZN9i0azu2fjBOsWDHmsA","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547710498,"exp":1547714398,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117","user_name":"test190117","full_name":"test190117","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"abcasa112131"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
连接数据库成功
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"abc","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  unique_name: 'test190117',
  skin: 'abcasa112131' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 823,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 764391,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 296925166,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 764440,
           [Symbol(triggerId)]: 764391 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 ee e9 0d 03 a3 57 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51243502,
     responseTo: 87971,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547710498,"exp":1547714398,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117","user_name":"test190117","full_name":"test190117","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"65256265"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"abcasa112131","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  unique_name: 'test190117',
  skin: '65256265' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 835,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 765663,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 297022098,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 765712,
           [Symbol(triggerId)]: 765663 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 ab ed 0d 03 25 58 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51244459,
     responseTo: 88101,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547710498,"exp":1547714398,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117","user_name":"test190117","full_name":"test190117","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
连接数据库成功
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"65256265","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  unique_name: 'test190117',
  skin: '1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 847,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 767534,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 297184572,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 767583,
           [Symbol(triggerId)]: 767534 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 d2 f3 0d 03 ed 58 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51246034,
     responseTo: 88301,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
进入eula方法
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----user{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":""}
action: eula  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
eeeewwwwww
updateEula-------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":""}
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  unique_name: 'test190117',
  acceptedEula: true }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 859,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 768121,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 297194112,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 768170,
           [Symbol(triggerId)]: 768121 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 4b f4 0d 03 1f 59 01 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51246155,
     responseTo: 88351,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
进入getuserguid方法
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdasdasdassd"}
eeeewwwwww
registerUserGuid----"asdasdasdassd"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdasdasdassd"}
eeeewwwwww
连接数据库成功
queryUserRole连接成功
连接数据库成功
queryUserRole连接成功"student"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
进入getuserguid方法
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
registerUserGuid----"asdayryt"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
连接数据库成功
queryUserRole连接成功
queryUserRole连接成功"student"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
连接数据库成功
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
进入getuserguid方法
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
registerUserGuid----"asdayryt"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
连接数据库成功
queryUserRole连接成功
queryUserRole连接成功"student"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
连接数据库成功
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
getUserTableSettings: EnvironemtType:3
Using local emulator
getUserTableSettings: EnvironemtType:3
getUserTableSettings: EnvironemtType:3
查看下当前的环境：  false
Express start on port 1337...
进入getuserguid方法
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
registerUserGuid----"asdayryt"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
连接数据库成功
连接数据库成功
queryUserRole连接成功
queryUserRole连接成功"student"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548126095,"nbf":1548126095,"exp":1548129995,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548126095,"nbf":1548126095,"exp":1548129995,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548126095,"nbf":1548126095,"exp":1548129995,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjYwOTUsIm5iZiI6MTU0ODEyNjA5NSwiZXhwIjoxNTQ4MTI5OTk1LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.XWzufBbyy-zJtEomWPKWLBIapXExH-HNcxUiPKuDcCcZUNBCIgTZTqDtAYqN79CjX1t6zMFaydwn9RMSSdQT5Qpx67NEko3JAHOFFeuRUpnhT9Y8iKY8NqHStV_5LZZjcx2s54VYLUAAuioJle89sOU7TixUoeolYMElbO3z7MgTxB_sJxg1HJyDb1E5r90jBXrT3DCu74Ntx0liM9URdVA2-wbBtZnwEazUKH8LNUYAyeFQpRYEgbp_ArT8crFBOnZrqwUlEwL5zWY2NFh5ngzUArSHmCZd7JA7BoleiDFegY_CkkJBXUXNF-SZdFjh9lW0zjptnZ6fnPhGlj6W9g","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjYwOTUsIm5iZiI6MTU0ODEyNjA5NSwiZXhwIjoxNTQ4MTI5OTk1LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.XWzufBbyy-zJtEomWPKWLBIapXExH-HNcxUiPKuDcCcZUNBCIgTZTqDtAYqN79CjX1t6zMFaydwn9RMSSdQT5Qpx67NEko3JAHOFFeuRUpnhT9Y8iKY8NqHStV_5LZZjcx2s54VYLUAAuioJle89sOU7TixUoeolYMElbO3z7MgTxB_sJxg1HJyDb1E5r90jBXrT3DCu74Ntx0liM9URdVA2-wbBtZnwEazUKH8LNUYAyeFQpRYEgbp_ArT8crFBOnZrqwUlEwL5zWY2NFh5ngzUArSHmCZd7JA7BoleiDFegY_CkkJBXUXNF-SZdFjh9lW0zjptnZ6fnPhGlj6W9g","locale":"zh","osVersion":"10.0.17134","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:44:37.309Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:44:37.309Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T02:44:37.309Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 33,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 1212,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 85495,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 1311,
           [Symbol(triggerId)]: 1212 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 ea 04 0e 03 6a 00 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51250410,
     responseTo: 106,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 35,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 1270,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 85498,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 1366,
           [Symbol(triggerId)]: 1270 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 ef 04 0e 03 6e 00 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51250415,
     responseTo: 110,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:01:31.759Z|728a0f57c30a673aa3a8ce32fde338469d5f2d1535bcbed2c919c666ca0998420c532a984a2afde1328c3b2aa358b72e6477a06339160f405598f55e02bc968c5535bf9f0f742858f5b7364ae848502447e351ac839d2a41a04e8f19c9d30df6f24750aa1b9361c3718996c79cfdb75d3b3829e05fe8c63fcfcb58804075f0cf1cfa71e246b733ce19b63475d68be840afacd6fd001d3bd0762c96890da895f25f86c9405fdc9b8b274dcaadbef17d76a93905f78a55a8b1f10f456c6054a8c8a126dd859c273c81a83ef478250ae46426eca4fb94a33fb1853e632a521d6ba84528ed55fe693d331fa594545c943a8d3c936c3504c2c5043fedeea0fc3b5e42
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:01:31.759Z|728a0f57c30a673aa3a8ce32fde338469d5f2d1535bcbed2c919c666ca0998420c532a984a2afde1328c3b2aa358b72e6477a06339160f405598f55e02bc968c5535bf9f0f742858f5b7364ae848502447e351ac839d2a41a04e8f19c9d30df6f24750aa1b9361c3718996c79cfdb75d3b3829e05fe8c63fcfcb58804075f0cf1cfa71e246b733ce19b63475d68be840afacd6fd001d3bd0762c96890da895f25f86c9405fdc9b8b274dcaadbef17d76a93905f78a55a8b1f10f456c6054a8c8a126dd859c273c81a83ef478250ae46426eca4fb94a33fb1853e632a521d6ba84528ed55fe693d331fa594545c943a8d3c936c3504c2c5043fedeea0fc3b5e42","clientSettings":""}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:01:31.759Z|728a0f57c30a673aa3a8ce32fde338469d5f2d1535bcbed2c919c666ca0998420c532a984a2afde1328c3b2aa358b72e6477a06339160f405598f55e02bc968c5535bf9f0f742858f5b7364ae848502447e351ac839d2a41a04e8f19c9d30df6f24750aa1b9361c3718996c79cfdb75d3b3829e05fe8c63fcfcb58804075f0cf1cfa71e246b733ce19b63475d68be840afacd6fd001d3bd0762c96890da895f25f86c9405fdc9b8b274dcaadbef17d76a93905f78a55a8b1f10f456c6054a8c8a126dd859c273c81a83ef478250ae46426eca4fb94a33fb1853e632a521d6ba84528ed55fe693d331fa594545c943a8d3c936c3504c2c5043fedeea0fc3b5e42\",\"clientSettings\":\"\",\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:01:31.759Z|728a0f57c30a673aa3a8ce32fde338469d5f2d1535bcbed2c919c666ca0998420c532a984a2afde1328c3b2aa358b72e6477a06339160f405598f55e02bc968c5535bf9f0f742858f5b7364ae848502447e351ac839d2a41a04e8f19c9d30df6f24750aa1b9361c3718996c79cfdb75d3b3829e05fe8c63fcfcb58804075f0cf1cfa71e246b733ce19b63475d68be840afacd6fd001d3bd0762c96890da895f25f86c9405fdc9b8b274dcaadbef17d76a93905f78a55a8b1f10f456c6054a8c8a126dd859c273c81a83ef478250ae46426eca4fb94a33fb1853e632a521d6ba84528ed55fe693d331fa594545c943a8d3c936c3504c2c5043fedeea0fc3b5e42","clientSettings":"","acceptedEula":true}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548126095,"nbf":1548126095,"exp":1548129995,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548126095,"nbf":1548126095,"exp":1548129995,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548126095,"nbf":1548126095,"exp":1548129995,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1548126095,"exp":1548129995,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888","user_name":"lancer88888","full_name":"lancer88888","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjYwOTUsIm5iZiI6MTU0ODEyNjA5NSwiZXhwIjoxNTQ4MTI5OTk1LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.XWzufBbyy-zJtEomWPKWLBIapXExH-HNcxUiPKuDcCcZUNBCIgTZTqDtAYqN79CjX1t6zMFaydwn9RMSSdQT5Qpx67NEko3JAHOFFeuRUpnhT9Y8iKY8NqHStV_5LZZjcx2s54VYLUAAuioJle89sOU7TixUoeolYMElbO3z7MgTxB_sJxg1HJyDb1E5r90jBXrT3DCu74Ntx0liM9URdVA2-wbBtZnwEazUKH8LNUYAyeFQpRYEgbp_ArT8crFBOnZrqwUlEwL5zWY2NFh5ngzUArSHmCZd7JA7BoleiDFegY_CkkJBXUXNF-SZdFjh9lW0zjptnZ6fnPhGlj6W9g"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjYwOTUsIm5iZiI6MTU0ODEyNjA5NSwiZXhwIjoxNTQ4MTI5OTk1LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.XWzufBbyy-zJtEomWPKWLBIapXExH-HNcxUiPKuDcCcZUNBCIgTZTqDtAYqN79CjX1t6zMFaydwn9RMSSdQT5Qpx67NEko3JAHOFFeuRUpnhT9Y8iKY8NqHStV_5LZZjcx2s54VYLUAAuioJle89sOU7TixUoeolYMElbO3z7MgTxB_sJxg1HJyDb1E5r90jBXrT3DCu74Ntx0liM9URdVA2-wbBtZnwEazUKH8LNUYAyeFQpRYEgbp_ArT8crFBOnZrqwUlEwL5zWY2NFh5ngzUArSHmCZd7JA7BoleiDFegY_CkkJBXUXNF-SZdFjh9lW0zjptnZ6fnPhGlj6W9g","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjYwOTUsIm5iZiI6MTU0ODEyNjA5NSwiZXhwIjoxNTQ4MTI5OTk1LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.XWzufBbyy-zJtEomWPKWLBIapXExH-HNcxUiPKuDcCcZUNBCIgTZTqDtAYqN79CjX1t6zMFaydwn9RMSSdQT5Qpx67NEko3JAHOFFeuRUpnhT9Y8iKY8NqHStV_5LZZjcx2s54VYLUAAuioJle89sOU7TixUoeolYMElbO3z7MgTxB_sJxg1HJyDb1E5r90jBXrT3DCu74Ntx0liM9URdVA2-wbBtZnwEazUKH8LNUYAyeFQpRYEgbp_ArT8crFBOnZrqwUlEwL5zWY2NFh5ngzUArSHmCZd7JA7BoleiDFegY_CkkJBXUXNF-SZdFjh9lW0zjptnZ6fnPhGlj6W9g","locale":"zh","osVersion":"10.0.17134","platform":"Windows Desktop Build (Win32)(x64)","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 51,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 2041,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 399852,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 2091,
           [Symbol(triggerId)]: 2041 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 0c 11 0e 03 a3 00 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51253516,
     responseTo: 163,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548126561,"nbf":1548126561,"exp":1548130461,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548126561,"nbf":1548126561,"exp":1548130461,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548126561,"nbf":1548126561,"exp":1548130461,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjY1NjEsIm5iZiI6MTU0ODEyNjU2MSwiZXhwIjoxNTQ4MTMwNDYxLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.LYH5I6kUO9VZeWuJhvU_HkLq0iYv7LZJuLoq8mFSnzjhk-nC6m0_VwzRj07TnEe3ly2yqAdSmoJ9CoU5nA0sRiUJKY4ja3CBl-uAZSy7oKiUDEKIOPrfjshcGZPajktSjCifoapsPB7lAsrQAdAIAsX_Fsse8cMj6-hNzVx5gSm-b8RwYtnXoDkchndBjid3YjI3mgkvk9XLiup1gmIPkTyMAMFDLMIlAvzy-J9W42lOObbd5IERnjiw7HO-0N2_iOJTTzjDq8lIbDMJy18chsRgKLYJF1XIDoY4_Ww5pFFUSVwB91dbLmSrU5bOH-s4EYQfugCQdpd1LoXNX8oqDQ","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjY1NjEsIm5iZiI6MTU0ODEyNjU2MSwiZXhwIjoxNTQ4MTMwNDYxLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.LYH5I6kUO9VZeWuJhvU_HkLq0iYv7LZJuLoq8mFSnzjhk-nC6m0_VwzRj07TnEe3ly2yqAdSmoJ9CoU5nA0sRiUJKY4ja3CBl-uAZSy7oKiUDEKIOPrfjshcGZPajktSjCifoapsPB7lAsrQAdAIAsX_Fsse8cMj6-hNzVx5gSm-b8RwYtnXoDkchndBjid3YjI3mgkvk9XLiup1gmIPkTyMAMFDLMIlAvzy-J9W42lOObbd5IERnjiw7HO-0N2_iOJTTzjDq8lIbDMJy18chsRgKLYJF1XIDoY4_Ww5pFFUSVwB91dbLmSrU5bOH-s4EYQfugCQdpd1LoXNX8oqDQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T03:09:17.437Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T03:09:17.437Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T03:09:17.437Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T03:09:17.437Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 69,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 2773,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 551193,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 2863,
           [Symbol(triggerId)]: 2773 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 c5 16 0e 03 e3 00 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51254981,
     responseTo: 227,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T03:09:17.437Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 71,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 2788,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 551194,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 2894,
           [Symbol(triggerId)]: 2788 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 c6 16 0e 03 e6 00 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51254982,
     responseTo: 230,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T03:09:17.437Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:09:17.455Z|9770352b1cbc1117c776e4e3ab169b3c5e001ede6e8a9a2c1a253af6d9676ffec8fa84d62673409d204976f6ff279f80b4245404198bab1f59a1f1c53aebb5d6d29561a15cc92f1dd5c0dd57e33ed53f1fcc676f8d35143896f13128c9a72e79b02edbe59b0ce6a38e339df00e82dbdc2f11d6c1075ac7a307c31f486cc5f71fd048bf8604eee8fed7c5138856350a631a545e6c7af07dec9e64ccc465f9543deb497426769d017cb3aaf50c9adb1acee82830ad6458654d00b3a5d7b3728bdee153ecda4493fde6228d55518d5439f989f0a00bc123fb177e5fce4f4a95b513186a4fc1d4091474fd03c138ebfd8a95d18d5d9089b5935e7b9cfde0186d3d8a
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T03:09:17.437Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:09:17.455Z|9770352b1cbc1117c776e4e3ab169b3c5e001ede6e8a9a2c1a253af6d9676ffec8fa84d62673409d204976f6ff279f80b4245404198bab1f59a1f1c53aebb5d6d29561a15cc92f1dd5c0dd57e33ed53f1fcc676f8d35143896f13128c9a72e79b02edbe59b0ce6a38e339df00e82dbdc2f11d6c1075ac7a307c31f486cc5f71fd048bf8604eee8fed7c5138856350a631a545e6c7af07dec9e64ccc465f9543deb497426769d017cb3aaf50c9adb1acee82830ad6458654d00b3a5d7b3728bdee153ecda4493fde6228d55518d5439f989f0a00bc123fb177e5fce4f4a95b513186a4fc1d4091474fd03c138ebfd8a95d18d5d9089b5935e7b9cfde0186d3d8a","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:09:17.455Z|9770352b1cbc1117c776e4e3ab169b3c5e001ede6e8a9a2c1a253af6d9676ffec8fa84d62673409d204976f6ff279f80b4245404198bab1f59a1f1c53aebb5d6d29561a15cc92f1dd5c0dd57e33ed53f1fcc676f8d35143896f13128c9a72e79b02edbe59b0ce6a38e339df00e82dbdc2f11d6c1075ac7a307c31f486cc5f71fd048bf8604eee8fed7c5138856350a631a545e6c7af07dec9e64ccc465f9543deb497426769d017cb3aaf50c9adb1acee82830ad6458654d00b3a5d7b3728bdee153ecda4493fde6228d55518d5439f989f0a00bc123fb177e5fce4f4a95b513186a4fc1d4091474fd03c138ebfd8a95d18d5d9089b5935e7b9cfde0186d3d8a\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:09:17.455Z|9770352b1cbc1117c776e4e3ab169b3c5e001ede6e8a9a2c1a253af6d9676ffec8fa84d62673409d204976f6ff279f80b4245404198bab1f59a1f1c53aebb5d6d29561a15cc92f1dd5c0dd57e33ed53f1fcc676f8d35143896f13128c9a72e79b02edbe59b0ce6a38e339df00e82dbdc2f11d6c1075ac7a307c31f486cc5f71fd048bf8604eee8fed7c5138856350a631a545e6c7af07dec9e64ccc465f9543deb497426769d017cb3aaf50c9adb1acee82830ad6458654d00b3a5d7b3728bdee153ecda4493fde6228d55518d5439f989f0a00bc123fb177e5fce4f4a95b513186a4fc1d4091474fd03c138ebfd8a95d18d5d9089b5935e7b9cfde0186d3d8a","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127169,"nbf":1548127169,"exp":1548131069,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127169,"nbf":1548127169,"exp":1548131069,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127169,"nbf":1548127169,"exp":1548131069,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjcxNjksIm5iZiI6MTU0ODEyNzE2OSwiZXhwIjoxNTQ4MTMxMDY5LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.TARpyZyfZ4pfxDk5IYQPoQ1ikBcal2btmM5QLjkgCucdARIP4pphyrE-R4t93FE0j4lfy0WF8rK0_BwBQqATXiJjp0CiE4D24F7WzutFHN9YppxZQf-Cd2hPpokQR0OXGSKfKac2gcMQQX69SyBFejBWNNbrcIjoc8jupO6JPL4QJLoY9TI3A-yrlMOfCa-7UVfa73-65J7PJtFCYasXtjbkuv1lDxCPmzN9tKkavxISLPVjoWFRynFjtNjdkQmXc8otMJpiPJvNQDUwwmiJHDJ2KseFqS8dKWpK2XdBBzHkIdAd2ByBT2TTJWQkGmdMApt6FFeHSC1k46Q6aBB2xQ","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjcxNjksIm5iZiI6MTU0ODEyNzE2OSwiZXhwIjoxNTQ4MTMxMDY5LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.TARpyZyfZ4pfxDk5IYQPoQ1ikBcal2btmM5QLjkgCucdARIP4pphyrE-R4t93FE0j4lfy0WF8rK0_BwBQqATXiJjp0CiE4D24F7WzutFHN9YppxZQf-Cd2hPpokQR0OXGSKfKac2gcMQQX69SyBFejBWNNbrcIjoc8jupO6JPL4QJLoY9TI3A-yrlMOfCa-7UVfa73-65J7PJtFCYasXtjbkuv1lDxCPmzN9tKkavxISLPVjoWFRynFjtNjdkQmXc8otMJpiPJvNQDUwwmiJHDJ2KseFqS8dKWpK2XdBBzHkIdAd2ByBT2TTJWQkGmdMApt6FFeHSC1k46Q6aBB2xQ","locale":"zh","osVersion":"10.0.17134","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T03:09:17.437Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T03:09:17.437Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T03:09:17.437Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 89,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 3636,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1159011,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 3738,
           [Symbol(triggerId)]: 3636 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 30 2e 0e 03 27 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51260976,
     responseTo: 295,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 91,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 3651,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1159012,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 3744,
           [Symbol(triggerId)]: 3651 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 31 2e 0e 03 29 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51260977,
     responseTo: 297,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:19:25.273Z|602f0ebb77b182cb8b8f558d9165a84e657b40cb80f3ee8ebcaa64668e61be0a96a85ad023da498a2e1651a316d13ad75f54f00dc6516b8a94115cb49708801ee4fc0405cda533eb5f2fd185db5e92c60178d523a6a6eb0be876f848c9a2d6505de0322b3b3f9b1158bd277aa97104fd3aca0258f46c393e07424b8b34e330b9941916e590879e38965225a371a89ccf601626a165f5344e4c59a0041efe5fec41165c89d224a5661d7f38546393e3f05f2a0a9b9e2a3e68ac70520198e85895ba6c47f867bf23a0f38d0646b0b06f8b8cadebab1d50bd9e1414f922a146b1f337d83559ad8e66fcad27b159fefd186c706dc2322ee35e244d948241cef0cebc
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:19:25.273Z|602f0ebb77b182cb8b8f558d9165a84e657b40cb80f3ee8ebcaa64668e61be0a96a85ad023da498a2e1651a316d13ad75f54f00dc6516b8a94115cb49708801ee4fc0405cda533eb5f2fd185db5e92c60178d523a6a6eb0be876f848c9a2d6505de0322b3b3f9b1158bd277aa97104fd3aca0258f46c393e07424b8b34e330b9941916e590879e38965225a371a89ccf601626a165f5344e4c59a0041efe5fec41165c89d224a5661d7f38546393e3f05f2a0a9b9e2a3e68ac70520198e85895ba6c47f867bf23a0f38d0646b0b06f8b8cadebab1d50bd9e1414f922a146b1f337d83559ad8e66fcad27b159fefd186c706dc2322ee35e244d948241cef0cebc","clientSettings":""}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:19:25.273Z|602f0ebb77b182cb8b8f558d9165a84e657b40cb80f3ee8ebcaa64668e61be0a96a85ad023da498a2e1651a316d13ad75f54f00dc6516b8a94115cb49708801ee4fc0405cda533eb5f2fd185db5e92c60178d523a6a6eb0be876f848c9a2d6505de0322b3b3f9b1158bd277aa97104fd3aca0258f46c393e07424b8b34e330b9941916e590879e38965225a371a89ccf601626a165f5344e4c59a0041efe5fec41165c89d224a5661d7f38546393e3f05f2a0a9b9e2a3e68ac70520198e85895ba6c47f867bf23a0f38d0646b0b06f8b8cadebab1d50bd9e1414f922a146b1f337d83559ad8e66fcad27b159fefd186c706dc2322ee35e244d948241cef0cebc\",\"clientSettings\":\"\",\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:19:25.273Z|602f0ebb77b182cb8b8f558d9165a84e657b40cb80f3ee8ebcaa64668e61be0a96a85ad023da498a2e1651a316d13ad75f54f00dc6516b8a94115cb49708801ee4fc0405cda533eb5f2fd185db5e92c60178d523a6a6eb0be876f848c9a2d6505de0322b3b3f9b1158bd277aa97104fd3aca0258f46c393e07424b8b34e330b9941916e590879e38965225a371a89ccf601626a165f5344e4c59a0041efe5fec41165c89d224a5661d7f38546393e3f05f2a0a9b9e2a3e68ac70520198e85895ba6c47f867bf23a0f38d0646b0b06f8b8cadebab1d50bd9e1414f922a146b1f337d83559ad8e66fcad27b159fefd186c706dc2322ee35e244d948241cef0cebc","clientSettings":"","acceptedEula":true}
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127282,"nbf":1548127282,"exp":1548131182,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127282,"nbf":1548127282,"exp":1548131182,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127282,"nbf":1548127282,"exp":1548131182,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0ODEyNzI4MiwibmJmIjoxNTQ4MTI3MjgyLCJleHAiOjE1NDgxMzExODIsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjIyMy4xMDQuMy4xOTUiLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.FHI6R8xmoOhqsVzD0waDC4jHHwVJIbcbHji7FxenVsPtqA15_neNpOMoZzu-y0420Lxo-__jnDL7bO6ogmRLrvAPpTw2hufOeZBVkI-9IVTJxnSjwKGsh6AD51AqTHbZo_VSFE6-v7XrixuCPaIb1FSHvFLMbmeSacCaIjIf7HwHPBBUJkWb4Qo2_pPWxupOt-Lu300-44Ecz0CAktcMTiTL5OCfVurAdZPlY9LUTYU_Rfz6Pl-iy8CqJsEbkoEoIIamMPVjlVykmPvX7jda1YnXpSVWWDfwQ6KitmYRP1tObcTfFwjBl7297XbIiTb2PvzTtIEh7xyXt-XHBXpPbw","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0ODEyNzI4MiwibmJmIjoxNTQ4MTI3MjgyLCJleHAiOjE1NDgxMzExODIsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjIyMy4xMDQuMy4xOTUiLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.FHI6R8xmoOhqsVzD0waDC4jHHwVJIbcbHji7FxenVsPtqA15_neNpOMoZzu-y0420Lxo-__jnDL7bO6ogmRLrvAPpTw2hufOeZBVkI-9IVTJxnSjwKGsh6AD51AqTHbZo_VSFE6-v7XrixuCPaIb1FSHvFLMbmeSacCaIjIf7HwHPBBUJkWb4Qo2_pPWxupOt-Lu300-44Ecz0CAktcMTiTL5OCfVurAdZPlY9LUTYU_Rfz6Pl-iy8CqJsEbkoEoIIamMPVjlVykmPvX7jda1YnXpSVWWDfwQ6KitmYRP1tObcTfFwjBl7297XbIiTb2PvzTtIEh7xyXt-XHBXpPbw","locale":"zh","osVersion":"10.0.17134","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
userEntity------{"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
-----getUserRoleRisky----2222222
rolestudent
isExistingUser111
updateExistingUser1111
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T03:21:18.962Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T03:21:18.962Z,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: '1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser2222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T03:21:18.962Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T03:21:18.962Z,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: '1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 113,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 4649,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1272717,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 4747,
           [Symbol(triggerId)]: 4649 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 2a 33 0e 03 75 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51262250,
     responseTo: 373,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T03:21:18.962Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 115,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 4684,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1272718,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 4795,
           [Symbol(triggerId)]: 4684 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 2c 33 0e 03 79 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51262252,
     responseTo: 377,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T03:21:18.962Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T03:21:18.978Z|3d327bb4205e2cd097e7f609eb6ecc1c9180846193c23671b6a1305befe23748b06eb5c7a37a98f4c6882c7ad867f5922f29f731c6510924d9b6719b4c20325b13dade8bd7bbe04439a5273384e82fb1f27c09837baac5c684f00fc95aa4cb15035f92489cf394e364b67c7bbeac56ed56998056b1f27114aaff96964368d99b36e67bbc464d58403776a44f761e3b009a0b69e87b6ef396acda640414554a6a6f98303217b69cb0776ab0227e7e0f6ac891232625df11150e4d7964401844febbf44f3254bc2aa947a9a4dcb4953e885bb4edb11037522d26984d6708a56cec3b21b54e086c1666e2581b32654d2ea45c5c8e9dd01cb4ffbc8a592835467fb9
user--------111{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T03:21:18.962Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}
userid--------111"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T03:21:18.978Z|3d327bb4205e2cd097e7f609eb6ecc1c9180846193c23671b6a1305befe23748b06eb5c7a37a98f4c6882c7ad867f5922f29f731c6510924d9b6719b4c20325b13dade8bd7bbe04439a5273384e82fb1f27c09837baac5c684f00fc95aa4cb15035f92489cf394e364b67c7bbeac56ed56998056b1f27114aaff96964368d99b36e67bbc464d58403776a44f761e3b009a0b69e87b6ef396acda640414554a6a6f98303217b69cb0776ab0227e7e0f6ac891232625df11150e4d7964401844febbf44f3254bc2aa947a9a4dcb4953e885bb4edb11037522d26984d6708a56cec3b21b54e086c1666e2581b32654d2ea45c5c8e9dd01cb4ffbc8a592835467fb9","clientSettings":""}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout\",\"oid\":\"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T03:21:18.978Z|3d327bb4205e2cd097e7f609eb6ecc1c9180846193c23671b6a1305befe23748b06eb5c7a37a98f4c6882c7ad867f5922f29f731c6510924d9b6719b4c20325b13dade8bd7bbe04439a5273384e82fb1f27c09837baac5c684f00fc95aa4cb15035f92489cf394e364b67c7bbeac56ed56998056b1f27114aaff96964368d99b36e67bbc464d58403776a44f761e3b009a0b69e87b6ef396acda640414554a6a6f98303217b69cb0776ab0227e7e0f6ac891232625df11150e4d7964401844febbf44f3254bc2aa947a9a4dcb4953e885bb4edb11037522d26984d6708a56cec3b21b54e086c1666e2581b32654d2ea45c5c8e9dd01cb4ffbc8a592835467fb9\",\"clientSettings\":\"\"}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T03:21:18.978Z|3d327bb4205e2cd097e7f609eb6ecc1c9180846193c23671b6a1305befe23748b06eb5c7a37a98f4c6882c7ad867f5922f29f731c6510924d9b6719b4c20325b13dade8bd7bbe04439a5273384e82fb1f27c09837baac5c684f00fc95aa4cb15035f92489cf394e364b67c7bbeac56ed56998056b1f27114aaff96964368d99b36e67bbc464d58403776a44f761e3b009a0b69e87b6ef396acda640414554a6a6f98303217b69cb0776ab0227e7e0f6ac891232625df11150e4d7964401844febbf44f3254bc2aa947a9a4dcb4953e885bb4edb11037522d26984d6708a56cec3b21b54e086c1666e2581b32654d2ea45c5c8e9dd01cb4ffbc8a592835467fb9","clientSettings":""}
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127282,"nbf":1548127282,"exp":1548131182,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127282,"nbf":1548127282,"exp":1548131182,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127282,"nbf":1548127282,"exp":1548131182,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1548127282,"exp":1548131182,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117","user_name":"test190117","full_name":"test190117","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0ODEyNzI4MiwibmJmIjoxNTQ4MTI3MjgyLCJleHAiOjE1NDgxMzExODIsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjIyMy4xMDQuMy4xOTUiLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.FHI6R8xmoOhqsVzD0waDC4jHHwVJIbcbHji7FxenVsPtqA15_neNpOMoZzu-y0420Lxo-__jnDL7bO6ogmRLrvAPpTw2hufOeZBVkI-9IVTJxnSjwKGsh6AD51AqTHbZo_VSFE6-v7XrixuCPaIb1FSHvFLMbmeSacCaIjIf7HwHPBBUJkWb4Qo2_pPWxupOt-Lu300-44Ecz0CAktcMTiTL5OCfVurAdZPlY9LUTYU_Rfz6Pl-iy8CqJsEbkoEoIIamMPVjlVykmPvX7jda1YnXpSVWWDfwQ6KitmYRP1tObcTfFwjBl7297XbIiTb2PvzTtIEh7xyXt-XHBXpPbw"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0ODEyNzI4MiwibmJmIjoxNTQ4MTI3MjgyLCJleHAiOjE1NDgxMzExODIsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjIyMy4xMDQuMy4xOTUiLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.FHI6R8xmoOhqsVzD0waDC4jHHwVJIbcbHji7FxenVsPtqA15_neNpOMoZzu-y0420Lxo-__jnDL7bO6ogmRLrvAPpTw2hufOeZBVkI-9IVTJxnSjwKGsh6AD51AqTHbZo_VSFE6-v7XrixuCPaIb1FSHvFLMbmeSacCaIjIf7HwHPBBUJkWb4Qo2_pPWxupOt-Lu300-44Ecz0CAktcMTiTL5OCfVurAdZPlY9LUTYU_Rfz6Pl-iy8CqJsEbkoEoIIamMPVjlVykmPvX7jda1YnXpSVWWDfwQ6KitmYRP1tObcTfFwjBl7297XbIiTb2PvzTtIEh7xyXt-XHBXpPbw","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0ODEyNzI4MiwibmJmIjoxNTQ4MTI3MjgyLCJleHAiOjE1NDgxMzExODIsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjIyMy4xMDQuMy4xOTUiLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.FHI6R8xmoOhqsVzD0waDC4jHHwVJIbcbHji7FxenVsPtqA15_neNpOMoZzu-y0420Lxo-__jnDL7bO6ogmRLrvAPpTw2hufOeZBVkI-9IVTJxnSjwKGsh6AD51AqTHbZo_VSFE6-v7XrixuCPaIb1FSHvFLMbmeSacCaIjIf7HwHPBBUJkWb4Qo2_pPWxupOt-Lu300-44Ecz0CAktcMTiTL5OCfVurAdZPlY9LUTYU_Rfz6Pl-iy8CqJsEbkoEoIIamMPVjlVykmPvX7jda1YnXpSVWWDfwQ6KitmYRP1tObcTfFwjBl7297XbIiTb2PvzTtIEh7xyXt-XHBXpPbw","locale":"zh","osVersion":"10.0.17134","platform":"Windows Desktop Build (Win32)(x64)","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T03:21:18.962Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  unique_name: 'test190117',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 131,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 5456,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1292049,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 5506,
           [Symbol(triggerId)]: 5456 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 21 34 0e 03 ae 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51262497,
     responseTo: 430,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127338,"nbf":1548127338,"exp":1548131238,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127338,"nbf":1548127338,"exp":1548131238,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127338,"nbf":1548127338,"exp":1548131238,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0ODEyNzMzOCwibmJmIjoxNTQ4MTI3MzM4LCJleHAiOjE1NDgxMzEyMzgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjIyMy4xMDQuMy4xOTUiLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.e24cbbCcOgq0YyB9JRtFpmIlHH8LWdHbs6mY1DfsHX5o4x-QdFc2lsCEgC0NUqgHc0VTUJ1od1TtRfx3nLi06zIXKAMZObQly64XaXHZTOANuRqWjYweG2gtHJFa8D2ugS3JtLMRXnFeCDuO3BF8-oq6I62eXnKou09YUP_81joI-kIT9ssA-oNfyLzxEpBrtNmRw6HmDqtlLw_Eov44X0DE3Igp08X5doIESA8TXrBQkIzpXfckJ1E8J0rlOFk5b-5NpKXncnIBrBLHrhDckoowOT5Ko7g-tUOGFLIRwB24oirwkUKOlPXlAOwdn_bphQHrK0YAbf0PYOufS8QpIw","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0ODEyNzMzOCwibmJmIjoxNTQ4MTI3MzM4LCJleHAiOjE1NDgxMzEyMzgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjIyMy4xMDQuMy4xOTUiLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.e24cbbCcOgq0YyB9JRtFpmIlHH8LWdHbs6mY1DfsHX5o4x-QdFc2lsCEgC0NUqgHc0VTUJ1od1TtRfx3nLi06zIXKAMZObQly64XaXHZTOANuRqWjYweG2gtHJFa8D2ugS3JtLMRXnFeCDuO3BF8-oq6I62eXnKou09YUP_81joI-kIT9ssA-oNfyLzxEpBrtNmRw6HmDqtlLw_Eov44X0DE3Igp08X5doIESA8TXrBQkIzpXfckJ1E8J0rlOFk5b-5NpKXncnIBrBLHrhDckoowOT5Ko7g-tUOGFLIRwB24oirwkUKOlPXlAOwdn_bphQHrK0YAbf0PYOufS8QpIw","locale":"zh","osVersion":"10.0.17134","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T03:21:18.962Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
userEntity------{"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T03:21:18.962Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T03:21:18.962Z","lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true},"exists":true}
isExistingUser111
updateExistingUser1111
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser2222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '7baa9cb0-4ee2-4737-98e0-34d0aa6edde3',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 145,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 6031,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1328066,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 6133,
           [Symbol(triggerId)]: 6031 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 2e 36 0e 03 e2 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51263022,
     responseTo: 482,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 147,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 6046,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1328066,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 6144,
           [Symbol(triggerId)]: 6046 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 2f 36 0e 03 e4 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51263023,
     responseTo: 484,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T03:22:14.328Z|5a9a6294ec4c09bb5715e45ce57049207546d4c39c6d9f272c98372fac16d8907faa46b95c99fe9bbd91264d8d281dad8a9cffe3cf56e9ee0b6e52a62e4b08d7518339f5cba4e2ba9bbc966e01961eb0cb6a4320ef4660696dab424762fb1c1fb746589a941ae222076bbc52b9b6631846cf2b676422a0509447e3ca78da5ead98067932ab1d95907cab5adad71c4fca11a1774d03307d56fb2ee87abe19af760bdbb715b328db0e5606a2a9ab62605bdf5f69ddb566e061435f0920f34ee43f65d205c0b4569ca84abd3465fb6b032b59a022693b32289051952bf48c086e92cbd5a19062c101b65d2dded8b8c2e3b71adb72c94c7d4fc0b88ae68f169f8be7
user--------111{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"acceptedEula":true}
userid--------111"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T03:22:14.328Z|5a9a6294ec4c09bb5715e45ce57049207546d4c39c6d9f272c98372fac16d8907faa46b95c99fe9bbd91264d8d281dad8a9cffe3cf56e9ee0b6e52a62e4b08d7518339f5cba4e2ba9bbc966e01961eb0cb6a4320ef4660696dab424762fb1c1fb746589a941ae222076bbc52b9b6631846cf2b676422a0509447e3ca78da5ead98067932ab1d95907cab5adad71c4fca11a1774d03307d56fb2ee87abe19af760bdbb715b328db0e5606a2a9ab62605bdf5f69ddb566e061435f0920f34ee43f65d205c0b4569ca84abd3465fb6b032b59a022693b32289051952bf48c086e92cbd5a19062c101b65d2dded8b8c2e3b71adb72c94c7d4fc0b88ae68f169f8be7","clientSettings":""}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex\",\"oid\":\"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T03:22:14.328Z|5a9a6294ec4c09bb5715e45ce57049207546d4c39c6d9f272c98372fac16d8907faa46b95c99fe9bbd91264d8d281dad8a9cffe3cf56e9ee0b6e52a62e4b08d7518339f5cba4e2ba9bbc966e01961eb0cb6a4320ef4660696dab424762fb1c1fb746589a941ae222076bbc52b9b6631846cf2b676422a0509447e3ca78da5ead98067932ab1d95907cab5adad71c4fca11a1774d03307d56fb2ee87abe19af760bdbb715b328db0e5606a2a9ab62605bdf5f69ddb566e061435f0920f34ee43f65d205c0b4569ca84abd3465fb6b032b59a022693b32289051952bf48c086e92cbd5a19062c101b65d2dded8b8c2e3b71adb72c94c7d4fc0b88ae68f169f8be7\",\"clientSettings\":\"\"}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T03:22:14.328Z|5a9a6294ec4c09bb5715e45ce57049207546d4c39c6d9f272c98372fac16d8907faa46b95c99fe9bbd91264d8d281dad8a9cffe3cf56e9ee0b6e52a62e4b08d7518339f5cba4e2ba9bbc966e01961eb0cb6a4320ef4660696dab424762fb1c1fb746589a941ae222076bbc52b9b6631846cf2b676422a0509447e3ca78da5ead98067932ab1d95907cab5adad71c4fca11a1774d03307d56fb2ee87abe19af760bdbb715b328db0e5606a2a9ab62605bdf5f69ddb566e061435f0920f34ee43f65d205c0b4569ca84abd3465fb6b032b59a022693b32289051952bf48c086e92cbd5a19062c101b65d2dded8b8c2e3b71adb72c94c7d4fc0b88ae68f169f8be7","clientSettings":""}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127552,"nbf":1548127552,"exp":1548131452,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127552,"nbf":1548127552,"exp":1548131452,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127552,"nbf":1548127552,"exp":1548131452,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjc1NTIsIm5iZiI6MTU0ODEyNzU1MiwiZXhwIjoxNTQ4MTMxNDUyLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.EX_-Gi5Mgu-Z69uPFh20GPeq9Qcp7wuH4DwKXJTM64vtX1tU8H_PPn1pBqdHjbbxTXQcyYpJRwhg5bUUJ0RY8R3ii28ootlnFYT3zMCOI6nZfd67I8P2OJXI-0hY0IQPHSmmoX9BIGqNMdv9GJrAfzIvz9neWOEe8TeUjwGwejHEwwfgIXeLvH6Z6b-ZRSchsjrWgb7yXt8qf5b1MlNzt3-_VtZSQHNYRIR7sRhJ7gUswtznGZ739ZPUVLvDsuOxjIgzbldNBh_0UuhU9IAIj_LFVV2scT6fQf0kMZVzx7ys46ny8L7ybehToJynp9ZxJgldhMjghkKWX678X3YUkA","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjc1NTIsIm5iZiI6MTU0ODEyNzU1MiwiZXhwIjoxNTQ4MTMxNDUyLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.EX_-Gi5Mgu-Z69uPFh20GPeq9Qcp7wuH4DwKXJTM64vtX1tU8H_PPn1pBqdHjbbxTXQcyYpJRwhg5bUUJ0RY8R3ii28ootlnFYT3zMCOI6nZfd67I8P2OJXI-0hY0IQPHSmmoX9BIGqNMdv9GJrAfzIvz9neWOEe8TeUjwGwejHEwwfgIXeLvH6Z6b-ZRSchsjrWgb7yXt8qf5b1MlNzt3-_VtZSQHNYRIR7sRhJ7gUswtznGZ739ZPUVLvDsuOxjIgzbldNBh_0UuhU9IAIj_LFVV2scT6fQf0kMZVzx7ys46ny8L7ybehToJynp9ZxJgldhMjghkKWX678X3YUkA","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T03:25:48.237Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T03:25:48.237Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T03:25:48.237Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T03:25:48.237Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 171,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 7059,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1541993,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 7159,
           [Symbol(triggerId)]: 7059 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 b2 3e 0e 03 34 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51265202,
     responseTo: 564,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T03:25:48.237Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 169,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 7051,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1541994,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 7153,
           [Symbol(triggerId)]: 7051 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 b1 3e 0e 03 33 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51265201,
     responseTo: 563,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T03:25:48.237Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:25:48.255Z|09c87f9f8d07f82e001460015496096aff47abc96f0fd8ae20ce7fad36edc19a31758ccadd70189ef8e64a47fc593e9340a4daccbdc627770875bba299b9fe87ed574fa5f6e0c88de13ee9c9efb84e32eb69cf1aad55e63d773e45efcd29afe65d02bbbb50fd20d4129db57fe841d4cd2d8115726854039a52d3994746268e4604396a9b9c8900980236588e2954e6df80447fe6a44b56e61157b79fdd58c5bd652ecee2c513693d1d33188d9da0c520e29659186d0788de0d124ba9ba69d9ec3ed1fb6f4abe2f22e46b6a47b5af341aff32e9ec9d5c9eac39599a7ad942482997523f0b64b8124e8902ea0549fdda1567e78ea64dc687a4d8d23cee1c885f8b
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T03:25:48.237Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:25:48.255Z|09c87f9f8d07f82e001460015496096aff47abc96f0fd8ae20ce7fad36edc19a31758ccadd70189ef8e64a47fc593e9340a4daccbdc627770875bba299b9fe87ed574fa5f6e0c88de13ee9c9efb84e32eb69cf1aad55e63d773e45efcd29afe65d02bbbb50fd20d4129db57fe841d4cd2d8115726854039a52d3994746268e4604396a9b9c8900980236588e2954e6df80447fe6a44b56e61157b79fdd58c5bd652ecee2c513693d1d33188d9da0c520e29659186d0788de0d124ba9ba69d9ec3ed1fb6f4abe2f22e46b6a47b5af341aff32e9ec9d5c9eac39599a7ad942482997523f0b64b8124e8902ea0549fdda1567e78ea64dc687a4d8d23cee1c885f8b","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:25:48.255Z|09c87f9f8d07f82e001460015496096aff47abc96f0fd8ae20ce7fad36edc19a31758ccadd70189ef8e64a47fc593e9340a4daccbdc627770875bba299b9fe87ed574fa5f6e0c88de13ee9c9efb84e32eb69cf1aad55e63d773e45efcd29afe65d02bbbb50fd20d4129db57fe841d4cd2d8115726854039a52d3994746268e4604396a9b9c8900980236588e2954e6df80447fe6a44b56e61157b79fdd58c5bd652ecee2c513693d1d33188d9da0c520e29659186d0788de0d124ba9ba69d9ec3ed1fb6f4abe2f22e46b6a47b5af341aff32e9ec9d5c9eac39599a7ad942482997523f0b64b8124e8902ea0549fdda1567e78ea64dc687a4d8d23cee1c885f8b\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:25:48.255Z|09c87f9f8d07f82e001460015496096aff47abc96f0fd8ae20ce7fad36edc19a31758ccadd70189ef8e64a47fc593e9340a4daccbdc627770875bba299b9fe87ed574fa5f6e0c88de13ee9c9efb84e32eb69cf1aad55e63d773e45efcd29afe65d02bbbb50fd20d4129db57fe841d4cd2d8115726854039a52d3994746268e4604396a9b9c8900980236588e2954e6df80447fe6a44b56e61157b79fdd58c5bd652ecee2c513693d1d33188d9da0c520e29659186d0788de0d124ba9ba69d9ec3ed1fb6f4abe2f22e46b6a47b5af341aff32e9ec9d5c9eac39599a7ad942482997523f0b64b8124e8902ea0549fdda1567e78ea64dc687a4d8d23cee1c885f8b","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127810,"nbf":1548127810,"exp":1548131710,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127810,"nbf":1548127810,"exp":1548131710,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127810,"nbf":1548127810,"exp":1548131710,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjc4MTAsIm5iZiI6MTU0ODEyNzgxMCwiZXhwIjoxNTQ4MTMxNzEwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.O6aWYeaRVFycuXe897-KhJCXmwAfY52q5cV3CaNks7nLsJmnM5OSc5HyPq1Zvn_25gVKFdkz7QL7h3ALpI6-TOceCv92GrjrkjeZQ8JrXKvSv2imHF7AanijlNRBdGv6LkpwzHnEPJ1AYULHwmBNWe2ia_fj97onu5pkFGhKsQqvHCSUbRax3wlAySHvHiZYfbG9729WpK-Y-LNADGKqGwGB0XeTEIuMp_mjja1iFQp77-4P3piEPomfokKwqcwNMyassOj_D7T2a8xIAFpcyjyCgJNTVnzKiMm43Vzgqdjp_eZ88zvzlLGU04DF3mjkq3dbb50kFHRVDsU1_wC2Ug","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjc4MTAsIm5iZiI6MTU0ODEyNzgxMCwiZXhwIjoxNTQ4MTMxNzEwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.O6aWYeaRVFycuXe897-KhJCXmwAfY52q5cV3CaNks7nLsJmnM5OSc5HyPq1Zvn_25gVKFdkz7QL7h3ALpI6-TOceCv92GrjrkjeZQ8JrXKvSv2imHF7AanijlNRBdGv6LkpwzHnEPJ1AYULHwmBNWe2ia_fj97onu5pkFGhKsQqvHCSUbRax3wlAySHvHiZYfbG9729WpK-Y-LNADGKqGwGB0XeTEIuMp_mjja1iFQp77-4P3piEPomfokKwqcwNMyassOj_D7T2a8xIAFpcyjyCgJNTVnzKiMm43Vzgqdjp_eZ88zvzlLGU04DF3mjkq3dbb50kFHRVDsU1_wC2Ug","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T03:25:48.237Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T03:25:48.237Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T03:25:48.237Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 191,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 7920,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1800156,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 7990,
           [Symbol(triggerId)]: 7920 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 eb 48 0e 03 75 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51267819,
     responseTo: 629,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 189,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 7912,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1800157,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 8020,
           [Symbol(triggerId)]: 7912 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 ed 48 0e 03 77 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51267821,
     responseTo: 631,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:30:06.418Z|8a8dcae7ac45890fbe6f73127363bb8db4154258585648c5fb43f43e9c75eb3ab456226a537b2c88c7285124c71c3e54b9fc5783c120410d70db2adbe38c1d026de8b84582e2b368fc0f38de776c124f99cbf800e95505705a8ff1877c2ed879283ed16b0ba75eaebd0b9a52255d4f61bd45ef5e73714500121d74d1bbe8750d063b17d5307c761dcc03c6e3182420a25cb8acd20ce0606fe239e49b10f8b9a80ef6ed5a2e857566eb0ab5e0b63386a91e73392972e93e14c16d0267184496a29daac420c81a68304c0b2a5db54479840d55a632b54b070925356ee1a56448044956f696aeee5884a56a3b710a6cbfc7f7ea88de308cfe2e2405f7a69d8cd09b
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:30:06.418Z|8a8dcae7ac45890fbe6f73127363bb8db4154258585648c5fb43f43e9c75eb3ab456226a537b2c88c7285124c71c3e54b9fc5783c120410d70db2adbe38c1d026de8b84582e2b368fc0f38de776c124f99cbf800e95505705a8ff1877c2ed879283ed16b0ba75eaebd0b9a52255d4f61bd45ef5e73714500121d74d1bbe8750d063b17d5307c761dcc03c6e3182420a25cb8acd20ce0606fe239e49b10f8b9a80ef6ed5a2e857566eb0ab5e0b63386a91e73392972e93e14c16d0267184496a29daac420c81a68304c0b2a5db54479840d55a632b54b070925356ee1a56448044956f696aeee5884a56a3b710a6cbfc7f7ea88de308cfe2e2405f7a69d8cd09b","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:30:06.418Z|8a8dcae7ac45890fbe6f73127363bb8db4154258585648c5fb43f43e9c75eb3ab456226a537b2c88c7285124c71c3e54b9fc5783c120410d70db2adbe38c1d026de8b84582e2b368fc0f38de776c124f99cbf800e95505705a8ff1877c2ed879283ed16b0ba75eaebd0b9a52255d4f61bd45ef5e73714500121d74d1bbe8750d063b17d5307c761dcc03c6e3182420a25cb8acd20ce0606fe239e49b10f8b9a80ef6ed5a2e857566eb0ab5e0b63386a91e73392972e93e14c16d0267184496a29daac420c81a68304c0b2a5db54479840d55a632b54b070925356ee1a56448044956f696aeee5884a56a3b710a6cbfc7f7ea88de308cfe2e2405f7a69d8cd09b\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:30:06.418Z|8a8dcae7ac45890fbe6f73127363bb8db4154258585648c5fb43f43e9c75eb3ab456226a537b2c88c7285124c71c3e54b9fc5783c120410d70db2adbe38c1d026de8b84582e2b368fc0f38de776c124f99cbf800e95505705a8ff1877c2ed879283ed16b0ba75eaebd0b9a52255d4f61bd45ef5e73714500121d74d1bbe8750d063b17d5307c761dcc03c6e3182420a25cb8acd20ce0606fe239e49b10f8b9a80ef6ed5a2e857566eb0ab5e0b63386a91e73392972e93e14c16d0267184496a29daac420c81a68304c0b2a5db54479840d55a632b54b070925356ee1a56448044956f696aeee5884a56a3b710a6cbfc7f7ea88de308cfe2e2405f7a69d8cd09b","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127927,"nbf":1548127927,"exp":1548131827,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127927,"nbf":1548127927,"exp":1548131827,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548127927,"nbf":1548127927,"exp":1548131827,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"223.104.3.195","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjc5MjcsIm5iZiI6MTU0ODEyNzkyNywiZXhwIjoxNTQ4MTMxODI3LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.htiOkn-loj9QR-iiTuvfdI1v7slQzwXDbhvmSnBa8ebmNHK3JTGhCS4Qx7uOzgbdZcve2kvaEXW76eD5s6d6hkcJOWrrzRSF6I2K61hcsJhb6Tetpo0n3CZiV2o1q38yg_EbWrM2MxaiY9BQuiPTWQaxEXQJRttJ8jjwrqYzIoJjibk5DWpkKcUAT-KxcoS9ll9_MltcklSRm0elLCpk87h8LrYaZ-XvcSL_GKMimGj0xRXAAoNc1pY74V5OO1vJv4LWO3zAEQ-aps7XpwcTNo_i-0zyzYTQPn7LzJz-h60BsD7meMwE9VlK_q2jZiWa2DYXUPLzytw_YSkIaRQF5Q","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMjc5MjcsIm5iZiI6MTU0ODEyNzkyNywiZXhwIjoxNTQ4MTMxODI3LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIyMjMuMTA0LjMuMTk1Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.htiOkn-loj9QR-iiTuvfdI1v7slQzwXDbhvmSnBa8ebmNHK3JTGhCS4Qx7uOzgbdZcve2kvaEXW76eD5s6d6hkcJOWrrzRSF6I2K61hcsJhb6Tetpo0n3CZiV2o1q38yg_EbWrM2MxaiY9BQuiPTWQaxEXQJRttJ8jjwrqYzIoJjibk5DWpkKcUAT-KxcoS9ll9_MltcklSRm0elLCpk87h8LrYaZ-XvcSL_GKMimGj0xRXAAoNc1pY74V5OO1vJv4LWO3zAEQ-aps7XpwcTNo_i-0zyzYTQPn7LzJz-h60BsD7meMwE9VlK_q2jZiWa2DYXUPLzytw_YSkIaRQF5Q","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T03:32:03.528Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T03:32:03.528Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T03:32:03.528Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T03:32:03.528Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 213,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 8932,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1917284,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 9034,
           [Symbol(triggerId)]: 8932 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 4e 4e 0e 03 c4 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51269198,
     responseTo: 708,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T03:32:03.528Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 215,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 8940,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1917285,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 9040,
           [Symbol(triggerId)]: 8940 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 50 4e 0e 03 c7 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51269200,
     responseTo: 711,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T03:32:03.528Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:32:03.547Z|2499abda4423214b5d4b28a14e80f495bf2a0180098669b1df5e588e393d86cf4bad4df82bae2f838d7bd3974c961dc4d9b896e588d92a1d328a8ceebff09ebd275ab5df61206f5e2dc2a6d1c93ec35b729f548a43d5bb1ea0d4fc0faf4021b4266376496d44c6b8e7234395ccce682b8c3dfe8f8be0cfa8d884a20733b41a0ebcae7dd18b4638785a20ddfd9819aa5f8db8227f595d111dcc27d407f464e627504d0bd46857f47908fe91cd09b51ef182db6f303e027c7ac5a38fe8b9896ba1736db5fc8d36d8ad670c82ff1d52965c6d314675e01512096dcbf647458bb4d61f3334c06d531c73694bde0d708af2472f67f370a290e46f832962d40dad792b
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T03:32:03.528Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:32:03.547Z|2499abda4423214b5d4b28a14e80f495bf2a0180098669b1df5e588e393d86cf4bad4df82bae2f838d7bd3974c961dc4d9b896e588d92a1d328a8ceebff09ebd275ab5df61206f5e2dc2a6d1c93ec35b729f548a43d5bb1ea0d4fc0faf4021b4266376496d44c6b8e7234395ccce682b8c3dfe8f8be0cfa8d884a20733b41a0ebcae7dd18b4638785a20ddfd9819aa5f8db8227f595d111dcc27d407f464e627504d0bd46857f47908fe91cd09b51ef182db6f303e027c7ac5a38fe8b9896ba1736db5fc8d36d8ad670c82ff1d52965c6d314675e01512096dcbf647458bb4d61f3334c06d531c73694bde0d708af2472f67f370a290e46f832962d40dad792b","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:32:03.547Z|2499abda4423214b5d4b28a14e80f495bf2a0180098669b1df5e588e393d86cf4bad4df82bae2f838d7bd3974c961dc4d9b896e588d92a1d328a8ceebff09ebd275ab5df61206f5e2dc2a6d1c93ec35b729f548a43d5bb1ea0d4fc0faf4021b4266376496d44c6b8e7234395ccce682b8c3dfe8f8be0cfa8d884a20733b41a0ebcae7dd18b4638785a20ddfd9819aa5f8db8227f595d111dcc27d407f464e627504d0bd46857f47908fe91cd09b51ef182db6f303e027c7ac5a38fe8b9896ba1736db5fc8d36d8ad670c82ff1d52965c6d314675e01512096dcbf647458bb4d61f3334c06d531c73694bde0d708af2472f67f370a290e46f832962d40dad792b\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T03:32:03.547Z|2499abda4423214b5d4b28a14e80f495bf2a0180098669b1df5e588e393d86cf4bad4df82bae2f838d7bd3974c961dc4d9b896e588d92a1d328a8ceebff09ebd275ab5df61206f5e2dc2a6d1c93ec35b729f548a43d5bb1ea0d4fc0faf4021b4266376496d44c6b8e7234395ccce682b8c3dfe8f8be0cfa8d884a20733b41a0ebcae7dd18b4638785a20ddfd9819aa5f8db8227f595d111dcc27d407f464e627504d0bd46857f47908fe91cd09b51ef182db6f303e027c7ac5a38fe8b9896ba1736db5fc8d36d8ad670c82ff1d52965c6d314675e01512096dcbf647458bb4d61f3334c06d531c73694bde0d708af2472f67f370a290e46f832962d40dad792b","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547653456,"exp":1547653460,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888","user_name":"lancer88888","full_name":"lancer88888","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"red"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T03:32:03.528Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  skin: 'red' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 231,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 9729,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 2860539,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 9779,
           [Symbol(triggerId)]: 9729 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 bc 6f 0e 03 fc 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51277756,
     responseTo: 764,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547653456,"exp":1547653460,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888","user_name":"lancer88888","full_name":"lancer88888","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"red"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T03:32:03.528Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  skin: 'red' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 243,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 10240,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 3672174,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 10290,
           [Symbol(triggerId)]: 10240 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 7a 8a 0e 03 24 03 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51284602,
     responseTo: 804,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
进入eula方法
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----user{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":""}
action: eula  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"291","build":"10506000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}
eeeewwwwww
updateEula-------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":""}
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
连接数据库成功
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  unique_name: 'test190117',
  acceptedEula: true }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 255,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 10753,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 12746205,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 10803,
           [Symbol(triggerId)]: 10753 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 47 b2 0f 03 4c 03 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51360327,
     responseTo: 844,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
进入eula方法
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----user{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":""}
action: eula  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"291","build":"10506000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}
eeeewwwwww
updateEula-------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":""}
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c40b7714ec2320d71f25135","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"7baa9cb0-4ee2-4737-98e0-34d0aa6edde3","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  unique_name: 'test190117',
  acceptedEula: true }
连接数据库成功
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 267,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 11261,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 12958869,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 11311,
           [Symbol(triggerId)]: 11261 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 4d b9 0f 03 74 03 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51362125,
     responseTo: 884,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg","build":"10506000","clientVersion":"291","displayVersion":"1.5.6","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T03:32:03.528Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T03:32:03.528Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":"2019-01-22T03:32:03.528Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 281,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 11842,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 13365825,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 11944,
           [Symbol(triggerId)]: 11842 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 b3 c6 0f 03 a9 03 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51365555,
     responseTo: 937,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 283,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 11850,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 13365827,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 11950,
           [Symbol(triggerId)]: 11850 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 b4 c6 0f 03 aa 03 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51365556,
     responseTo: 938,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:42:52.088Z|7accefad9fd63ff3312c8e74379c3340528448ea686a09f4c4039c5dacb31c28603847e2530783096eec245ad7d2d308e4e235e407c88995020d780ae34fd7721001646511f1e44fdda31c4442960c43f2e63a83e9ae712e8f3dce1d92aeb8cd8d2408670bada61b09e42c662ae5f8769fd0c834d92a2756463cda434a57b29bfcc515c9999328a234b8e8c0fa2ab32f9409377c60ba44a5ada6cb361eb5c91a44d979e605ecb5e8afafe46de03fb4142a5b09b422aed9aac829bf557815122ec7c46871fe0ea0fa5bfa306a5bc2f277ad7d158fb1a772b81c9adcd5deaf26e40c388bdb3dd1d9635926980760208b548264880a604460188e80deafee009e50
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:42:52.088Z|7accefad9fd63ff3312c8e74379c3340528448ea686a09f4c4039c5dacb31c28603847e2530783096eec245ad7d2d308e4e235e407c88995020d780ae34fd7721001646511f1e44fdda31c4442960c43f2e63a83e9ae712e8f3dce1d92aeb8cd8d2408670bada61b09e42c662ae5f8769fd0c834d92a2756463cda434a57b29bfcc515c9999328a234b8e8c0fa2ab32f9409377c60ba44a5ada6cb361eb5c91a44d979e605ecb5e8afafe46de03fb4142a5b09b422aed9aac829bf557815122ec7c46871fe0ea0fa5bfa306a5bc2f277ad7d158fb1a772b81c9adcd5deaf26e40c388bdb3dd1d9635926980760208b548264880a604460188e80deafee009e50","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:42:52.088Z|7accefad9fd63ff3312c8e74379c3340528448ea686a09f4c4039c5dacb31c28603847e2530783096eec245ad7d2d308e4e235e407c88995020d780ae34fd7721001646511f1e44fdda31c4442960c43f2e63a83e9ae712e8f3dce1d92aeb8cd8d2408670bada61b09e42c662ae5f8769fd0c834d92a2756463cda434a57b29bfcc515c9999328a234b8e8c0fa2ab32f9409377c60ba44a5ada6cb361eb5c91a44d979e605ecb5e8afafe46de03fb4142a5b09b422aed9aac829bf557815122ec7c46871fe0ea0fa5bfa306a5bc2f277ad7d158fb1a772b81c9adcd5deaf26e40c388bdb3dd1d9635926980760208b548264880a604460188e80deafee009e50\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:42:52.088Z|7accefad9fd63ff3312c8e74379c3340528448ea686a09f4c4039c5dacb31c28603847e2530783096eec245ad7d2d308e4e235e407c88995020d780ae34fd7721001646511f1e44fdda31c4442960c43f2e63a83e9ae712e8f3dce1d92aeb8cd8d2408670bada61b09e42c662ae5f8769fd0c834d92a2756463cda434a57b29bfcc515c9999328a234b8e8c0fa2ab32f9409377c60ba44a5ada6cb361eb5c91a44d979e605ecb5e8afafe46de03fb4142a5b09b422aed9aac829bf557815122ec7c46871fe0ea0fa5bfa306a5bc2f277ad7d158fb1a772b81c9adcd5deaf26e40c388bdb3dd1d9635926980760208b548264880a604460188e80deafee009e50","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
进入getuserguid方法
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"asdasdasdassd"}
eeeewwwwww
registerUserGuid----"asdasdasdassd"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"asdasdasdassd"}
eeeewwwwww
queryUserRole连接成功
连接数据库成功
queryUserRole连接成功"student"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
连接数据库成功
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139485,"nbf":1548139485,"exp":1548143385,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139485,"nbf":1548139485,"exp":1548143385,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139485,"nbf":1548139485,"exp":1548143385,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMzk0ODUsIm5iZiI6MTU0ODEzOTQ4NSwiZXhwIjoxNTQ4MTQzMzg1LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.guymptznfPRybIh3Edmrj7cnPW5d4mfwcJQT0gUR4BuSjaadbeCxzpbw24NciXulemKe9I8q0JxV5finI5CYvYZdlSYptMnsF8sX8RUJdwG6Rzb80J2A3XLTfBvJAABJ3tBxPOzg6iErbQW4mRxew62CikygYoqPcMxwP0mW74WElqfvL0CW1ulUNEi1D7Mv4KplzHI1Q5KEYYIyTPn4lmJeDO0Hp5mW3X2dJNxTYbptl9N27s8yn0ryNdu9-etZrOilfJXk-gCj1aJbYGh3XHs1j2S0sNXUKswKflrHxYxuZIFq3HSLROeIVWqWouCVUGq07OGMu7UpSzX_vfb3bA","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMzk0ODUsIm5iZiI6MTU0ODEzOTQ4NSwiZXhwIjoxNTQ4MTQzMzg1LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.guymptznfPRybIh3Edmrj7cnPW5d4mfwcJQT0gUR4BuSjaadbeCxzpbw24NciXulemKe9I8q0JxV5finI5CYvYZdlSYptMnsF8sX8RUJdwG6Rzb80J2A3XLTfBvJAABJ3tBxPOzg6iErbQW4mRxew62CikygYoqPcMxwP0mW74WElqfvL0CW1ulUNEi1D7Mv4KplzHI1Q5KEYYIyTPn4lmJeDO0Hp5mW3X2dJNxTYbptl9N27s8yn0ryNdu9-etZrOilfJXk-gCj1aJbYGh3XHs1j2S0sNXUKswKflrHxYxuZIFq3HSLROeIVWqWouCVUGq07OGMu7UpSzX_vfb3bA","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastLicenseCheck":null,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","licenseType":null,"clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T06:44:41.463Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T06:44:41.463Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T06:44:41.463Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T06:44:41.463Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 327,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 13609,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 13475217,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 13709,
           [Symbol(triggerId)]: 13609 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 01 cb 0f 03 31 04 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51366657,
     responseTo: 1073,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T06:44:41.463Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 325,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 13601,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 13475219,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 13703,
           [Symbol(triggerId)]: 13601 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 02 cb 0f 03 32 04 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51366658,
     responseTo: 1074,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T06:44:41.463Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:44:41.479Z|10e6ede9a165e1d3eb182343c316ccefb1ea2c8f17eaea8a7b9725b1259688d2a3bac7e0b53e754e72698ab9813275521a2348a61c3ec87be85dac109e97d46986fe26faecbcfa49b6d5a89fd359e2c0c7364a38fd9292a44748b1d2596f75f57f76aa433dab6d6972d1678516532fc99902ab40fdaff82d2d542e1022eaa722d69063040b11ba5411f95668d2949d2a78c1c638d65bf73c46d355cfe66587c229cca379d37e889b83408d66f102a05504eb8a01d73c4b2ebd7369f641db280b31bb874a426aff5e80d3c5335a84869126ff50b38b21231d4094d99c6e268ebfee546106507fd3db3a7cad46d204dcafc2c3a293028fdcc764d9de15092df68c
user--------111{"_id":"5c4174698e327b555eb17ad0","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T06:44:41.463Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":3,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:44:41.479Z|10e6ede9a165e1d3eb182343c316ccefb1ea2c8f17eaea8a7b9725b1259688d2a3bac7e0b53e754e72698ab9813275521a2348a61c3ec87be85dac109e97d46986fe26faecbcfa49b6d5a89fd359e2c0c7364a38fd9292a44748b1d2596f75f57f76aa433dab6d6972d1678516532fc99902ab40fdaff82d2d542e1022eaa722d69063040b11ba5411f95668d2949d2a78c1c638d65bf73c46d355cfe66587c229cca379d37e889b83408d66f102a05504eb8a01d73c4b2ebd7369f641db280b31bb874a426aff5e80d3c5335a84869126ff50b38b21231d4094d99c6e268ebfee546106507fd3db3a7cad46d204dcafc2c3a293028fdcc764d9de15092df68c","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:44:41.479Z|10e6ede9a165e1d3eb182343c316ccefb1ea2c8f17eaea8a7b9725b1259688d2a3bac7e0b53e754e72698ab9813275521a2348a61c3ec87be85dac109e97d46986fe26faecbcfa49b6d5a89fd359e2c0c7364a38fd9292a44748b1d2596f75f57f76aa433dab6d6972d1678516532fc99902ab40fdaff82d2d542e1022eaa722d69063040b11ba5411f95668d2949d2a78c1c638d65bf73c46d355cfe66587c229cca379d37e889b83408d66f102a05504eb8a01d73c4b2ebd7369f641db280b31bb874a426aff5e80d3c5335a84869126ff50b38b21231d4094d99c6e268ebfee546106507fd3db3a7cad46d204dcafc2c3a293028fdcc764d9de15092df68c\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:44:41.479Z|10e6ede9a165e1d3eb182343c316ccefb1ea2c8f17eaea8a7b9725b1259688d2a3bac7e0b53e754e72698ab9813275521a2348a61c3ec87be85dac109e97d46986fe26faecbcfa49b6d5a89fd359e2c0c7364a38fd9292a44748b1d2596f75f57f76aa433dab6d6972d1678516532fc99902ab40fdaff82d2d542e1022eaa722d69063040b11ba5411f95668d2949d2a78c1c638d65bf73c46d355cfe66587c229cca379d37e889b83408d66f102a05504eb8a01d73c4b2ebd7369f641db280b31bb874a426aff5e80d3c5335a84869126ff50b38b21231d4094d99c6e268ebfee546106507fd3db3a7cad46d204dcafc2c3a293028fdcc764d9de15092df68c","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139753,"nbf":1548139753,"exp":1548143653,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139753,"nbf":1548139753,"exp":1548143653,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139753,"nbf":1548139753,"exp":1548143653,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMzk3NTMsIm5iZiI6MTU0ODEzOTc1MywiZXhwIjoxNTQ4MTQzNjUzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.GbgW1ua5wq91qj1zIBK8bPdJLJplm-kpZwvwWospawaxBY3PrtsrGEMXAz1mMHcWObqesPyhaXAOa2T47OX5TzhqCdF9A1WYg0p3HG1VcuXNiBpNIW9TRB527BO3ux3fRRvj0_UrIq4tmqkqN_vK6p3xCB5OhEqw2uTsKqjy3df7ur4woAHO9wQfSRErQSkIDChlVsZlkE03PWjAgHPmtVNVgYoW_ioBAToc1QKeZQK61CF_KwaApOU9INGG3AMOkw7pNyGVVGAaPFFAiZfwWt3vi5DauDM74LcHl_fsk9DcWG7tgTIUb-hx-mwyKbl2rsKCSBbQfeWcgBRbprsScw","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMzk3NTMsIm5iZiI6MTU0ODEzOTc1MywiZXhwIjoxNTQ4MTQzNjUzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.GbgW1ua5wq91qj1zIBK8bPdJLJplm-kpZwvwWospawaxBY3PrtsrGEMXAz1mMHcWObqesPyhaXAOa2T47OX5TzhqCdF9A1WYg0p3HG1VcuXNiBpNIW9TRB527BO3ux3fRRvj0_UrIq4tmqkqN_vK6p3xCB5OhEqw2uTsKqjy3df7ur4woAHO9wQfSRErQSkIDChlVsZlkE03PWjAgHPmtVNVgYoW_ioBAToc1QKeZQK61CF_KwaApOU9INGG3AMOkw7pNyGVVGAaPFFAiZfwWt3vi5DauDM74LcHl_fsk9DcWG7tgTIUb-hx-mwyKbl2rsKCSBbQfeWcgBRbprsScw","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+null
userEntity------{"entity":null,"exists":false}
isExistingUser-------false
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":null,"exists":false}
-----getUserRoleRisky----111111
roleteacher
isExistingUser222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T06:49:09.091Z","lastLicenseCheck":"2019-01-22T06:49:09.091Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"e266652b-fc8d-4abe-bf6d-b06c4e1540df","skin":"EduSkins_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":false,"trialsAllowed":25}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T06:49:09.091Z,
  lastLicenseCheck: 2019-01-22T06:49:09.091Z,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: 'e266652b-fc8d-4abe-bf6d-b06c4e1540df',
  skin: 'EduSkins_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: false,
  trialsAllowed: 25 }
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T06:49:09.092Z","lastLicenseCheck":"2019-01-22T06:49:09.092Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"e266652b-fc8d-4abe-bf6d-b06c4e1540df","skin":"EduSkins_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":false,"trialsAllowed":25}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T06:49:09.092Z,
  lastLicenseCheck: 2019-01-22T06:49:09.092Z,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: 'e266652b-fc8d-4abe-bf6d-b06c4e1540df',
  skin: 'EduSkins_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: false,
  trialsAllowed: 25 }
insertOrMerge插入数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 349,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 14610,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 13743205,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 14694,
           [Symbol(triggerId)]: 14610 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 78 00 00 00 df d4 0f 03 78 04 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 54 69 6d 65 00 1c 00 00 00 11 74 73 00 07 00 00 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 120,
     requestId: 51369183,
     responseTo: 1144,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 104,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  ops:
   [ { tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
       unique_name: 'lancer88888',
       lastRoleCheck: 2019-01-22T06:49:09.091Z,
       lastLicenseCheck: 2019-01-22T06:49:09.091Z,
       role: 'teacher',
       name: 'lancer88888',
       oid: '575bd4e8421b458ea8cc42b20fb0b73b',
       anonimizedOid: 'e266652b-fc8d-4abe-bf6d-b06c4e1540df',
       skin: 'EduSkins_Alex',
       nickname: 'lancer88888',
       isLicensed: true,
       licenseType: undefined,
       acceptedEula: false,
       trialsAllowed: 25,
       _id: 5c46bce5c324fa5dc3f2ef2c } ],
  insertedCount: 1,
  insertedId: 5c46bce5c324fa5dc3f2ef2c }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T06:49:09.091Z","lastLicenseCheck":"2019-01-22T06:49:09.091Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"e266652b-fc8d-4abe-bf6d-b06c4e1540df","skin":"EduSkins_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":false,"trialsAllowed":25,"_id":"5c46bce5c324fa5dc3f2ef2c"}}
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 351,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 14645,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 13743208,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 14773,
           [Symbol(triggerId)]: 14645 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 e5 d4 0f 03 82 04 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51369189,
     responseTo: 1154,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T06:49:09.092Z","lastLicenseCheck":"2019-01-22T06:49:09.092Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"e266652b-fc8d-4abe-bf6d-b06c4e1540df","skin":"EduSkins_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":false,"trialsAllowed":25}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:49:09.468Z|1778bca30e45424e03ba147144c847f614df6e51d2baf8bb150fd80a74b396e610a1dd904db136bb23865cc947741c1746e7916ef547855b20357d0dbd4b28d8f028de8f2d50d8fd7f6d80329af9136205aef8f2cf502b74edc4a2e9c11df81b44fcba6acf547b8664524571aaa7f153145e27950bb7415e8ce8b5786407e714643fb626d37ff3144617bd513c5fad49c7ab1c737796637819223611a59c7779e572dc24feb104ddba659a3654a8b1d1eb4891b790f4f6ccebf3afa26ce60f1ea2da43f9e611baf0809b5a8a653062a0a0992f9195b27a9814568b8ee2f9abc99fdc425854a01009fc4a0bd694514342428a2d53c363641532480d2b28b3a096
user--------111{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T06:49:09.092Z","lastLicenseCheck":"2019-01-22T06:49:09.092Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"e266652b-fc8d-4abe-bf6d-b06c4e1540df","skin":"EduSkins_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":false,"trialsAllowed":25}
userid--------111"e266652b-fc8d-4abe-bf6d-b06c4e1540df"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":true,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"EduSkins_Alex","oid":"e266652b-fc8d-4abe-bf6d-b06c4e1540df","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:49:09.468Z|1778bca30e45424e03ba147144c847f614df6e51d2baf8bb150fd80a74b396e610a1dd904db136bb23865cc947741c1746e7916ef547855b20357d0dbd4b28d8f028de8f2d50d8fd7f6d80329af9136205aef8f2cf502b74edc4a2e9c11df81b44fcba6acf547b8664524571aaa7f153145e27950bb7415e8ce8b5786407e714643fb626d37ff3144617bd513c5fad49c7ab1c737796637819223611a59c7779e572dc24feb104ddba659a3654a8b1d1eb4891b790f4f6ccebf3afa26ce60f1ea2da43f9e611baf0809b5a8a653062a0a0992f9195b27a9814568b8ee2f9abc99fdc425854a01009fc4a0bd694514342428a2d53c363641532480d2b28b3a096","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":true,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"EduSkins_Alex\",\"oid\":\"e266652b-fc8d-4abe-bf6d-b06c4e1540df\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:49:09.468Z|1778bca30e45424e03ba147144c847f614df6e51d2baf8bb150fd80a74b396e610a1dd904db136bb23865cc947741c1746e7916ef547855b20357d0dbd4b28d8f028de8f2d50d8fd7f6d80329af9136205aef8f2cf502b74edc4a2e9c11df81b44fcba6acf547b8664524571aaa7f153145e27950bb7415e8ce8b5786407e714643fb626d37ff3144617bd513c5fad49c7ab1c737796637819223611a59c7779e572dc24feb104ddba659a3654a8b1d1eb4891b790f4f6ccebf3afa26ce60f1ea2da43f9e611baf0809b5a8a653062a0a0992f9195b27a9814568b8ee2f9abc99fdc425854a01009fc4a0bd694514342428a2d53c363641532480d2b28b3a096\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":false}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":true,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"EduSkins_Alex","oid":"e266652b-fc8d-4abe-bf6d-b06c4e1540df","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:49:09.468Z|1778bca30e45424e03ba147144c847f614df6e51d2baf8bb150fd80a74b396e610a1dd904db136bb23865cc947741c1746e7916ef547855b20357d0dbd4b28d8f028de8f2d50d8fd7f6d80329af9136205aef8f2cf502b74edc4a2e9c11df81b44fcba6acf547b8664524571aaa7f153145e27950bb7415e8ce8b5786407e714643fb626d37ff3144617bd513c5fad49c7ab1c737796637819223611a59c7779e572dc24feb104ddba659a3654a8b1d1eb4891b790f4f6ccebf3afa26ce60f1ea2da43f9e611baf0809b5a8a653062a0a0992f9195b27a9814568b8ee2f9abc99fdc425854a01009fc4a0bd694514342428a2d53c363641532480d2b28b3a096","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":false}
进入eula方法
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139753,"nbf":1548139753,"exp":1548143653,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139753,"nbf":1548139753,"exp":1548143653,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139753,"nbf":1548139753,"exp":1548143653,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----user{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","userName":"lancer88888","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","accessToken":""}
action: eula  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMzk3NTMsIm5iZiI6MTU0ODEzOTc1MywiZXhwIjoxNTQ4MTQzNjUzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.GbgW1ua5wq91qj1zIBK8bPdJLJplm-kpZwvwWospawaxBY3PrtsrGEMXAz1mMHcWObqesPyhaXAOa2T47OX5TzhqCdF9A1WYg0p3HG1VcuXNiBpNIW9TRB527BO3ux3fRRvj0_UrIq4tmqkqN_vK6p3xCB5OhEqw2uTsKqjy3df7ur4woAHO9wQfSRErQSkIDChlVsZlkE03PWjAgHPmtVNVgYoW_ioBAToc1QKeZQK61CF_KwaApOU9INGG3AMOkw7pNyGVVGAaPFFAiZfwWt3vi5DauDM74LcHl_fsk9DcWG7tgTIUb-hx-mwyKbl2rsKCSBbQfeWcgBRbprsScw","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMzk3NTMsIm5iZiI6MTU0ODEzOTc1MywiZXhwIjoxNTQ4MTQzNjUzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.GbgW1ua5wq91qj1zIBK8bPdJLJplm-kpZwvwWospawaxBY3PrtsrGEMXAz1mMHcWObqesPyhaXAOa2T47OX5TzhqCdF9A1WYg0p3HG1VcuXNiBpNIW9TRB527BO3ux3fRRvj0_UrIq4tmqkqN_vK6p3xCB5OhEqw2uTsKqjy3df7ur4woAHO9wQfSRErQSkIDChlVsZlkE03PWjAgHPmtVNVgYoW_ioBAToc1QKeZQK61CF_KwaApOU9INGG3AMOkw7pNyGVVGAaPFFAiZfwWt3vi5DauDM74LcHl_fsk9DcWG7tgTIUb-hx-mwyKbl2rsKCSBbQfeWcgBRbprsScw","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)"}
eeeewwwwww
updateEula-------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","userName":"lancer88888","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","accessToken":""}
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c46bce5c324fa5dc3f2ef2c","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T06:49:09.092Z","lastLicenseCheck":"2019-01-22T06:49:09.092Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"e266652b-fc8d-4abe-bf6d-b06c4e1540df","skin":"EduSkins_Alex","nickname":"lancer88888","isLicensed":true,"licenseType":null,"acceptedEula":false,"trialsAllowed":25}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  acceptedEula: true }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 367,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 15410,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 13756811,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 15460,
           [Symbol(triggerId)]: 15410 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 bb d5 0f 03 b7 04 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51369403,
     responseTo: 1207,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139753,"nbf":1548139753,"exp":1548143653,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139753,"nbf":1548139753,"exp":1548143653,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139753,"nbf":1548139753,"exp":1548143653,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1548139753,"exp":1548143653,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888","user_name":"lancer88888","full_name":"lancer88888","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMzk3NTMsIm5iZiI6MTU0ODEzOTc1MywiZXhwIjoxNTQ4MTQzNjUzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.GbgW1ua5wq91qj1zIBK8bPdJLJplm-kpZwvwWospawaxBY3PrtsrGEMXAz1mMHcWObqesPyhaXAOa2T47OX5TzhqCdF9A1WYg0p3HG1VcuXNiBpNIW9TRB527BO3ux3fRRvj0_UrIq4tmqkqN_vK6p3xCB5OhEqw2uTsKqjy3df7ur4woAHO9wQfSRErQSkIDChlVsZlkE03PWjAgHPmtVNVgYoW_ioBAToc1QKeZQK61CF_KwaApOU9INGG3AMOkw7pNyGVVGAaPFFAiZfwWt3vi5DauDM74LcHl_fsk9DcWG7tgTIUb-hx-mwyKbl2rsKCSBbQfeWcgBRbprsScw"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMzk3NTMsIm5iZiI6MTU0ODEzOTc1MywiZXhwIjoxNTQ4MTQzNjUzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.GbgW1ua5wq91qj1zIBK8bPdJLJplm-kpZwvwWospawaxBY3PrtsrGEMXAz1mMHcWObqesPyhaXAOa2T47OX5TzhqCdF9A1WYg0p3HG1VcuXNiBpNIW9TRB527BO3ux3fRRvj0_UrIq4tmqkqN_vK6p3xCB5OhEqw2uTsKqjy3df7ur4woAHO9wQfSRErQSkIDChlVsZlkE03PWjAgHPmtVNVgYoW_ioBAToc1QKeZQK61CF_KwaApOU9INGG3AMOkw7pNyGVVGAaPFFAiZfwWt3vi5DauDM74LcHl_fsk9DcWG7tgTIUb-hx-mwyKbl2rsKCSBbQfeWcgBRbprsScw","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxMzk3NTMsIm5iZiI6MTU0ODEzOTc1MywiZXhwIjoxNTQ4MTQzNjUzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.GbgW1ua5wq91qj1zIBK8bPdJLJplm-kpZwvwWospawaxBY3PrtsrGEMXAz1mMHcWObqesPyhaXAOa2T47OX5TzhqCdF9A1WYg0p3HG1VcuXNiBpNIW9TRB527BO3ux3fRRvj0_UrIq4tmqkqN_vK6p3xCB5OhEqw2uTsKqjy3df7ur4woAHO9wQfSRErQSkIDChlVsZlkE03PWjAgHPmtVNVgYoW_ioBAToc1QKeZQK61CF_KwaApOU9INGG3AMOkw7pNyGVVGAaPFFAiZfwWt3vi5DauDM74LcHl_fsk9DcWG7tgTIUb-hx-mwyKbl2rsKCSBbQfeWcgBRbprsScw","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","skin":"c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve"}
eeeewwwwww
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
连接数据库成功
final+{"_id":"5c46bce5c324fa5dc3f2ef2c","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T06:49:09.092Z","lastLicenseCheck":"2019-01-22T06:49:09.092Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"e266652b-fc8d-4abe-bf6d-b06c4e1540df","skin":"EduSkins_Alex","nickname":"lancer88888","isLicensed":true,"licenseType":null,"acceptedEula":true,"trialsAllowed":25}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  skin: 'c18e65aa-7b21-4637-9b63-8ad63622ef01_Steve' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 379,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 15915,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 13767203,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 15965,
           [Symbol(triggerId)]: 15915 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 52 d6 0f 03 df 04 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51369554,
     responseTo: 1247,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139893,"nbf":1548139893,"exp":1548143793,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139893,"nbf":1548139893,"exp":1548143793,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548139893,"nbf":1548139893,"exp":1548143793,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0ODEzOTg5MywibmJmIjoxNTQ4MTM5ODkzLCJleHAiOjE1NDgxNDM3OTMsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEwNi4xMjEuMTM0LjQ0Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.Er0G3MPZ7YlmXap8TpayY2mCXnKYezkjyJFeOBQxmsSSCIcF7XYCq9VeA1DsIdrn-whmoBkSmrnH6a7DqpRBeMi1LkYDoFV3RGDGImIQ25bzvw55bRp2dy1GM0FmCJkSCBbO18XOJH7STPhKZ4NtUwykaIJYVR6dRv2Veti3XmzvjE3h6sX0v3psm0a-oI5Tk02ECz7Rl71RzUlF08p7AYli1xU4EeBKg-lx-8WEuM7dqpcfvVcUPsNwnrn5Nw0ZTewsRu3HKUWqFOJPI8M8w5CaR7xu85pyIrbAj6vVToRen6EzSUemEuAH7P4WZt2oVFR922jtQukBx1B_1uQVGw","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0ODEzOTg5MywibmJmIjoxNTQ4MTM5ODkzLCJleHAiOjE1NDgxNDM3OTMsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEwNi4xMjEuMTM0LjQ0Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.Er0G3MPZ7YlmXap8TpayY2mCXnKYezkjyJFeOBQxmsSSCIcF7XYCq9VeA1DsIdrn-whmoBkSmrnH6a7DqpRBeMi1LkYDoFV3RGDGImIQ25bzvw55bRp2dy1GM0FmCJkSCBbO18XOJH7STPhKZ4NtUwykaIJYVR6dRv2Veti3XmzvjE3h6sX0v3psm0a-oI5Tk02ECz7Rl71RzUlF08p7AYli1xU4EeBKg-lx-8WEuM7dqpcfvVcUPsNwnrn5Nw0ZTewsRu3HKUWqFOJPI8M8w5CaR7xu85pyIrbAj6vVToRen6EzSUemEuAH7P4WZt2oVFR922jtQukBx1B_1uQVGw","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+null
userEntity------{"entity":null,"exists":false}
isExistingUser-------false
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":null,"exists":false}
-----getUserRoleRisky----2222222
rolestudent
isExistingUser222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T06:51:29.154Z","lastLicenseCheck":"2019-01-22T06:51:29.154Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T06:51:29.154Z,
  lastLicenseCheck: 2019-01-22T06:51:29.154Z,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '1650c265-cfb8-4b3d-800f-01785e9fef0b',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined,
  trialsAllowed: 10 }
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T06:51:29.154Z","lastLicenseCheck":"2019-01-22T06:51:29.154Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T06:51:29.154Z,
  lastLicenseCheck: 2019-01-22T06:51:29.154Z,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '1650c265-cfb8-4b3d-800f-01785e9fef0b',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined,
  trialsAllowed: 10 }
insertOrMerge插入数据
insertOrMerge插入数据
CommandResult {
  result:
   { n: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 397,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 16644,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 13882910,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 16734,
           [Symbol(triggerId)]: 16644 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 78 00 00 00 46 db 0f 03 21 05 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 54 69 6d 65 00 1c 00 00 00 11 74 73 00 08 00 00 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 120,
     requestId: 51370822,
     responseTo: 1313,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 104,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  ops:
   [ { tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
       unique_name: 'test190117',
       lastRoleCheck: 2019-01-22T06:51:29.154Z,
       lastLicenseCheck: 2019-01-22T06:51:29.154Z,
       role: 'student',
       name: 'test190117',
       oid: '3ca4b76ba18b4360b097189059cab4e3',
       anonimizedOid: '1650c265-cfb8-4b3d-800f-01785e9fef0b',
       skin: 'EduSkins_Alex',
       nickname: 'test190117',
       isLicensed: true,
       licenseType: undefined,
       trialsAllowed: 10,
       _id: 5c46bd71c324fa5dc3f2ef31 } ],
  insertedCount: 1,
  insertedId: 5c46bd71c324fa5dc3f2ef31 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T06:51:29.154Z","lastLicenseCheck":"2019-01-22T06:51:29.154Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"_id":"5c46bd71c324fa5dc3f2ef31"}}
CommandResult {
  result:
   { n: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 399,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 16652,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 13882912,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 16752,
           [Symbol(triggerId)]: 16652 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 78 00 00 00 4d db 0f 03 22 05 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 54 69 6d 65 00 1c 00 00 00 11 74 73 00 09 00 00 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 120,
     requestId: 51370829,
     responseTo: 1314,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 104,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  ops:
   [ { tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
       unique_name: 'test190117',
       lastRoleCheck: 2019-01-22T06:51:29.154Z,
       lastLicenseCheck: 2019-01-22T06:51:29.154Z,
       role: 'student',
       name: 'test190117',
       oid: '3ca4b76ba18b4360b097189059cab4e3',
       anonimizedOid: '1650c265-cfb8-4b3d-800f-01785e9fef0b',
       skin: 'EduSkins_Alex',
       nickname: 'test190117',
       isLicensed: true,
       licenseType: undefined,
       trialsAllowed: 10,
       _id: 5c46bd71c324fa5dc3f2ef32 } ],
  insertedCount: 1,
  insertedId: 5c46bd71c324fa5dc3f2ef32 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T06:51:29.154Z","lastLicenseCheck":"2019-01-22T06:51:29.154Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"_id":"5c46bd71c324fa5dc3f2ef32"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T06:51:29.173Z|59815542e76449075a6b258f3d00374eee25c0c9d4d1e136e793bb2f687299cc0652536b208cd03f594b895c494343f66c71d01eee08c1e65ea8d267ef5e3716eaae67d669840b9038deeb726226d6e16cf7318c556bcfa5dca3739f67674959f449765d47df7b72b85ddb6ee2a818a566b4da63107f0d8f579afc4567d7a04b18e6695d0c128e9f9431942aa44cf0c6eab080a10e8275a51564ab70395f064d61f1b39e0c867e4263f38d300f9e1067bbfc35881e3f66961d7cb350c102fb5c11108a7b01e77fdab3c4d5acfc110d1f2419bac88bbcfdb604b3ccbf038e8b49e712671b2de6bb8f800296f6a8d8ddd9cce3b16101093fbc72224b177b78995b
user--------111{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T06:51:29.154Z","lastLicenseCheck":"2019-01-22T06:51:29.154Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"_id":"5c46bd71c324fa5dc3f2ef32"}
userid--------111"1650c265-cfb8-4b3d-800f-01785e9fef0b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":true,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T06:51:29.173Z|59815542e76449075a6b258f3d00374eee25c0c9d4d1e136e793bb2f687299cc0652536b208cd03f594b895c494343f66c71d01eee08c1e65ea8d267ef5e3716eaae67d669840b9038deeb726226d6e16cf7318c556bcfa5dca3739f67674959f449765d47df7b72b85ddb6ee2a818a566b4da63107f0d8f579afc4567d7a04b18e6695d0c128e9f9431942aa44cf0c6eab080a10e8275a51564ab70395f064d61f1b39e0c867e4263f38d300f9e1067bbfc35881e3f66961d7cb350c102fb5c11108a7b01e77fdab3c4d5acfc110d1f2419bac88bbcfdb604b3ccbf038e8b49e712671b2de6bb8f800296f6a8d8ddd9cce3b16101093fbc72224b177b78995b","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":true,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"1650c265-cfb8-4b3d-800f-01785e9fef0b\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T06:51:29.173Z|59815542e76449075a6b258f3d00374eee25c0c9d4d1e136e793bb2f687299cc0652536b208cd03f594b895c494343f66c71d01eee08c1e65ea8d267ef5e3716eaae67d669840b9038deeb726226d6e16cf7318c556bcfa5dca3739f67674959f449765d47df7b72b85ddb6ee2a818a566b4da63107f0d8f579afc4567d7a04b18e6695d0c128e9f9431942aa44cf0c6eab080a10e8275a51564ab70395f064d61f1b39e0c867e4263f38d300f9e1067bbfc35881e3f66961d7cb350c102fb5c11108a7b01e77fdab3c4d5acfc110d1f2419bac88bbcfdb604b3ccbf038e8b49e712671b2de6bb8f800296f6a8d8ddd9cce3b16101093fbc72224b177b78995b\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":true,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T06:51:29.173Z|59815542e76449075a6b258f3d00374eee25c0c9d4d1e136e793bb2f687299cc0652536b208cd03f594b895c494343f66c71d01eee08c1e65ea8d267ef5e3716eaae67d669840b9038deeb726226d6e16cf7318c556bcfa5dca3739f67674959f449765d47df7b72b85ddb6ee2a818a566b4da63107f0d8f579afc4567d7a04b18e6695d0c128e9f9431942aa44cf0c6eab080a10e8275a51564ab70395f064d61f1b39e0c867e4263f38d300f9e1067bbfc35881e3f66961d7cb350c102fb5c11108a7b01e77fdab3c4d5acfc110d1f2419bac88bbcfdb604b3ccbf038e8b49e712671b2de6bb8f800296f6a8d8ddd9cce3b16101093fbc72224b177b78995b","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
进入getuserguid方法
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"asdasdasdassd"}
eeeewwwwww
registerUserGuid----"asdasdasdassd"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"asdasdasdassd"}
eeeewwwwww
连接数据库成功
连接数据库成功
queryUserRole连接成功
queryUserRole连接成功"student"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548140320,"nbf":1548140320,"exp":1548144220,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548140320,"nbf":1548140320,"exp":1548144220,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548140320,"nbf":1548140320,"exp":1548144220,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxNDAzMjAsIm5iZiI6MTU0ODE0MDMyMCwiZXhwIjoxNTQ4MTQ0MjIwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.J6Je5YfaXbHGgjLrCZVmagFI6txq7xD41_IBCJ4n92DL8_K0oxr7PUQuCaJT5Os2Lc0Jx7GQKjQBh4JQs4TnkB69Gf9tUoq9JmN2zhFK5U8fvHufrtBbSM7EzYXeEK7ypVJIfqS624tx4NRMtoCtLie8BTiXI35dGd8hoe2cotJni0SP5chrw2Gj2byi8LLbeAJt0-zA1YJQEbR1kDYSlDdcKJXRVxLtHo2xKtpc86x4jg4E30OYRqHOsxZlOOt4XLTKD5c6moVsJyxCTXt8w7R6YV2DNhrpCKOE89t8NAtMT3Uq9blvKhmIv4S4SQWYgSfUUGe4UCfDeC-Ov5zdbA","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxNDAzMjAsIm5iZiI6MTU0ODE0MDMyMCwiZXhwIjoxNTQ4MTQ0MjIwLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.J6Je5YfaXbHGgjLrCZVmagFI6txq7xD41_IBCJ4n92DL8_K0oxr7PUQuCaJT5Os2Lc0Jx7GQKjQBh4JQs4TnkB69Gf9tUoq9JmN2zhFK5U8fvHufrtBbSM7EzYXeEK7ypVJIfqS624tx4NRMtoCtLie8BTiXI35dGd8hoe2cotJni0SP5chrw2Gj2byi8LLbeAJt0-zA1YJQEbR1kDYSlDdcKJXRVxLtHo2xKtpc86x4jg4E30OYRqHOsxZlOOt4XLTKD5c6moVsJyxCTXt8w7R6YV2DNhrpCKOE89t8NAtMT3Uq9blvKhmIv4S4SQWYgSfUUGe4UCfDeC-Ov5zdbA","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":false,"lastRoleCheck":"2019-01-22T03:32:03.528Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userEntity------{"entity":{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":false,"lastRoleCheck":"2019-01-22T03:32:03.528Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":false,"lastRoleCheck":"2019-01-22T03:32:03.528Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"},"exists":true}
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 437,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 18255,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 14310199,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 18338,
           [Symbol(triggerId)]: 18255 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 dd ea 0f 03 98 05 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51374813,
     responseTo: 1432,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 439,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 18281,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 14310200,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 18382,
           [Symbol(triggerId)]: 18281 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 e2 ea 0f 03 9d 05 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51374818,
     responseTo: 1437,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:58:36.461Z|1aedd53a683b499c9558f4fedc4dbfd550a75ec2087d7e138ee84be5e31347a09779dec104e67faa2f8c11e4e3f3ba5913339e294bab08ff7db35d6aef9760f607b76d504843d311b90b0753860b055314d7d47052bce30ef106189a62e60a456bd60ae8da4cfc758565bae49c8ceb10393d34105c0a86ca119bc740bd26e05b0e058201c3f43b0a0ba17bc78c34f74036f71887184730ed0b0a35a22c09baaf485c0b9fdf27939cce62d3b17bc309024cac032ca4c2f4587cd5a120bce8dc5e4ace30a4dc55624428e2b8d53ebfdfa4d1e8c5816d0db573c7b45e593377263988c315438a19e361b165db2acd0120142bc48a6cd42b73fabec74920b345f158
user--------111{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:58:36.461Z|1aedd53a683b499c9558f4fedc4dbfd550a75ec2087d7e138ee84be5e31347a09779dec104e67faa2f8c11e4e3f3ba5913339e294bab08ff7db35d6aef9760f607b76d504843d311b90b0753860b055314d7d47052bce30ef106189a62e60a456bd60ae8da4cfc758565bae49c8ceb10393d34105c0a86ca119bc740bd26e05b0e058201c3f43b0a0ba17bc78c34f74036f71887184730ed0b0a35a22c09baaf485c0b9fdf27939cce62d3b17bc309024cac032ca4c2f4587cd5a120bce8dc5e4ace30a4dc55624428e2b8d53ebfdfa4d1e8c5816d0db573c7b45e593377263988c315438a19e361b165db2acd0120142bc48a6cd42b73fabec74920b345f158","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:58:36.461Z|1aedd53a683b499c9558f4fedc4dbfd550a75ec2087d7e138ee84be5e31347a09779dec104e67faa2f8c11e4e3f3ba5913339e294bab08ff7db35d6aef9760f607b76d504843d311b90b0753860b055314d7d47052bce30ef106189a62e60a456bd60ae8da4cfc758565bae49c8ceb10393d34105c0a86ca119bc740bd26e05b0e058201c3f43b0a0ba17bc78c34f74036f71887184730ed0b0a35a22c09baaf485c0b9fdf27939cce62d3b17bc309024cac032ca4c2f4587cd5a120bce8dc5e4ace30a4dc55624428e2b8d53ebfdfa4d1e8c5816d0db573c7b45e593377263988c315438a19e361b165db2acd0120142bc48a6cd42b73fabec74920b345f158\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T06:58:36.461Z|1aedd53a683b499c9558f4fedc4dbfd550a75ec2087d7e138ee84be5e31347a09779dec104e67faa2f8c11e4e3f3ba5913339e294bab08ff7db35d6aef9760f607b76d504843d311b90b0753860b055314d7d47052bce30ef106189a62e60a456bd60ae8da4cfc758565bae49c8ceb10393d34105c0a86ca119bc740bd26e05b0e058201c3f43b0a0ba17bc78c34f74036f71887184730ed0b0a35a22c09baaf485c0b9fdf27939cce62d3b17bc309024cac032ca4c2f4587cd5a120bce8dc5e4ace30a4dc55624428e2b8d53ebfdfa4d1e8c5816d0db573c7b45e593377263988c315438a19e361b165db2acd0120142bc48a6cd42b73fabec74920b345f158","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
action: http-error  tenantId: 404  unique_name: POST /sdk [Host|116.196.119.15:1337|Content-Length|441|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Connection|close] details: {}
action: http-error  tenantId: 404  unique_name: GET /nmaplowercheck1548141996 [Host|116.196.119.15:1337|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Connection|close] details: {}
action: http-error  tenantId: 404  unique_name: GET /HNAP1 [Host|116.196.119.15:1337|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Connection|close] details: {}
action: http-error  tenantId: 404  unique_name: GET /evox/about [Host|116.196.119.15:1337|User-Agent|Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)|Connection|close] details: {}
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548142194,"nbf":1548142194,"exp":1548146094,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548142194,"nbf":1548142194,"exp":1548146094,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1548142194,"nbf":1548142194,"exp":1548146094,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"106.121.134.44","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxNDIxOTQsIm5iZiI6MTU0ODE0MjE5NCwiZXhwIjoxNTQ4MTQ2MDk0LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.URxG5x2VexIqe0X1Jae-zLGCAK-Az6YNnsTSplTnJEw-UsdfPaAskWhetbNE_FWY6k3MeJoraQVw1f54H7x7UYXzsLyXjl17rYHqqqR_jIVn3fVFq_VrH75y9jJgVxAw80aRlNaQtK2OLdw7dhrCtvPzMr9ZEWpNXBEYEYb3r6syP0tF0KeFjadhTDxkVMkDptFvuhloichsGW6GYll0a91AVdoLPo5wP-UrwuUv4jCXNEWvczk_VsUVvCJBM-balnkvqVBffAreCnyNfE2uXh6q5E_aBNjd9zeHu_4YKg8vwz0Ht7HfSgT0r6pCX3rbImqmZXfws1N2m5WWM5uUbg","build":11000000,"clientVersion":342,"displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDgxNDIxOTQsIm5iZiI6MTU0ODE0MjE5NCwiZXhwIjoxNTQ4MTQ2MDk0LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxMDYuMTIxLjEzNC40NCIsIm9pZCI6IjU3NWJkNGU4NDIxYjQ1OGVhOGNjNDJiMjBmYjBiNzNiIiwicHVpZCI6IjEwMDM3RkZFOTk5NUFENjkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJtZWVAamRjbG91ZC5jb20iLCJ0aWQiOiIzOGRkNjYzNC0xOTMxLTRjNTAtYTliNC1kMTZjZDlkOTdkNTciLCJ1bmlxdWVfbmFtZSI6ImxhbmNlcjg4ODg4IiwidXBuIjoibGFuY2VyODg4ODgiLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.URxG5x2VexIqe0X1Jae-zLGCAK-Az6YNnsTSplTnJEw-UsdfPaAskWhetbNE_FWY6k3MeJoraQVw1f54H7x7UYXzsLyXjl17rYHqqqR_jIVn3fVFq_VrH75y9jJgVxAw80aRlNaQtK2OLdw7dhrCtvPzMr9ZEWpNXBEYEYb3r6syP0tF0KeFjadhTDxkVMkDptFvuhloichsGW6GYll0a91AVdoLPo5wP-UrwuUv4jCXNEWvczk_VsUVvCJBM-balnkvqVBffAreCnyNfE2uXh6q5E_aBNjd9zeHu_4YKg8vwz0Ht7HfSgT0r6pCX3rbImqmZXfws1N2m5WWM5uUbg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer","lastLicenseCheck":null,"licenseType":null}
userEntity------{"entity":{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer","lastLicenseCheck":null,"licenseType":null},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":null,"name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer","lastLicenseCheck":null,"licenseType":null},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
updateExistingUser1111
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T07:29:50.214Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T07:29:50.214Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser2222
teacher
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T07:29:50.214Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","skin":"red","nickname":"lancer88888","isLicensed":true,"acceptedEula":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T07:29:50.214Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '575bd4e8421b458ea8cc42b20fb0b73b',
  skin: 'red',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: true }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 463,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 19428,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 16183969,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 19490,
           [Symbol(triggerId)]: 19428 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 5b 29 10 03 ed 05 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51390811,
     responseTo: 1517,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T07:29:50.214Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 461,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 19375,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 16183970,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 19477,
           [Symbol(triggerId)]: 19375 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 5c 29 10 03 ec 05 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51390812,
     responseTo: 1516,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T07:29:50.214Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T07:29:50.230Z|23aa9c71450f6cb3cec7c54a7c39a7abba51adc6a5fcc50d5840aae1620dbb5ad99fbd6c0f05351bea87c6fe6e5c2c9482bbabb87b292824f5735c8a78850c14ca4be6ef1c8309e2bd7ed794f6f8dd50cb258af8c285db7b379140165ac2356889e909224c00e27eb5bbad0f494a5acc2e4c7b3d5de0300c329c140d7d2a86a33deb1eb1831238b2dd155d3b5573cffbf2bf15765cd299de2ee6b746ab2cb0bf13763ce05eb3bc2ec999410207c4352c49d3095fc3e584aa9f93db4c183f5bd9f64a7153c4397fd8a95bb55e0494b06a0eea0e31775eddf8222ed7f94e6ffa410df1048979445980cbdd3505db277e7350eb30b876f2a7deef6365428a6106dc
user--------111{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T07:29:50.214Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer"}
userid--------111"575bd4e8421b458ea8cc42b20fb0b73b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T07:29:50.230Z|23aa9c71450f6cb3cec7c54a7c39a7abba51adc6a5fcc50d5840aae1620dbb5ad99fbd6c0f05351bea87c6fe6e5c2c9482bbabb87b292824f5735c8a78850c14ca4be6ef1c8309e2bd7ed794f6f8dd50cb258af8c285db7b379140165ac2356889e909224c00e27eb5bbad0f494a5acc2e4c7b3d5de0300c329c140d7d2a86a33deb1eb1831238b2dd155d3b5573cffbf2bf15765cd299de2ee6b746ab2cb0bf13763ce05eb3bc2ec999410207c4352c49d3095fc3e584aa9f93db4c183f5bd9f64a7153c4397fd8a95bb55e0494b06a0eea0e31775eddf8222ed7f94e6ffa410df1048979445980cbdd3505db277e7350eb30b876f2a7deef6365428a6106dc","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"red\",\"oid\":\"575bd4e8421b458ea8cc42b20fb0b73b\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T07:29:50.230Z|23aa9c71450f6cb3cec7c54a7c39a7abba51adc6a5fcc50d5840aae1620dbb5ad99fbd6c0f05351bea87c6fe6e5c2c9482bbabb87b292824f5735c8a78850c14ca4be6ef1c8309e2bd7ed794f6f8dd50cb258af8c285db7b379140165ac2356889e909224c00e27eb5bbad0f494a5acc2e4c7b3d5de0300c329c140d7d2a86a33deb1eb1831238b2dd155d3b5573cffbf2bf15765cd299de2ee6b746ab2cb0bf13763ce05eb3bc2ec999410207c4352c49d3095fc3e584aa9f93db4c183f5bd9f64a7153c4397fd8a95bb55e0494b06a0eea0e31775eddf8222ed7f94e6ffa410df1048979445980cbdd3505db277e7350eb30b876f2a7deef6365428a6106dc\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":true}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"red","oid":"575bd4e8421b458ea8cc42b20fb0b73b","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T07:29:50.230Z|23aa9c71450f6cb3cec7c54a7c39a7abba51adc6a5fcc50d5840aae1620dbb5ad99fbd6c0f05351bea87c6fe6e5c2c9482bbabb87b292824f5735c8a78850c14ca4be6ef1c8309e2bd7ed794f6f8dd50cb258af8c285db7b379140165ac2356889e909224c00e27eb5bbad0f494a5acc2e4c7b3d5de0300c329c140d7d2a86a33deb1eb1831238b2dd155d3b5573cffbf2bf15765cd299de2ee6b746ab2cb0bf13763ce05eb3bc2ec999410207c4352c49d3095fc3e584aa9f93db4c183f5bd9f64a7153c4397fd8a95bb55e0494b06a0eea0e31775eddf8222ed7f94e6ffa410df1048979445980cbdd3505db277e7350eb30b876f2a7deef6365428a6106dc","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":true}
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","build":"10506000","clientVersion":"291","displayVersion":"1.5.6","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T06:51:29.154Z","lastLicenseCheck":"2019-01-22T06:51:29.154Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10}
userEntity------{"entity":{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T06:51:29.154Z","lastLicenseCheck":"2019-01-22T06:51:29.154Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T06:51:29.154Z","lastLicenseCheck":"2019-01-22T06:51:29.154Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10},"exists":true}
isExistingUser111
updateExistingUser1111
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '1650c265-cfb8-4b3d-800f-01785e9fef0b',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser2222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '1650c265-cfb8-4b3d-800f-01785e9fef0b',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 481,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 20356,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 26387822,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 20455,
           [Symbol(triggerId)]: 20356 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 78 7a 11 03 2d 06 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51477112,
     responseTo: 1581,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10}}
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 483,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 20380,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 26387823,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 20461,
           [Symbol(triggerId)]: 20380 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 7a 7a 11 03 30 06 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51477114,
     responseTo: 1584,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:19:54.083Z|08e903cb44bfed9db9557dac22c4a6627e4e3ee82601453e06764a2df27fdd44d3dceb2c04cc1ce744a46688020b44504f2c06581e5c6b69bed22c73b34384754f8b40301bf5f865f578f556accbadbbdcf443455fc32a0004037fb827b76c468ba0399bb40035b69fb837f0cb3a96a1c3eeadcd91cf7ac81eb2fed346af7263e29c7116854377a6fb3872df9f8236537e35d014d6b2fdc4b0cbdcf5b27718fff93296fa138633b7065aa5613f3dd5ec7f1ca0972e0206e6d3e0aeb64e9c56f189b51bc5aa43e6437d1bd69558235c84ecb5f9615f012aa400b0d48ff5aded991b24893c87ed926daf71cd0cc4636da8d8b7a22c58219e9862f3886c1951ce5a
user--------111{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10}
userid--------111"1650c265-cfb8-4b3d-800f-01785e9fef0b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:19:54.083Z|08e903cb44bfed9db9557dac22c4a6627e4e3ee82601453e06764a2df27fdd44d3dceb2c04cc1ce744a46688020b44504f2c06581e5c6b69bed22c73b34384754f8b40301bf5f865f578f556accbadbbdcf443455fc32a0004037fb827b76c468ba0399bb40035b69fb837f0cb3a96a1c3eeadcd91cf7ac81eb2fed346af7263e29c7116854377a6fb3872df9f8236537e35d014d6b2fdc4b0cbdcf5b27718fff93296fa138633b7065aa5613f3dd5ec7f1ca0972e0206e6d3e0aeb64e9c56f189b51bc5aa43e6437d1bd69558235c84ecb5f9615f012aa400b0d48ff5aded991b24893c87ed926daf71cd0cc4636da8d8b7a22c58219e9862f3886c1951ce5a","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"1650c265-cfb8-4b3d-800f-01785e9fef0b\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:19:54.083Z|08e903cb44bfed9db9557dac22c4a6627e4e3ee82601453e06764a2df27fdd44d3dceb2c04cc1ce744a46688020b44504f2c06581e5c6b69bed22c73b34384754f8b40301bf5f865f578f556accbadbbdcf443455fc32a0004037fb827b76c468ba0399bb40035b69fb837f0cb3a96a1c3eeadcd91cf7ac81eb2fed346af7263e29c7116854377a6fb3872df9f8236537e35d014d6b2fdc4b0cbdcf5b27718fff93296fa138633b7065aa5613f3dd5ec7f1ca0972e0206e6d3e0aeb64e9c56f189b51bc5aa43e6437d1bd69558235c84ecb5f9615f012aa400b0d48ff5aded991b24893c87ed926daf71cd0cc4636da8d8b7a22c58219e9862f3886c1951ce5a\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:19:54.083Z|08e903cb44bfed9db9557dac22c4a6627e4e3ee82601453e06764a2df27fdd44d3dceb2c04cc1ce744a46688020b44504f2c06581e5c6b69bed22c73b34384754f8b40301bf5f865f578f556accbadbbdcf443455fc32a0004037fb827b76c468ba0399bb40035b69fb837f0cb3a96a1c3eeadcd91cf7ac81eb2fed346af7263e29c7116854377a6fb3872df9f8236537e35d014d6b2fdc4b0cbdcf5b27718fff93296fa138633b7065aa5613f3dd5ec7f1ca0972e0206e6d3e0aeb64e9c56f189b51bc5aa43e6437d1bd69558235c84ecb5f9615f012aa400b0d48ff5aded991b24893c87ed926daf71cd0cc4636da8d8b7a22c58219e9862f3886c1951ce5a","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","build":"10506000","clientVersion":"291","displayVersion":"1.5.6","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
RetrievedEntity{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117"}
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10}
userEntity------{"entity":{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10},"exists":true}
-----getUserRoleRisky----2222222
rolestudent
isExistingUser111
updateExistingUser1111
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T10:20:11.801Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T10:20:11.801Z,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '1650c265-cfb8-4b3d-800f-01785e9fef0b',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser2222
student
userToUpdate000{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T10:20:11.801Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T10:20:11.801Z,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '1650c265-cfb8-4b3d-800f-01785e9fef0b',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
updateExistingUser3333
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 507,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 21385,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 26405562,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 21479,
           [Symbol(triggerId)]: 21385 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 4d 7b 11 03 80 06 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51477325,
     responseTo: 1664,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T10:20:11.801Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10}}
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 505,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 21377,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 26405563,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 21485,
           [Symbol(triggerId)]: 21377 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 4e 7b 11 03 7f 06 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51477326,
     responseTo: 1663,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
userInfo-----------qqq{"remainingTrialCount":0,"user":{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T10:20:11.801Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10}}
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:20:11.824Z|4d5888571c770e77f4f5f65bb802fe303edc344c12ecfd0cec3a181c225a88a4f4050871d09fe9c7cb41bf6e141cb75aa7819f9e4e7ae0ed79ccdffea16ad3b784673a6a3ec0e75776c70f6d4b2c95ceff313b9086bd9f369870ac482bafbea2d1cfa07a686a54a120b878ecb924b8576032425d78ccdbff1bebdc7f63db1f423a7d660b37d3fc92054cae4692e00d331753a613d4b77f5cf453f40e04a04c71681f6a7732391770ac7330570ead645a797395301437fcfac101799a619a60c3607b8c101620c6842e39b23883bdcdd67424c628cd1af41cf08a85fae0739c222af85e0ba767e8c775219714950a418121911c385bc4059a7c3d776267ae9a4e
user--------111{"_id":"5c46bd71c324fa5dc3f2ef31","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T10:20:11.801Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10}
userid--------111"1650c265-cfb8-4b3d-800f-01785e9fef0b"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:20:11.824Z|4d5888571c770e77f4f5f65bb802fe303edc344c12ecfd0cec3a181c225a88a4f4050871d09fe9c7cb41bf6e141cb75aa7819f9e4e7ae0ed79ccdffea16ad3b784673a6a3ec0e75776c70f6d4b2c95ceff313b9086bd9f369870ac482bafbea2d1cfa07a686a54a120b878ecb924b8576032425d78ccdbff1bebdc7f63db1f423a7d660b37d3fc92054cae4692e00d331753a613d4b77f5cf453f40e04a04c71681f6a7732391770ac7330570ead645a797395301437fcfac101799a619a60c3607b8c101620c6842e39b23883bdcdd67424c628cd1af41cf08a85fae0739c222af85e0ba767e8c775219714950a418121911c385bc4059a7c3d776267ae9a4e","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"1650c265-cfb8-4b3d-800f-01785e9fef0b\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:20:11.824Z|4d5888571c770e77f4f5f65bb802fe303edc344c12ecfd0cec3a181c225a88a4f4050871d09fe9c7cb41bf6e141cb75aa7819f9e4e7ae0ed79ccdffea16ad3b784673a6a3ec0e75776c70f6d4b2c95ceff313b9086bd9f369870ac482bafbea2d1cfa07a686a54a120b878ecb924b8576032425d78ccdbff1bebdc7f63db1f423a7d660b37d3fc92054cae4692e00d331753a613d4b77f5cf453f40e04a04c71681f6a7732391770ac7330570ead645a797395301437fcfac101799a619a60c3607b8c101620c6842e39b23883bdcdd67424c628cd1af41cf08a85fae0739c222af85e0ba767e8c775219714950a418121911c385bc4059a7c3d776267ae9a4e\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:20:11.824Z|4d5888571c770e77f4f5f65bb802fe303edc344c12ecfd0cec3a181c225a88a4f4050871d09fe9c7cb41bf6e141cb75aa7819f9e4e7ae0ed79ccdffea16ad3b784673a6a3ec0e75776c70f6d4b2c95ceff313b9086bd9f369870ac482bafbea2d1cfa07a686a54a120b878ecb924b8576032425d78ccdbff1bebdc7f63db1f423a7d660b37d3fc92054cae4692e00d331753a613d4b77f5cf453f40e04a04c71681f6a7732391770ac7330570ead645a797395301437fcfac101799a619a60c3607b8c101620c6842e39b23883bdcdd67424c628cd1af41cf08a85fae0739c222af85e0ba767e8c775219714950a418121911c385bc4059a7c3d776267ae9a4e","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
getUserTableSettings: EnvironemtType:3
Using local emulator
getUserTableSettings: EnvironemtType:3
getUserTableSettings: EnvironemtType:3
查看下当前的环境：  false
Express start on port 1337...
base64Decoded========{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547653456,"exp":1547653460,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888","user_name":"lancer88888","full_name":"lancer88888","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"red"}
eeeewwwwww
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
连接数据库成功
final+{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T07:29:50.214Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer","lastLicenseCheck":null,"licenseType":null}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  skin: 'red' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 11,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 408,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 148077,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 458,
           [Symbol(triggerId)]: 408 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 87 83 11 03 28 00 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51479431,
     responseTo: 40,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
base64Decoded========{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"access_token":"W6fPN3q48ZyTtjYKhv8MwS5rDh5fUIsc","name":"lancer88888","account":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547653456,"nbf":1547653456,"exp":1547653460,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.166","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547653456,"exp":1547653460,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"575bd4e8421b458ea8cc42b20fb0b73b","unique_name":"lancer88888","user_name":"lancer88888","full_name":"lancer88888","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJXNmZQTjNxNDhaeVR0allLaHY4TXdTNXJEaDVmVUlzYyIsIm5hbWUiOiJsYW5jZXI4ODg4OCIsImFjY291bnQiOiJsYW5jZXI4ODg4OCIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzY1MzQ1NiwibmJmIjoxNTQ3NjUzNDU2LCJleHAiOjE1NDc2NTM0NjAsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjYiLCJvaWQiOiI1NzViZDRlODQyMWI0NThlYThjYzQyYjIwZmIwYjczYiIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJsYW5jZXI4ODg4OCIsInVwbiI6ImxhbmNlcjg4ODg4IiwidXRpIjoiUjc0TkZoZmQwRVdYOXdUUGhhUUxBQSIsInZlciI6IjEuMCJ9.lKubfyHdiGnmGBi5v5-jTonDpXP1Pj1niBaQZgjJC53I38Zfw540L3gKO8TARGZEITB7V4NFe6VmtPuKSWM6XzmgqTHZGBEK7E3JyOdJqkyT9P2b-Hp-MivGSkFWIzVNU9eQctoHdadmnlXNVNf2UzVFx_a7bHk9bPf3EVVbgkGmzcBE08zaifURbi7gMweq9O_eHz80sdMaHgW59CZapUxupn1Z0gUdnFHQMVclfI18ignQ0hpk9Zk62tZDsYb-yN6oZ9jM0lQdVliimfZZM1-nQ8HF1lOTubK_4rA__MXDMQhhpetal2717llWGn8SN91TyYSnof3JyVHKXEDq_Q","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"blue"}
eeeewwwwww
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
连接数据库成功
进入retrieve方法数据库
final+{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T07:29:50.214Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"red","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer","lastLicenseCheck":null,"licenseType":null}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  skin: 'blue' }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 23,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 922,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 361902,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 972,
           [Symbol(triggerId)]: 922 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 c5 8a 11 03 50 00 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51481285,
     responseTo: 80,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
进入getuserguid方法
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"111.12.1.1"}
eeeewwwwww
registerUserGuid----"111.12.1.1"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"111.12.1.1"}
eeeewwwwww
连接数据库成功
queryUserRole连接成功
连接数据库成功
queryUserRole连接成功"student"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
action: getUserInfo  tenantId:   unique_name:  details: {"message":"test190117"}
eeeewwwwww
连接数据库成功
看一下这个data：{"_id":"5c46bd71c324fa5dc3f2ef32","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T06:51:29.154Z","lastLicenseCheck":"2019-01-22T06:51:29.154Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"1650c265-cfb8-4b3d-800f-01785e9fef0b","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10}
action: setTrialCounts  tenantId:   unique_name:  details: {"id":"lancer88888","trialsAllowed":"22","trialsUsed":"1"}
eeeewwwwww
连接数据库成功
看一下这个data：{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T07:29:50.214Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"blue","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer","lastLicenseCheck":null,"licenseType":null}
进入user
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T07:29:50.214Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"blue","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":1,"trialsUsed":24,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer","lastLicenseCheck":null,"licenseType":null}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  trialsAllowed: 22,
  trialsUsed: 1 }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 67,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 2688,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 435173,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 2737,
           [Symbol(triggerId)]: 2688 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 9c 8d 11 03 db 00 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51482012,
     responseTo: 219,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T07:29:50.214Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"blue","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":1,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer","lastLicenseCheck":null,"licenseType":null}
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
identity-----{"iss":"https://www.jdcloud.com/","iat":1547710498,"exp":1547714398,"tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_oid":"3ca4b76ba18b4360b097189059cab4e3","unique_name":"test190117","user_name":"test190117","full_name":"test190117","identity_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
action: setSkin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","osVersion":"Win 10.0.16299.15","displayVersion":"1.0.27","platform":"Windows 10 UWP Build(x64)","skin":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
连接数据库成功
final+null
action: setSkin-error  tenantId: #error  unique_name: set: Unable to update skin, user does not exist. tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57', oid: '3ca4b76ba18b4360b097189059cab4e3'. details: {"message":"1ece5830-0b47-4511-8b67-04df547a4d9e_RedScout"}
eeeewwwwww
连接数据库成功
action: setTrialCounts  tenantId:   unique_name:  details: {"id":"lancer88888","trialsAllowed":"22","trialsUsed":"5"}
eeeewwwwww
连接数据库成功
看一下这个data：{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T07:29:50.214Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"blue","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":1,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer","lastLicenseCheck":null,"licenseType":null}
进入user
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T07:29:50.214Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"blue","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":1,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer","lastLicenseCheck":null,"licenseType":null}
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  unique_name: 'lancer88888',
  trialsAllowed: 22,
  trialsUsed: 5 }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 99,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 4042,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 448001,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 4091,
           [Symbol(triggerId)]: 4042 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 5e 8e 11 03 48 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51482206,
     responseTo: 328,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c46bee68e327b155c53e412","acceptedEula":true,"isLicensed":true,"lastRoleCheck":"2019-01-22T07:29:50.214Z","name":"lancer88888","nickname":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"575bd4e8421b458ea8cc42b20fb0b73b","role":"teacher","skin":"blue","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","trialsAllowed":22,"trialsUsed":5,"unique_name":"lancer88888","clientSettings":"","experienceState":"","_class":"com.tb.mongodblisenceser.domain.UserLicenseServer","lastLicenseCheck":null,"licenseType":null}
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","build":"11000000","clientVersion":"342","displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+null
userEntity------{"entity":null,"exists":false}
isExistingUser-------false
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":null,"exists":false}
-----getUserRoleRisky----2222222
rolestudent
isExistingUser222
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T10:29:21.158Z,
  lastLicenseCheck: 2019-01-22T10:29:21.158Z,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '638ad10c-4963-4657-b205-34c5e01571c0',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined,
  trialsAllowed: 10 }
insertOrMerge插入数据
CommandResult {
  result:
   { n: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 119,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 4890,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 451162,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 4939,
           [Symbol(triggerId)]: 4890 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 78 00 00 00 a8 8e 11 03 8c 01 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 54 69 6d 65 00 1c 00 00 00 11 74 73 00 01 00 00 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 120,
     requestId: 51482280,
     responseTo: 396,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 104,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  ops:
   [ { tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
       unique_name: 'test190117',
       lastRoleCheck: 2019-01-22T10:29:21.158Z,
       lastLicenseCheck: 2019-01-22T10:29:21.158Z,
       role: 'student',
       name: 'test190117',
       oid: '3ca4b76ba18b4360b097189059cab4e3',
       anonimizedOid: '638ad10c-4963-4657-b205-34c5e01571c0',
       skin: 'EduSkins_Alex',
       nickname: 'test190117',
       isLicensed: true,
       licenseType: undefined,
       trialsAllowed: 10,
       _id: 5c46f081f2246f6ef9afe6b4 } ],
  insertedCount: 1,
  insertedId: 5c46f081f2246f6ef9afe6b4 }
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:29:21.172Z|6f5c4f642a8d5acf82f9617db58be092808c73fda893f8be1b34dc31d7ce429867f115c0bf27740a0acbca7a1423ae01fceb3225b2d27249f9c48150503292bc6a4e2c9ed4e15bd2ac3f0943fce7bd1e34c399730c1ef215e4828f046030d49c62986dcce9554e3709a2f2d7b3860e49df2ac309218ba030ef903c60f1b3268c1c8ff6b0e99cb5984d19f37f0141dbd060a4e9f83bfc983362700dad9eb02e7cdeafe30c968e5d087e49f68437b841c8dacf2444c9c583e58bb285b7dc18b4801b3541848e19fe491006f3deebc864a6122a1f514b50e15dbc36c712c949ad54c089254684f626c4b2fc00969c216af1d41e80f5e3e0a0ab2a0ddd362d109404
user--------111{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T10:29:21.158Z","lastLicenseCheck":"2019-01-22T10:29:21.158Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"638ad10c-4963-4657-b205-34c5e01571c0","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"_id":"5c46f081f2246f6ef9afe6b4"}
userid--------111"638ad10c-4963-4657-b205-34c5e01571c0"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":true,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"638ad10c-4963-4657-b205-34c5e01571c0","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:29:21.172Z|6f5c4f642a8d5acf82f9617db58be092808c73fda893f8be1b34dc31d7ce429867f115c0bf27740a0acbca7a1423ae01fceb3225b2d27249f9c48150503292bc6a4e2c9ed4e15bd2ac3f0943fce7bd1e34c399730c1ef215e4828f046030d49c62986dcce9554e3709a2f2d7b3860e49df2ac309218ba030ef903c60f1b3268c1c8ff6b0e99cb5984d19f37f0141dbd060a4e9f83bfc983362700dad9eb02e7cdeafe30c968e5d087e49f68437b841c8dacf2444c9c583e58bb285b7dc18b4801b3541848e19fe491006f3deebc864a6122a1f514b50e15dbc36c712c949ad54c089254684f626c4b2fc00969c216af1d41e80f5e3e0a0ab2a0ddd362d109404","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":true,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"638ad10c-4963-4657-b205-34c5e01571c0\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:29:21.172Z|6f5c4f642a8d5acf82f9617db58be092808c73fda893f8be1b34dc31d7ce429867f115c0bf27740a0acbca7a1423ae01fceb3225b2d27249f9c48150503292bc6a4e2c9ed4e15bd2ac3f0943fce7bd1e34c399730c1ef215e4828f046030d49c62986dcce9554e3709a2f2d7b3860e49df2ac309218ba030ef903c60f1b3268c1c8ff6b0e99cb5984d19f37f0141dbd060a4e9f83bfc983362700dad9eb02e7cdeafe30c968e5d087e49f68437b841c8dacf2444c9c583e58bb285b7dc18b4801b3541848e19fe491006f3deebc864a6122a1f514b50e15dbc36c712c949ad54c089254684f626c4b2fc00969c216af1d41e80f5e3e0a0ab2a0ddd362d109404\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":true,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"638ad10c-4963-4657-b205-34c5e01571c0","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:29:21.172Z|6f5c4f642a8d5acf82f9617db58be092808c73fda893f8be1b34dc31d7ce429867f115c0bf27740a0acbca7a1423ae01fceb3225b2d27249f9c48150503292bc6a4e2c9ed4e15bd2ac3f0943fce7bd1e34c399730c1ef215e4828f046030d49c62986dcce9554e3709a2f2d7b3860e49df2ac309218ba030ef903c60f1b3268c1c8ff6b0e99cb5984d19f37f0141dbd060a4e9f83bfc983362700dad9eb02e7cdeafe30c968e5d087e49f68437b841c8dacf2444c9c583e58bb285b7dc18b4801b3541848e19fe491006f3deebc864a6122a1f514b50e15dbc36c712c949ad54c089254684f626c4b2fc00969c216af1d41e80f5e3e0a0ab2a0ddd362d109404","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","build":"11000000","clientVersion":"342","displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+null
userEntity------{"entity":null,"exists":false}
isExistingUser-------false
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":null,"exists":false}
-----getUserRoleRisky----2222222
rolestudent
isExistingUser222
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T10:31:20.948Z,
  lastLicenseCheck: 2019-01-22T10:31:20.948Z,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined,
  trialsAllowed: 10 }
insertOrMerge插入数据
CommandResult {
  result:
   { n: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 139,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 6348,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 570953,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 6397,
           [Symbol(triggerId)]: 6348 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 78 00 00 00 09 93 11 03 16 02 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 54 69 6d 65 00 1c 00 00 00 11 74 73 00 02 00 00 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 120,
     requestId: 51483401,
     responseTo: 534,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 104,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  ops:
   [ { tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
       unique_name: 'test190117',
       lastRoleCheck: 2019-01-22T10:31:20.948Z,
       lastLicenseCheck: 2019-01-22T10:31:20.948Z,
       role: 'student',
       name: 'test190117',
       oid: '3ca4b76ba18b4360b097189059cab4e3',
       anonimizedOid: '45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81',
       skin: 'EduSkins_Alex',
       nickname: 'test190117',
       isLicensed: true,
       licenseType: undefined,
       trialsAllowed: 10,
       _id: 5c46f0f8f2246f6ef9afe6b7 } ],
  insertedCount: 1,
  insertedId: 5c46f0f8f2246f6ef9afe6b7 }
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:31:20.963Z|8b53a1e1e04fbde6c3dbb2abaa84587c28020b2e90bd19f4595aa8ba86ea585718ef5ff4696dc6546acd00b6b959440302a7c68dd8f42fbea5cc65706a704c1bcaa56a273a6130d0eca550ff0c01cf8a4c111d029a59938450df637b13d597d1a07902fc08579fb40c3547b235def88790e4ea6e59cd2e533d72e9193cd5bd4b760aa41cf411ba99c99ae7480ef546973dac2cea703146c964e3da2f7c0a2c518bb650f54e05dace8845eaa62d02e70d7bd1075cfbd5ffa5f33b972452470db932db07a1be7cb9486bfbba8d47485e212b86f14a08a7ac5c2b2a70421db63b383ca537dc1c646874985e035b69aaa6a58017b6bb585dba5d0f469be5585a15dc
user--------111{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T10:31:20.948Z","lastLicenseCheck":"2019-01-22T10:31:20.948Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10,"_id":"5c46f0f8f2246f6ef9afe6b7"}
userid--------111"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":true,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:31:20.963Z|8b53a1e1e04fbde6c3dbb2abaa84587c28020b2e90bd19f4595aa8ba86ea585718ef5ff4696dc6546acd00b6b959440302a7c68dd8f42fbea5cc65706a704c1bcaa56a273a6130d0eca550ff0c01cf8a4c111d029a59938450df637b13d597d1a07902fc08579fb40c3547b235def88790e4ea6e59cd2e533d72e9193cd5bd4b760aa41cf411ba99c99ae7480ef546973dac2cea703146c964e3da2f7c0a2c518bb650f54e05dace8845eaa62d02e70d7bd1075cfbd5ffa5f33b972452470db932db07a1be7cb9486bfbba8d47485e212b86f14a08a7ac5c2b2a70421db63b383ca537dc1c646874985e035b69aaa6a58017b6bb585dba5d0f469be5585a15dc","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":true,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:31:20.963Z|8b53a1e1e04fbde6c3dbb2abaa84587c28020b2e90bd19f4595aa8ba86ea585718ef5ff4696dc6546acd00b6b959440302a7c68dd8f42fbea5cc65706a704c1bcaa56a273a6130d0eca550ff0c01cf8a4c111d029a59938450df637b13d597d1a07902fc08579fb40c3547b235def88790e4ea6e59cd2e533d72e9193cd5bd4b760aa41cf411ba99c99ae7480ef546973dac2cea703146c964e3da2f7c0a2c518bb650f54e05dace8845eaa62d02e70d7bd1075cfbd5ffa5f33b972452470db932db07a1be7cb9486bfbba8d47485e212b86f14a08a7ac5c2b2a70421db63b383ca537dc1c646874985e035b69aaa6a58017b6bb585dba5d0f469be5585a15dc\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":true,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:31:20.963Z|8b53a1e1e04fbde6c3dbb2abaa84587c28020b2e90bd19f4595aa8ba86ea585718ef5ff4696dc6546acd00b6b959440302a7c68dd8f42fbea5cc65706a704c1bcaa56a273a6130d0eca550ff0c01cf8a4c111d029a59938450df637b13d597d1a07902fc08579fb40c3547b235def88790e4ea6e59cd2e533d72e9193cd5bd4b760aa41cf411ba99c99ae7480ef546973dac2cea703146c964e3da2f7c0a2c518bb650f54e05dace8845eaa62d02e70d7bd1075cfbd5ffa5f33b972452470db932db07a1be7cb9486bfbba8d47485e212b86f14a08a7ac5c2b2a70421db63b383ca537dc1c646874985e035b69aaa6a58017b6bb585dba5d0f469be5585a15dc","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
进入getuserguid方法
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
registerUserGuid----"asdayryt"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
连接数据库成功
queryUserRole连接成功
queryUserRole连接成功"student"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
连接数据库成功
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
进入getuserguid方法
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
registerUserGuid----"asdayryt"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
连接数据库成功
连接数据库成功
queryUserRole连接成功
queryUserRole连接成功"teacher"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
进入getuserguid方法
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"111.12.1.1"}
eeeewwwwww
registerUserGuid----"111.12.1.1"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"111.12.1.1"}
eeeewwwwww
queryUserRole连接成功
连接数据库成功
queryUserRole连接成功"teacher"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
连接数据库成功
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
进入getuserguid方法
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg","ipAddress":"111.12.1.1"}
eeeewwwwww
registerUserGuid----"111.12.1.1"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","userName":"lancer88888","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","userName":"lancer88888","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg","ipAddress":"111.12.1.1"}
eeeewwwwww
queryUserRole连接成功
queryUserRole连接成功"teacher"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
连接数据库成功
连接数据库成功
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"lancer88888","profile":{"name":"lancer88888","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547793413,"nbf":1547793413,"exp":1547797313,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"575bd4e8421b458ea8cc42b20fb0b73b","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","upn":"lancer88888","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所lancer88888
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg","build":"10506000","clientVersion":"291","displayVersion":"1.5.6","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoibGFuY2VyODg4ODgiLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3OTM0MTMsIm5iZiI6MTU0Nzc5MzQxMywiZXhwIjoxNTQ3Nzk3MzEzLCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiNTc1YmQ0ZTg0MjFiNDU4ZWE4Y2M0MmIyMGZiMGI3M2IiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoibGFuY2VyODg4ODgiLCJ1cG4iOiJsYW5jZXI4ODg4OCIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.cLcEW6todLbfx3uNHesb_JxCC2Pn7bx4lUXFxYOTh4mQ9yaiUO3fKjNlYYPsNZDbwOu535NgjiUPlwpgIU4Gk7pJf2yYrkATtQNbUgU7m_QLlQP9ipIfoAwy_9-CvZ7_8AYu0qjhz9KefjegdnkxhfoEy0dEoL-k5bjt3B0F7dBLYii5U7TMBT_q40M_LW2JU7yofINXV8OzYeLBTjpJBOTbv0PETDEBCaEY2LnjhO7qjFyKXhGAOtJlFDdO6Xe4Ujct17QVskUScmAK0usGUnIf-7Wg45pOCB2ShTB5sA0yvEjKsZ0A7nfbLRqmfINfjL80M8drRQpRXg9td1f_Pg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+null
userEntity------{"entity":null,"exists":false}
isExistingUser-------false
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"entity":null,"exists":false}
-----getUserRoleRisky----111111
roleteacher
isExistingUser222
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'lancer88888',
  lastRoleCheck: 2019-01-22T10:46:58.071Z,
  lastLicenseCheck: 2019-01-22T10:46:58.071Z,
  role: 'teacher',
  name: 'lancer88888',
  oid: '575bd4e8421b458ea8cc42b20fb0b73b',
  anonimizedOid: '0e943d1a-fda9-41f7-a9ec-26c051194e4c',
  skin: 'EduSkins_Alex',
  nickname: 'lancer88888',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: false,
  trialsAllowed: 25 }
insertOrMerge插入数据
CommandResult {
  result:
   { n: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 239,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 14964,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1508075,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 15013,
           [Symbol(triggerId)]: 14964 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 78 00 00 00 d2 b3 11 03 68 05 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 54 00 00 00 10 6e 00 01 00 00 00 03 6f 70 54 69 6d 65 00 1c 00 00 00 11 74 73 00 02 00 00 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 120,
     requestId: 51491794,
     responseTo: 1384,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 104,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  ops:
   [ { tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
       unique_name: 'lancer88888',
       lastRoleCheck: 2019-01-22T10:46:58.071Z,
       lastLicenseCheck: 2019-01-22T10:46:58.071Z,
       role: 'teacher',
       name: 'lancer88888',
       oid: '575bd4e8421b458ea8cc42b20fb0b73b',
       anonimizedOid: '0e943d1a-fda9-41f7-a9ec-26c051194e4c',
       skin: 'EduSkins_Alex',
       nickname: 'lancer88888',
       isLicensed: true,
       licenseType: undefined,
       acceptedEula: false,
       trialsAllowed: 25,
       _id: 5c46f4a2f2246f6ef9afe6c6 } ],
  insertedCount: 1,
  insertedId: 5c46f4a2f2246f6ef9afe6c6 }
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T10:46:58.084Z|114e698132e9f3df56c75d8d6f2af5e684368314aab515d95f65c96f32d2651a6ef21ec6bf7a3762b1364abac60465e7d75fde047fca3575b89cf6a9c3b855e9e65797b86586f9ff6daf80ba00a4decb43aed794ae42e6f24e32ed55e2221351685db75c9995c131fd7dd83cba2f7e674d52cfff071231cd37ac6d7db42e63f97f63eb44f03ba6ce5eeb0a4ec723fdf1552b47377be62c8ae44cb8d9baae798c70d99fa6cbb403c5af708f418fd2904390ca9824ea68cc22f9c7e10b2dc76e211319ab9233c4ad166e742b775e0b0ee8bbfebac32af88ee0cadeb8ed842e408cc49d4849d3a1fa2484f3836bc82380d8bb924314aa11a594d5a7d23178c99607
user--------111{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"lancer88888","lastRoleCheck":"2019-01-22T10:46:58.071Z","lastLicenseCheck":"2019-01-22T10:46:58.071Z","role":"teacher","name":"lancer88888","oid":"575bd4e8421b458ea8cc42b20fb0b73b","anonimizedOid":"0e943d1a-fda9-41f7-a9ec-26c051194e4c","skin":"EduSkins_Alex","nickname":"lancer88888","isLicensed":true,"acceptedEula":false,"trialsAllowed":25,"_id":"5c46f4a2f2246f6ef9afe6c6"}
userid--------111"0e943d1a-fda9-41f7-a9ec-26c051194e4c"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":true,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"EduSkins_Alex","oid":"0e943d1a-fda9-41f7-a9ec-26c051194e4c","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T10:46:58.084Z|114e698132e9f3df56c75d8d6f2af5e684368314aab515d95f65c96f32d2651a6ef21ec6bf7a3762b1364abac60465e7d75fde047fca3575b89cf6a9c3b855e9e65797b86586f9ff6daf80ba00a4decb43aed794ae42e6f24e32ed55e2221351685db75c9995c131fd7dd83cba2f7e674d52cfff071231cd37ac6d7db42e63f97f63eb44f03ba6ce5eeb0a4ec723fdf1552b47377be62c8ae44cb8d9baae798c70d99fa6cbb403c5af708f418fd2904390ca9824ea68cc22f9c7e10b2dc76e211319ab9233c4ad166e742b775e0b0ee8bbfebac32af88ee0cadeb8ed842e408cc49d4849d3a1fa2484f3836bc82380d8bb924314aa11a594d5a7d23178c99607","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: lancer88888 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":true,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"lancer88888\",\"skin\":\"EduSkins_Alex\",\"oid\":\"0e943d1a-fda9-41f7-a9ec-26c051194e4c\",\"nickname\":\"lancer88888\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T10:46:58.084Z|114e698132e9f3df56c75d8d6f2af5e684368314aab515d95f65c96f32d2651a6ef21ec6bf7a3762b1364abac60465e7d75fde047fca3575b89cf6a9c3b855e9e65797b86586f9ff6daf80ba00a4decb43aed794ae42e6f24e32ed55e2221351685db75c9995c131fd7dd83cba2f7e674d52cfff071231cd37ac6d7db42e63f97f63eb44f03ba6ce5eeb0a4ec723fdf1552b47377be62c8ae44cb8d9baae798c70d99fa6cbb403c5af708f418fd2904390ca9824ea68cc22f9c7e10b2dc76e211319ab9233c4ad166e742b775e0b0ee8bbfebac32af88ee0cadeb8ed842e408cc49d4849d3a1fa2484f3836bc82380d8bb924314aa11a594d5a7d23178c99607\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":false}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":true,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"lancer88888","skin":"EduSkins_Alex","oid":"0e943d1a-fda9-41f7-a9ec-26c051194e4c","nickname":"lancer88888","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|575bd4e8421b458ea8cc42b20fb0b73b|2019-02-01T10:46:58.084Z|114e698132e9f3df56c75d8d6f2af5e684368314aab515d95f65c96f32d2651a6ef21ec6bf7a3762b1364abac60465e7d75fde047fca3575b89cf6a9c3b855e9e65797b86586f9ff6daf80ba00a4decb43aed794ae42e6f24e32ed55e2221351685db75c9995c131fd7dd83cba2f7e674d52cfff071231cd37ac6d7db42e63f97f63eb44f03ba6ce5eeb0a4ec723fdf1552b47377be62c8ae44cb8d9baae798c70d99fa6cbb403c5af708f418fd2904390ca9824ea68cc22f9c7e10b2dc76e211319ab9233c4ad166e742b775e0b0ee8bbfebac32af88ee0cadeb8ed842e408cc49d4849d3a1fa2484f3836bc82380d8bb924314aa11a594d5a7d23178c99607","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":false}
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","build":"10506000","clientVersion":"291","displayVersion":"1.5.6","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c46f0f8f2246f6ef9afe6b7","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T10:31:20.948Z","lastLicenseCheck":"2019-01-22T10:31:20.948Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10}
userEntity------{"entity":{"_id":"5c46f0f8f2246f6ef9afe6b7","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T10:31:20.948Z","lastLicenseCheck":"2019-01-22T10:31:20.948Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c46f0f8f2246f6ef9afe6b7","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T10:31:20.948Z","lastLicenseCheck":"2019-01-22T10:31:20.948Z","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10},"exists":true}
isExistingUser111
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: undefined,
  lastLicenseCheck: undefined,
  role: 'student',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 259,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 15762,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1518938,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 15835,
           [Symbol(triggerId)]: 15762 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 60 b4 11 03 af 05 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51491936,
     responseTo: 1455,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 257,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 15754,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 1518939,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 15883,
           [Symbol(triggerId)]: 15754 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 65 b4 11 03 b3 05 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51491941,
     responseTo: 1459,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:47:08.949Z|1a42c21a1b603f48d0c75d9abd28481312bed6e79cb705dbfee2462164e7304aa6b013977529818e868f5ae910500fd55f79c52457faadc62d4605ca5ff47a3b0b4e6f1b6cd54f2423756408a2cd28758a62193017281a3372073dc658b0856ab551321e05e2a1bb166a323f55d86f466fcf87206fe80b966f9da71c6c070f249ea2e52ac5970bda817c403d0864be2f880c5fbfa989cd22c3577dc37d1a0690c042787db513ddbda19cb828c5c503b3842d7bc01e99d85d0982dbb65b7d30e17680459fa5d55009c25361201554cfefe342d8e563ddc5ff222e42d893637b00b43498c6600a2fe2cc2057a5e3b7e69500f7b3c9a84b414f6bada1ccd8949e3d
user--------111{"_id":"5c46f0f8f2246f6ef9afe6b7","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":10}
userid--------111"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:47:08.949Z|1a42c21a1b603f48d0c75d9abd28481312bed6e79cb705dbfee2462164e7304aa6b013977529818e868f5ae910500fd55f79c52457faadc62d4605ca5ff47a3b0b4e6f1b6cd54f2423756408a2cd28758a62193017281a3372073dc658b0856ab551321e05e2a1bb166a323f55d86f466fcf87206fe80b966f9da71c6c070f249ea2e52ac5970bda817c403d0864be2f880c5fbfa989cd22c3577dc37d1a0690c042787db513ddbda19cb828c5c503b3842d7bc01e99d85d0982dbb65b7d30e17680459fa5d55009c25361201554cfefe342d8e563ddc5ff222e42d893637b00b43498c6600a2fe2cc2057a5e3b7e69500f7b3c9a84b414f6bada1ccd8949e3d","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"student\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:47:08.949Z|1a42c21a1b603f48d0c75d9abd28481312bed6e79cb705dbfee2462164e7304aa6b013977529818e868f5ae910500fd55f79c52457faadc62d4605ca5ff47a3b0b4e6f1b6cd54f2423756408a2cd28758a62193017281a3372073dc658b0856ab551321e05e2a1bb166a323f55d86f466fcf87206fe80b966f9da71c6c070f249ea2e52ac5970bda817c403d0864be2f880c5fbfa989cd22c3577dc37d1a0690c042787db513ddbda19cb828c5c503b3842d7bc01e99d85d0982dbb65b7d30e17680459fa5d55009c25361201554cfefe342d8e563ddc5ff222e42d893637b00b43498c6600a2fe2cc2057a5e3b7e69500f7b3c9a84b414f6bada1ccd8949e3d\",\"clientSettings\":\"\",\"popup\":{\"id\":\"2e81d886-1054-4d74-a2a4-452bf5607e5c\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Press \\\"C\\\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"}}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"student","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:47:08.949Z|1a42c21a1b603f48d0c75d9abd28481312bed6e79cb705dbfee2462164e7304aa6b013977529818e868f5ae910500fd55f79c52457faadc62d4605ca5ff47a3b0b4e6f1b6cd54f2423756408a2cd28758a62193017281a3372073dc658b0856ab551321e05e2a1bb166a323f55d86f466fcf87206fe80b966f9da71c6c070f249ea2e52ac5970bda817c403d0864be2f880c5fbfa989cd22c3577dc37d1a0690c042787db513ddbda19cb828c5c503b3842d7bc01e99d85d0982dbb65b7d30e17680459fa5d55009c25361201554cfefe342d8e563ddc5ff222e42d893637b00b43498c6600a2fe2cc2057a5e3b7e69500f7b3c9a84b414f6bada1ccd8949e3d","clientSettings":"","popup":{"id":"2e81d886-1054-4d74-a2a4-452bf5607e5c","title":"Code Builder for Minecraft: Education Edition","text":"Press \"C\" to code! Did you know you can write code in Minecraft? Using Code Builder, you can use block coding or JavaScript to control the Agent. Head to the Minecraft Education website to find fun activities you can do while learning to code, and share with your teacher!","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
进入getuserguid方法
base64Decoded========{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"access_token":"yNEz6kJ11Z3xvupDtM6Q36UOFf1uMhIH","name":"test190117","account":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547705164,"nbf":1547705164,"exp":1547705168,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.168","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"111.12.1.1"}
eeeewwwwww
registerUserGuid----"111.12.1.1"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJhY2Nlc3NfdG9rZW4iOiJ5TkV6NmtKMTFaM3h2dXBEdE02UTM2VU9GZjF1TWhJSCIsIm5hbWUiOiJ0ZXN0MTkwMTE3IiwiYWNjb3VudCI6InRlc3QxOTAxMTciLCJhdWQiOiJodHRwczovL21lZXNlcnZpY2VzLm1pbmVjcmFmdC5uZXQiLCJpc3MiOiJodHRwczovL3d3dy5qZGNsb3VkLmNvbS8iLCJpYXQiOjE1NDc3MDUxNjQsIm5iZiI6MTU0NzcwNTE2NCwiZXhwIjoxNTQ3NzA1MTY4LCJhY3IiOiIxIiwiYWlvIjoiNDIxQUFwRjYwUmZCajdzb2Z0MTgwRkYzdVZWTzFQIiwiYXBwaWQiOiJiMzZiMTQzMi0xYTFjLTRjODItOWI3Ni0yNGRlMWNhYjQyZjIiLCJhbXIiOlsicHdkIl0sImFwcGlkYWNyIjoiMCIsImRldmljZWlkIjoiY2U4NDIwNWQtN2RlMi00YTc1LTgzYTgtNGY3YWJlODBmNjdjIiwiZmFtaWx5X25hbWUiOiJtaW5nIiwiZ2l2ZW5fbmFtZSI6InhpbmciLCJpcGFkZHIiOiIxLjExOS4xMzIuMTY4Iiwib2lkIjoiM2NhNGI3NmJhMThiNDM2MGIwOTcxODkwNTljYWI0ZTMiLCJwdWlkIjoiMTAwMzdGRkU5OTk1QUQ2OSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Im1lZUBqZGNsb3VkLmNvbSIsInRpZCI6IjM4ZGQ2NjM0LTE5MzEtNGM1MC1hOWI0LWQxNmNkOWQ5N2Q1NyIsInVuaXF1ZV9uYW1lIjoidGVzdDE5MDExNyIsInVwbiI6InRlc3QxOTAxMTciLCJ1dGkiOiJSNzRORmhmZDBFV1g5d1RQaGFRTEFBIiwidmVyIjoiMS4wIn0.AYjdLWANElJIsJL7n4mUqRM7RweD8PbaY4eq6QpzVyLkrHx5JOHPjISkgzO-1ArM3ybs20Xn6rl-D3H3Ths_3kYylvsQKvhjHCS6bInk9hmDAFOM0nm11j32905xs4qezvLY33YL723OenQslT_j6DQ-zPTu0QC8ZfdzCBiSjMt0TmO7Ro5RFaI_WMwJmswcor-0GCAU6Gsflueeh7hrTH6mhMno5YebL0xkp2FS0s0GXFySJEgZzM5csVpqN932T3DC0X7k_Q55hLXlKB0Ov3qOcO4rDMiL8oCppTtz14Wk6FK0s01kT_5zJ9CjKmB5BWoY8Skb6Y_gYdkth0xlMQ","ipAddress":"111.12.1.1"}
eeeewwwwww
连接数据库成功
queryUserRole连接成功
连接数据库成功
queryUserRole连接成功"teacher"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
$$$$$$$$$$$$$$$$$$###########@@@@@@@@@@!!!!!!!!!!^identity.uniqueName++++++++++这个事++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++少时诵诗书所所所test190117
UserID是这样来的[object Object]
action: server-signin  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","build":"11000000","clientVersion":"342","displayVersion":"1.10.0","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","locale":"en","osVersion":"10.0.17763","platform":"Windows Desktop Build (Win32)(x64)","refreshToken":"_"}
eeeewwwwww
连接数据库成功
进入signTheUserIn
newTable
进入retrieve方法
AzureTabl数据库连接地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359
进入retrieve方法数据库
final+{"_id":"5c46f0f8f2246f6ef9afe6b7","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10}
userEntity------{"entity":{"_id":"5c46f0f8f2246f6ef9afe6b7","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10},"exists":true}
isExistingUser-------true
1111111
action: signin-azurehelper-retrieveentity  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"entity":{"_id":"5c46f0f8f2246f6ef9afe6b7","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":null,"lastLicenseCheck":null,"role":"student","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"licenseType":null,"trialsAllowed":10},"exists":true}
-----getUserRoleRisky----111111
roleteacher
isExistingUser111
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T10:56:08.764Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: false,
  trialsAllowed: 25 }
进入insertOrMerge
{ tenantId: '38dd6634-1931-4c50-a9b4-d16cd9d97d57',
  unique_name: 'test190117',
  lastRoleCheck: 2019-01-22T10:56:08.764Z,
  lastLicenseCheck: undefined,
  role: 'teacher',
  name: 'test190117',
  oid: '3ca4b76ba18b4360b097189059cab4e3',
  anonimizedOid: '45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81',
  skin: 'EduSkins_Alex',
  nickname: 'test190117',
  isLicensed: true,
  licenseType: undefined,
  acceptedEula: false,
  trialsAllowed: 25 }
insertOrMerge更新数据
insertOrMerge更新数据
CommandResult {
  result:
   { n: 1,
     nModified: 1,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 301,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 20281,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 2058772,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 20382,
           [Symbol(triggerId)]: 20281 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 0a c7 11 03 7e 07 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 01 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51496714,
     responseTo: 1918,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 1,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
CommandResult {
  result:
   { n: 1,
     nModified: 0,
     opTime: { ts: [Timestamp], t: 1 },
     electionId: 7fffffff0000000000000001,
     ok: 1 },
  connection:
   Connection {
     _events:
      [Object: null prototype] {
        error: [Function],
        close: [Function],
        timeout: [Function],
        parseError: [Function] },
     _eventsCount: 4,
     _maxListeners: undefined,
     options:
      { host: '192.168.0.55',
        port: 27017,
        size: 20,
        minSize: 0,
        connectionTimeout: 30000,
        socketTimeout: 360000,
        keepAlive: true,
        keepAliveInitialDelay: 300000,
        noDelay: true,
        ssl: false,
        checkServerIdentity: true,
        ca: null,
        crl: null,
        cert: null,
        key: null,
        passPhrase: null,
        rejectUnauthorized: false,
        promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false,
        reconnect: false,
        reconnectInterval: 1000,
        reconnectTries: 30,
        domainsEnabled: false,
        disconnectHandler: [Store],
        cursorFactory: [Function],
        emitError: true,
        monitorCommands: false,
        setName: 'mgset-2242988359',
        auto_reconnect: true,
        poolSize: 20,
        promiseLibrary: [Function: Promise],
        clientInfo: [Object],
        authProviders: [Object],
        monitoring: false,
        parent: [ReplSet],
        servers: [Array],
        replicaSet: 'mgset-2242988359',
        caseTranslate: true,
        useNewUrlParser: true,
        username: 'root',
        password: 'Eq9RQ80J',
        db: 'admin',
        auth: [Object],
        user: 'root',
        authSource: 'admin',
        dbName: 'admin',
        socketTimeoutMS: 360000,
        connectTimeoutMS: 30000,
        bson: BSON {} },
     id: 303,
     logger: Logger { className: 'Connection' },
     bson: BSON {},
     tag: undefined,
     messageHandler: [Function],
     maxBsonMessageSize: 67108864,
     port: 27017,
     host: '192.168.0.55',
     family: undefined,
     keepAlive: true,
     keepAliveInitialDelay: 300000,
     noDelay: true,
     connectionTimeout: 30000,
     socketTimeout: 360000,
     destroyed: false,
     domainSocket: false,
     singleBufferSerializtion: true,
     serializationFunction: 'toBinUnified',
     ca: null,
     crl: null,
     cert: null,
     key: null,
     passphrase: null,
     ciphers: null,
     ecdhCurve: null,
     ssl: false,
     rejectUnauthorized: false,
     checkServerIdentity: true,
     responseOptions:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     flushing: false,
     queue: [],
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 5,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        timeout: 360000,
        [Symbol(asyncId)]: 20289,
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]:
         Timeout {
           _called: false,
           _idleTimeout: 360000,
           _idlePrev: [TimersList],
           _idleNext: [Timeout],
           _idleStart: 2058773,
           _onTimeout: [Function: bound ],
           _timerArgs: undefined,
           _repeat: null,
           _destroyed: false,
           [Symbol(unrefed)]: true,
           [Symbol(asyncId)]: 20388,
           [Symbol(triggerId)]: 20289 },
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     writeStream: null,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8',
     workItems: [],
     buffer: null,
     sizeOfMessage: 0,
     bytesRead: 0,
     stubBuffer: null },
  message:
   Response {
     parsed: true,
     raw:
      <Buffer 87 00 00 00 0b c7 11 03 7f 07 00 00 01 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d ... >,
     data:
      <Buffer 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 63 00 00 00 10 6e 00 01 00 00 00 10 6e 4d 6f 64 69 66 69 65 64 00 00 00 00 00 03 6f 70 54 ... >,
     bson: BSON {},
     opts:
      { promoteLongs: true,
        promoteValues: true,
        promoteBuffers: false },
     length: 135,
     requestId: 51496715,
     responseTo: 1919,
     opCode: 1,
     fromCompressed: undefined,
     responseFlags: 8,
     cursorId: Long { _bsontype: 'Long', low_: 0, high_: 0 },
     startingFrom: 0,
     numberReturned: 1,
     documents: [ [Object] ],
     cursorNotFound: false,
     queryFailure: false,
     shardConfigStale: false,
     awaitCapable: true,
     promoteLongs: true,
     promoteValues: true,
     promoteBuffers: false,
     index: 119,
     hashedName: '693f21c69a2537a5d5c4a32e9370ec8052dbcdd8' },
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1 }
sign-----------[object Object]
signedToken-----------38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:56:08.782Z|911c1efdba08130e8f5ef0c104e468af7d20ece4f8b298cae4667a3d62eb627e1661c96bcdf6509838a7724b043683e1ddd2b785549919f05810b07dbe7ea828cda73fd9694662d46f19a0b86672a6d91535e26e72f1acf9886a676c0c0d008b1df6584f985ecf376e538d794510df355f84e40b653333b9e7e0e2721538cb7f259f9922675393c269b6eea5c47c46af9d6a6753f3ef70df2be9a5512d41ba856c385b4806fd95f8c8b9c0e99c6f7e1e85849472dee9a66947b95d18152a8295ab212f5c81cfb943d8013fa23fa8a1354b990eb0d98132e317c0d866337aca1cdfa6c1b82972d37ffa72564962c07e105663b90708c0ff918ebb730bf2737326
user--------111{"_id":"5c46f0f8f2246f6ef9afe6b7","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","lastRoleCheck":"2019-01-22T10:56:08.764Z","role":"teacher","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","anonimizedOid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","skin":"EduSkins_Alex","nickname":"test190117","isLicensed":true,"trialsAllowed":25,"acceptedEula":false}
userid--------111"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81"
SignInResult--------111{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:56:08.782Z|911c1efdba08130e8f5ef0c104e468af7d20ece4f8b298cae4667a3d62eb627e1661c96bcdf6509838a7724b043683e1ddd2b785549919f05810b07dbe7ea828cda73fd9694662d46f19a0b86672a6d91535e26e72f1acf9886a676c0c0d008b1df6584f985ecf376e538d794510df355f84e40b653333b9e7e0e2721538cb7f259f9922675393c269b6eea5c47c46af9d6a6753f3ef70df2be9a5512d41ba856c385b4806fd95f8c8b9c0e99c6f7e1e85849472dee9a66947b95d18152a8295ab212f5c81cfb943d8013fa23fa8a1354b990eb0d98132e317c0d866337aca1cdfa6c1b82972d37ffa72564962c07e105663b90708c0ff918ebb730bf2737326","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"}}
result---------[object Object]
action: signin-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"message":"{\"isValid\":true,\"isLicensed\":true,\"isNewUser\":false,\"trialsRemaining\":0,\"role\":\"teacher\",\"tenantId\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57\",\"name\":\"test190117\",\"skin\":\"EduSkins_Alex\",\"oid\":\"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81\",\"nickname\":\"test190117\",\"signedToken\":\"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:56:08.782Z|911c1efdba08130e8f5ef0c104e468af7d20ece4f8b298cae4667a3d62eb627e1661c96bcdf6509838a7724b043683e1ddd2b785549919f05810b07dbe7ea828cda73fd9694662d46f19a0b86672a6d91535e26e72f1acf9886a676c0c0d008b1df6584f985ecf376e538d794510df355f84e40b653333b9e7e0e2721538cb7f259f9922675393c269b6eea5c47c46af9d6a6753f3ef70df2be9a5512d41ba856c385b4806fd95f8c8b9c0e99c6f7e1e85849472dee9a66947b95d18152a8295ab212f5c81cfb943d8013fa23fa8a1354b990eb0d98132e317c0d866337aca1cdfa6c1b82972d37ffa72564962c07e105663b90708c0ff918ebb730bf2737326\",\"clientSettings\":\"\",\"popup\":{\"id\":\"5c466b18-7982-4b90-9a20-94901f33c2b7\",\"title\":\"Code Builder for Minecraft: Education Edition\",\"text\":\"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \\\"C\\\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.\",\"hyperlinkIntroText\":\"\",\"hyperlink\":\"https://education.minecraft.net/CS\",\"hyperlinkLabel\":\"education.minecraft.net/CS\",\"okButtonAction\":\"DismissAndStartGame\"},\"acceptedEula\":false}"}
eeeewwwwww
连接数据库成功
----------------------signin-success-----------------{"isValid":true,"isLicensed":true,"isNewUser":false,"trialsRemaining":0,"role":"teacher","tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","name":"test190117","skin":"EduSkins_Alex","oid":"45cd03c3-e0e7-4ebd-90b0-4c3d2fe60a81","nickname":"test190117","signedToken":"38dd6634-1931-4c50-a9b4-d16cd9d97d57|3ca4b76ba18b4360b097189059cab4e3|2019-02-01T10:56:08.782Z|911c1efdba08130e8f5ef0c104e468af7d20ece4f8b298cae4667a3d62eb627e1661c96bcdf6509838a7724b043683e1ddd2b785549919f05810b07dbe7ea828cda73fd9694662d46f19a0b86672a6d91535e26e72f1acf9886a676c0c0d008b1df6584f985ecf376e538d794510df355f84e40b653333b9e7e0e2721538cb7f259f9922675393c269b6eea5c47c46af9d6a6753f3ef70df2be9a5512d41ba856c385b4806fd95f8c8b9c0e99c6f7e1e85849472dee9a66947b95d18152a8295ab212f5c81cfb943d8013fa23fa8a1354b990eb0d98132e317c0d866337aca1cdfa6c1b82972d37ffa72564962c07e105663b90708c0ff918ebb730bf2737326","clientSettings":"","popup":{"id":"5c466b18-7982-4b90-9a20-94901f33c2b7","title":"Code Builder for Minecraft: Education Edition","text":"Did you know you can write code in Minecraft? Code Builder is now available for students in game! You can press \"C\" to code while in a world to control the Agent with block code or JavaScript. Head to our computer science landing page for training, lesson plans, and resources on coding with Minecraft.","hyperlinkIntroText":"","hyperlink":"https://education.minecraft.net/CS","hyperlinkLabel":"education.minecraft.net/CS","okButtonAction":"DismissAndStartGame"},"acceptedEula":false}
进入getuserguid方法
base64Decoded========{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}
解码后user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
fromToken----user{"userName":"test190117","profile":{"name":"test190117","aud":"https://meeservices.minecraft.net","iss":"https://www.jdcloud.com/","iat":1547710498,"nbf":1547710498,"exp":1547714398,"acr":"1","aio":"421AApF60RfBj7soft180FF3uVVO1P","appid":"b36b1432-1a1c-4c82-9b76-24de1cab42f2","amr":["pwd"],"appidacr":"0","deviceid":"ce84205d-7de2-4a75-83a8-4f7abe80f67c","family_name":"ming","given_name":"xing","ipaddr":"1.119.132.167","oid":"3ca4b76ba18b4360b097189059cab4e3","puid":"10037FFE9995AD69","scp":"user_impersonation","sub":"mee@jdcloud.com","tid":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","upn":"test190117","uti":"R74NFhfd0EWX9wTPhaQLAA","ver":"1.0"}}
action: getuserguid  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
registerUserGuid----"asdayryt"
registerUserGuid------------{"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}
=========================={"tenantId":"38dd6634-1931-4c50-a9b4-d16cd9d97d57","unique_name":"test190117","userName":"test190117","name":"test190117","oid":"3ca4b76ba18b4360b097189059cab4e3","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg"}======================
action: getuserguid-success  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"clientVersion":"150","build":"10027000","identityToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","accessToken":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6IjJrazVUVFROTnRXaTZRMGJGYkkzZzNQTENJMD0ifQ.eyJuYW1lIjoidGVzdDE5MDExNyIsImF1ZCI6Imh0dHBzOi8vbWVlc2VydmljZXMubWluZWNyYWZ0Lm5ldCIsImlzcyI6Imh0dHBzOi8vd3d3LmpkY2xvdWQuY29tLyIsImlhdCI6MTU0NzcxMDQ5OCwibmJmIjoxNTQ3NzEwNDk4LCJleHAiOjE1NDc3MTQzOTgsImFjciI6IjEiLCJhaW8iOiI0MjFBQXBGNjBSZkJqN3NvZnQxODBGRjN1VlZPMVAiLCJhcHBpZCI6ImIzNmIxNDMyLTFhMWMtNGM4Mi05Yjc2LTI0ZGUxY2FiNDJmMiIsImFtciI6WyJwd2QiXSwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJjZTg0MjA1ZC03ZGUyLTRhNzUtODNhOC00ZjdhYmU4MGY2N2MiLCJmYW1pbHlfbmFtZSI6Im1pbmciLCJnaXZlbl9uYW1lIjoieGluZyIsImlwYWRkciI6IjEuMTE5LjEzMi4xNjciLCJvaWQiOiIzY2E0Yjc2YmExOGI0MzYwYjA5NzE4OTA1OWNhYjRlMyIsInB1aWQiOiIxMDAzN0ZGRTk5OTVBRDY5Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoibWVlQGpkY2xvdWQuY29tIiwidGlkIjoiMzhkZDY2MzQtMTkzMS00YzUwLWE5YjQtZDE2Y2Q5ZDk3ZDU3IiwidW5pcXVlX25hbWUiOiJ0ZXN0MTkwMTE3IiwidXBuIjoidGVzdDE5MDExNyIsInV0aSI6IlI3NE5GaGZkMEVXWDl3VFBoYVFMQUEiLCJ2ZXIiOiIxLjAifQ.gnp0l_R8TDt5AXNIib87n0Vmg0upi7-QRZUBhb2czYjlmvaUGYBucmKqUnQdiMzLH1YYs9Fh7nJazEXztlF88Hii1h6zA4F-923VqSxVy-E1OHF7xLJ_IniYc0j43Q3mYYkSeUxc_SixHJlAHE3TzMKyzAsXS2fKXZB1ZQtkqGgc_z0P7YX6huD9uSc3ndRzBU6qOy136-6lPwVXOVYU01nTmIdRC1wEikQjaHOydIldc98zerWt03cdf9kpf5G1RjJxYMisCQTlObgiU1PjhewkFiSSCGk_U4hwAn-oh3SAuVMHVbruCpznryh0TueIMJ5N92geLnLJ0683TEzslg","ipAddress":"asdayryt"}
eeeewwwwww
queryUserRole连接成功
连接数据库成功
queryUserRole连接成功"teacher"
insertEntity数据库地址mongodb://root:Eq9RQ80J@jmongo-hb1-prod-mongo-t392nvqc111.jmiss.jdcloud.com:27017,jmongo-hb1-prod-mongo-t392nvqc112.jmiss.jdcloud.com:27017/admin?replicaSet=mgset-2242988359/UserGuid
连接数据库成功
action: registerUserGuid-error  tenantId: 38dd6634-1931-4c50-a9b4-d16cd9d97d57  unique_name: test190117 details: {"name":"MongoError"}
eeeewwwwww
连接数据库成功
getUserTableSettings: EnvironemtType:3
Using local emulator
getUserTableSettings: EnvironemtType:3
getUserTableSettings: EnvironemtType:3
查看下当前的环境：  false
Express start on port 1337...
